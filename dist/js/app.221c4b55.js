(function(e){function t(t){for(var a,i,o=t[0],c=t[1],u=t[2],p=0,l=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&l.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(l.length)l.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0f1d":function(e,t,r){"use strict";r("ae26")},"0fa0":function(e,t,r){},"1eec":function(e,t,r){},"20a2":function(e,t,r){},2683:function(e,t,r){},"2ea5":function(e,t,r){},"354c":function(e,t,r){"use strict";r("0fa0")},"362b":function(e,t,r){},"3a7e":function(e,t,r){},"4b41":function(e,t,r){"use strict";r("e799")},"51a3":function(e,t,r){},5339:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a,n=r("2b0e"),s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view",{key:e.$route.fullPath}),e.showAccount?r("Account"):e._e(),e.showAddress?r("Address"):e._e(),e.loading?r("div",{staticClass:"page-loading row-center-center"},[r("div",{staticClass:"loading-icon"},[r("Loading",{attrs:{color:"#40A6EB",type:"spinner"}})],1),r("div",{staticClass:"loading-mask"})]):e._e()],1)},i=[],o=(r("ac1e"),r("543e")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Overlay",{attrs:{show:!0,"z-index":"100"},on:{click:function(t){return e.$store.dispatch("setAccount",null)}}},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"account-frame",on:{click:function(e){e.stopPropagation()}}},["login"===e.show?r("div",{staticClass:"login-frame"},[r("h1",[e._v("登陆海外圈")]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入用户名",size:"large"},model:{value:e.login_account,callback:function(t){e.login_account=t},expression:"login_account"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入密码",type:"password",size:"large"},model:{value:e.login_password,callback:function(t){e.login_password=t},expression:"login_password"}})],1),r("div",{staticClass:"text-frame"},[r("Popover",{attrs:{trigger:"click",placement:"top"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("b",{staticStyle:{cursor:"pointer"}},[e._v("忘记密码?")])]},proxy:!0}],null,!1,846625665),model:{value:e.showForget,callback:function(t){e.showForget=t},expression:"showForget"}},[r("div",{staticClass:"forget-frame"},[e._v(" 重置密码请联系 "),r("a",{attrs:{href:"https://t.me/guevaratech",target:"_blank"}},[e._v("管理员")])])])],1),r("div",{staticClass:"button-frame"},[r("Button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"large"},on:{click:function(t){return e.login()}}},[e._v("登陆")])],1),r("div",{staticClass:"text-frame"},[r("a",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$store.dispatch("setAccount","register")}}},[e._v("没有账号？立即注册")])])]):e._e(),"register"===e.show?r("div",{staticClass:"register-frame"},[r("h1",[e._v("注册海外圈")]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入用户名，数字、字母或下划线",formatter:e.formatter,size:"large"},model:{value:e.register_account,callback:function(t){e.register_account=t},expression:"register_account"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入密码",type:"password",size:"large"},model:{value:e.register_password,callback:function(t){e.register_password=t},expression:"register_password"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请再次输入密码",type:"password",size:"large"},model:{value:e.register_password_confirm,callback:function(t){e.register_password_confirm=t},expression:"register_password_confirm"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入验证码",size:"large"},model:{value:e.register_captcha,callback:function(t){e.register_captcha=t},expression:"register_captcha"}})],1),r("div",{staticClass:"text-frame"},[r("div",{domProps:{innerHTML:e._s(e.captcha.data)},on:{click:function(t){return e.getCaptcha()}}})]),r("div",{staticClass:"button-frame"},[r("Button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"large"},on:{click:function(t){return e.register()}}},[e._v("注册")])],1),r("div",{staticClass:"text-frame"},[r("a",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$store.dispatch("setAccount","login")}}},[e._v("已有账号？立即登陆")])])]):e._e()])])])],1)},u=[],d=(r("9a83"),r("f564")),p=r("1da1"),l=(r("4056"),r("44bf")),m=(r("66b9"),r("b650")),f=(r("d82d"),r("7278")),h=(r("be7f"),r("565f")),v=(r("f1dc"),r("6e47")),g=(r("498a"),r("5319"),r("ac1f"),r("96cf"),r("a78e")),w=r.n(g),b={cookieExpires:60},_=b.cookieExpires,x="token",y=function(e){w.a.set(x,e,{expires:_||1})},C=function(){var e=w.a.get(x);return e||!1},k=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy")&&document.execCommand("Copy"),document.body.removeChild(t)},R=function(e){var t=new Date(e),r=t.getFullYear(),a=t.getMonth()+1,n=t.getDay(),s=t.getHours(),i=t.getMinutes(),o=t.getSeconds();return r+"-"+a+"-"+n+" "+s+":"+i+":"+o},O=r("d4ec"),j=r("bee2"),E=(r("b64b"),r("d3b7"),r("bc3a")),I=r.n(E),$=function(){function e(){Object(O["a"])(this,e),this.queue={}}return Object(j["a"])(e,[{key:"getInsideConfig",value:function(){var e=C(),t={timeout:18e4,headers:{token:e}};return t}},{key:"destroy",value:function(e){delete this.queue[e],Object.keys(this.queue).length}},{key:"interceptors",value:function(e,t){var r=this;e.interceptors.request.use((function(e){return Object.keys(r.queue).length,r.queue[t]=!0,e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){r.destroy(t);var a=e.data,n=e.status;return{data:a,status:n}}),(function(e){r.destroy(t);var a=e.response;if(!a){var n=JSON.parse(JSON.stringify(e)),s=n.request,i=s.statusText,o=s.status,c=n.config;a={statusText:i,status:o,request:{responseURL:c.url}}}return Promise.reject(e)}))}},{key:"request",value:function(e){var t=I.a.create();return e=Object.assign(this.getInsideConfig(),e),this.interceptors(t,e.url),t(e)}}]),e}(),S=$,L=new S,U=L,A={uploadImg:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/common/upload_img",method:"post",data:{stream:t,type:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},P={getCaptcha:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/user/get_captcha",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),register:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,a,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/user/register",method:"post",data:{account:t,password:r,captcha:a,key:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,a,n){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/user/login",method:"post",data:{account:t,password:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getUser:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/user/get_user",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),updateUser:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/user/update_user",method:"post",data:{name:t,avatar:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},T={getInfoList:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/info/get_list",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),addInfo:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,a,n,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/info/add_info",method:"post",data:{name:t,phone:r,wechat:a,telegram:n,address:s}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,a,n,s){return e.apply(this,arguments)}return t}(),delInfo:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/info/del_info",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateInfo:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,a,n,s,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/info/update_info",method:"post",data:{_id:t,name:r,phone:a,wechat:n,telegram:s,address:i}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,a,n,s,i){return e.apply(this,arguments)}return t}(),setDefault:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/info/set_default",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},q={getShop:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/get_shop",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),addShop:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/add_shop",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),delShop:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/del_shop",method:"post",data:{_id:t,password:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updateShop:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/update_shop",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setOpen:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/set_open",method:"post",data:{_id:t,open:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),setRunning:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/set_running",method:"post",data:{_id:t,running:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getClass:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/get_class",method:"post",data:{shopid:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),addClass:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/add_class",method:"post",data:{shopid:t,name:r,sort:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}(),delClass:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/del_class",method:"post",data:{shopid:t,_id:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updateClass:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,a,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/update_class",method:"post",data:{shopid:t,_id:r,name:a,sort:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,a,n){return e.apply(this,arguments)}return t}(),getGoods:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/get_goods",method:"post",data:{shopid:t,page:r,rows:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}(),addGoods:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/add_goods",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),delGoods:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/del_goods",method:"post",data:{shopid:t,_id:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updateGoods:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/update_goods",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),stopGoods:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/stop_goods",method:"post",data:{shopid:t,_id:r,stop:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},z={getShops:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/show/get_shops",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getTypeShops:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/show/get_type_shops",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getShop:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/show/get_shop/".concat(t),method:"post"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},F={newOrder:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/new_order",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getUserOrder:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/get_user_order",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getShopOrder:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/get_shop_order",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),cancelOrderUser:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/cancel_order_user",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),cancelOrderShop:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/cancel_order_shop",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),confirmOrder:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/confirm_order",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),delivery:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/delivery",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),arrived:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/arrived",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),finishOrder:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/finish_order",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),unfinishedCount:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/unfinished_count",method:"post",data:{shopid:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},G={newReview:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/review/new_review",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getReview:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/review/get_review",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),delReview:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/review/del_review",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),replyReview:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/review/reply_review",method:"post",data:{_id:t,text:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),delReply:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/review/del_reply",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},B={isfollow:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/follow/isfollow",method:"post",data:{shopid:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),follow:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/follow/follow",method:"post",data:{shopid:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),unfollow:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/follow/unfollow",method:"post",data:{shopid:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),userFollow:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/follow/user_follow",method:"post"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),shopFollow:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/follow/shop_follow",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},V={common:A,user:P,info:T,shop:q,show:z,order:F,review:G,follow:B},N={name:"Account",components:{Overlay:v["a"],Field:h["a"],Popover:f["a"],Button:m["a"],VanImage:l["a"]},data:function(){return{showForget:!1,captcha:{data:"",key:""},login_account:"",login_password:"",register_account:"",register_password:"",register_captcha:"",register_key:"",register_password_confirm:""}},computed:{loading:function(){return this.$store.state.loading},show:function(){return this.$store.state.showAccount}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.show){t.next=3;break}return t.next=3,e.getCaptcha();case 3:case"end":return t.stop()}}),t)})))()},methods:{getCaptcha:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.captcha={data:"",key:""},t.next=3,V.user.getCaptcha();case 3:r=t.sent,a=r.data,a.success&&(e.captcha=a.captcha);case 6:case"end":return t.stop()}}),t)})))()},register:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.register_password_confirm.trim()===e.register_password.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请保持密码输入一致"}));case 2:if(e.register_account.trim()&&e.register_password.trim()&&e.register_captcha.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"注册参数缺失"}));case 4:return e.register_key=e.captcha.key,t.next=7,V.user.register(e.register_account,e.register_password,e.register_captcha,e.register_key);case 7:if(r=t.sent,a=r.data,a.success){t.next=11;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 11:Object(d["a"])({type:"success",message:"注册成功！"}),e.$store.dispatch("setAccount","login");case 13:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.login_account.trim()&&e.login_password.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"登陆参数缺失"}));case 2:return t.next=4,V.user.login(e.login_account,e.login_password);case 4:if(r=t.sent,a=r.data,a.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 8:y(a.data.token),e.$store.dispatch("getUser"),e.$store.dispatch("getInfoList"),Object(d["a"])({type:"success",message:"登陆成功！"}),e.$store.dispatch("setAccount",null);case 13:case"end":return t.stop()}}),t)})))()},formatter:function(e){return e.replace(/[^\w_]/g,"")}}},Y=N,M=(r("354c"),r("2877")),D=Object(M["a"])(Y,c,u,!1,null,"6eecc09a",null),H=D.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Overlay",{attrs:{show:e.show,"z-index":"100"},on:{click:function(t){return e.$store.dispatch("setAddress",{show:!1,info:null})}}},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"称呼",placeholder:"你的称呼"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"电话",placeholder:"您的电话号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"微信",placeholder:"您的微信号"},model:{value:e.wechat,callback:function(t){e.wechat=t},expression:"wechat"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"飞机",formatter:e.checkTelgram,placeholder:"飞机的 username，不需要带@"},model:{value:e.telegram,callback:function(t){e.telegram=t},expression:"telegram"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{type:"textarea",rows:"3",autosize:"",label:"地址",placeholder:"你的详细收货地址","show-word-limit":"",maxlength:"200"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),r("div",{staticClass:"info-item save-item"},[e.id?r("Button",{attrs:{type:"info"},on:{click:function(t){return e.updateInfo()}}},[e._v("更新")]):r("Button",{attrs:{type:"info"},on:{click:function(t){return e.addInfo()}}},[e._v("保存")]),e._v(" "),r("Button",{attrs:{type:"default"},on:{click:function(t){return e.$store.dispatch("setAddress",{show:!1,info:null})}}},[e._v("取消")])],1)])])])],1)},W=[],K=(r("b0c0"),{name:"Address",components:{Overlay:v["a"],Field:h["a"],Button:m["a"],Notify:d["a"]},data:function(){return{id:"",name:"",phone:"",wechat:"",telegram:"",address:""}},computed:{show:function(){return this.$store.state.showAddress}},mounted:function(){this.$store.state.eidtAddress&&(this.id=this.$store.state.eidtAddress._id,this.name=this.$store.state.eidtAddress.name,this.phone=this.$store.state.eidtAddress.phone,this.wechat=this.$store.state.eidtAddress.wechat,this.telegram=this.$store.state.eidtAddress.telegram,this.address=this.$store.state.eidtAddress.address)},methods:{addInfo:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.name.trim()&&e.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"称呼或地址信息缺失"}));case 2:if(e.phone.trim()||e.wechat.trim()||e.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请填写至少一种联系方式"}));case 4:return t.next=6,V.info.addInfo(e.name,e.phone,e.wechat,e.telegram,e.address);case 6:if(r=t.sent,a=r.data,a.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 10:e.$store.dispatch("getInfoList"),e.$store.dispatch("setAddress",{show:!1,info:null});case 12:case"end":return t.stop()}}),t)})))()},updateInfo:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.name.trim()&&e.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"称呼或地址信息缺失"}));case 2:if(e.phone.trim()||e.wechat.trim()||e.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请填写至少一种联系方式"}));case 4:return t.next=6,V.info.updateInfo(e.id,e.name,e.phone,e.wechat,e.telegram,e.address);case 6:if(r=t.sent,a=r.data,a.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 10:e.$store.dispatch("getInfoList"),e.$store.dispatch("setAddress",{show:!1,info:null});case 12:case"end":return t.stop()}}),t)})))()},checkTelgram:function(e){return e.replace(/[^\w_]/g,"")}}}),Q=K,X=(r("5dfa"),Object(M["a"])(Q,J,W,!1,null,"80ec9096",null)),Z=X.exports,ee={name:"AppPC",components:{Account:H,Address:Z,Loading:o["a"]},computed:{showAccount:function(){return this.$store.state.showAccount},showAddress:function(){return this.$store.state.showAddress},loading:function(){return this.$store.state.loading}},mounted:function(){this.$store.dispatch("getUser"),this.$store.dispatch("getInfoList")}},te=ee,re=(r("7f26"),Object(M["a"])(te,s,i,!1,null,null,null)),ae=re.exports,ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},se=[],ie={name:"AppMB"},oe=ie,ce=(r("0f1d"),Object(M["a"])(oe,ne,se,!1,null,null,null)),ue=ce.exports,de=(r("7db0"),r("fb6a"),r("d81d"),r("a630"),r("3ca3"),r("159b"),r("8c4f")),pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame"},[r("div",{staticClass:"home-banner"},[r("div",{staticClass:"banner-content"},[r("Header"),r("div",{staticClass:"banner-brief"},[e._v(" 海外圈，海外生活不陌生 ")]),r("div",{staticClass:"banner-body row-center-center"},[r("div",{staticClass:"banner-body-content row-between-center"},[r("div",{staticClass:"search-frame"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.param.keywords,expression:"param.keywords"}],attrs:{placeholder:"搜索相关店铺"},domProps:{value:e.param.keywords},on:{input:function(t){t.target.composing||e.$set(e.param,"keywords",t.target.value)}}})]),r("div",{staticClass:"search-button",on:{click:function(t){return e.reset()}}},[e._v(" 搜索 ")])])])],1),r("div",{staticClass:"banner-mask"})]),r("div",{staticClass:"home-body"},[r("div",{staticClass:"home-service-frame row-between-center"},e._l(e.SERVICETYPE,(function(t,a){return r("div",{key:a,staticClass:"service-item",on:{click:function(t){return e.$router.push("/service/"+(a+1))}}},[r("VanImage",{attrs:{src:t.icon,fit:"cover",width:"60",height:"60"}}),r("div",[e._v(e._s(t.name))])],1)})),0),r("div",{staticClass:"home-shops-frame"},[r("ShopList",{attrs:{type:0,items:e.items,loading:e.loading,hasMore:e.hasMore},on:{search:function(t){return e.search()}}})],1)])])},le=[],me=r("2909"),fe=(r("4142"),r("39d1")),he=(r("841c"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["banner-header",e.trans?"banner-header-trans":""]},[r("div",{staticClass:"banner-header-content row-between-center"},[r("div",{staticClass:"logo-frame row-start-center",on:{click:function(t){return e.$router.push("/")}}},[r("VanImage",{attrs:{src:"/img/logo.png",fit:"cover",width:"50",height:"50"}}),r("div",{staticClass:"logo-slogan"},[e._v("海外圈")])],1),e.user?r("div",{staticClass:"user-frame",on:{click:function(e){e.stopPropagation()}}},[r("Popover",{attrs:{"close-on-click-outside":!0,trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("div",{staticClass:"row-center-center"},[r("VanImage",{attrs:{src:e.user.avatar,fit:"cover",width:"50",height:"50",round:""}}),r("div",{staticClass:"username"},[r("b",[e._v(e._s(e.user.name))])])],1)]},proxy:!0}]),model:{value:e.showUserAction,callback:function(t){e.showUserAction=t},expression:"showUserAction"}},[r("div",{staticClass:"user-action-frame"},[r("div",{staticClass:"user-action-item",on:{click:function(t){return e.$router.push("/user/0")}}},[e._v("用户中心")]),r("div",{staticClass:"user-action-item",on:{click:function(t){return e.logout()}}},[e._v("退出登录")])])])],1):r("div",{staticClass:"account"},[r("span",[r("a",{on:{click:function(t){return e.$store.dispatch("setAccount","login")}}},[e._v("登陆")])]),e._v(" / "),r("span",[r("a",{on:{click:function(t){return e.$store.dispatch("setAccount","register")}}},[e._v("注册")])])])])])}),ve=[],ge={name:"Header",components:{VanImage:l["a"],Rate:fe["a"],Popover:f["a"]},computed:{user:function(){return this.$store.state.user},trans:function(){return-1!==["Home","Shop"].indexOf(this.$route.name)}},data:function(){return{showUserAction:!1}},methods:{logout:function(){y(null),this.showUserAction=!1,this.$store.dispatch("getUser")}}},we=ge,be=(r("a3ad"),Object(M["a"])(we,he,ve,!1,null,"4589b2a2",null)),_e=be.exports,xe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v(e._s(e.title))]),r("div",{staticClass:"home-shop-list-frame row-start-center"},e._l(e.items,(function(t,a){return r("div",{key:a,staticClass:"home-shop-item-frame row-between-center",on:{click:function(r){return e.$router.push("/shop/"+t._id)}}},[r("div",{staticClass:"shop-logo"},[r("VanImage",{attrs:{src:t.logo,width:"100%",height:"100%",fit:"cover"}})],1),r("div",{staticClass:"shop-info"},[r("div",{staticClass:"row-between-center"},[r("div",{staticClass:"shop-name omit"},[e._v(e._s(t.name))]),r("div",{staticClass:"shop-city"},[e._v(e._s(t.city))])]),r("div",{staticClass:"shop-rate"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"14",color:"#ffd21e",readonly:"","void-color":"#eee"},model:{value:t.rate,callback:function(r){e.$set(t,"rate",r)},expression:"item.rate"}})],1),r("div",{staticClass:"shop-time"},[e._v("营业时间："+e._s(t.stime)+" - "+e._s(t.etime))]),r("div",{staticClass:"shop-minprice"},[e._v("最低配送："+e._s(t.minprice)+"P")]),r("div",{staticClass:"shop-brief omit"},[e._v(e._s(t.brief))]),r("div",{staticClass:"shop-delivery-payment"},[-1!==t.payment.indexOf(0)?r("Tag",{attrs:{type:"success"}},[e._v("支持到付")]):e._e()],1)])])})),0),e.hasMore?r("div",{staticClass:"get-more row-center-center"},[r("Button",{staticStyle:{width:"150px"},attrs:{round:"",type:"primary",loading:e.loading},on:{click:function(t){return e.$emit("search")}}},[e._v("查看更多")])],1):e._e()])},ye=[],Ce=(r("5f1a"),r("a3e2")),ke=[{name:"美食",icon:"/img/home/food.png"},{name:"生鲜",icon:"/img/home/vegetable.png"},{name:"超市",icon:"/img/home/cart.png"},{name:"服饰",icon:"/img/home/coat.png"},{name:"美妆",icon:"/img/home/cosmetics.png"},{name:"药品",icon:"/img/home/pharmacy.png"},{name:"换汇",icon:"/img/home/bank.png"},{name:"娱乐",icon:"/img/home/ktv.png"}],Re=["现金到付","线上付款"],Oe=["商家配送","第三方配送"],je=["P","CNY","USD","AED"],Ee=["份","个","串","只","瓶","把","g","kg","斤","盒","包","粒","支","袋","组","例","件","双","条","套"],Ie={name:"ShopList",components:{VanImage:l["a"],Rate:fe["a"],Tag:Ce["a"],Button:m["a"]},props:["type","items","loading","hasMore"],computed:{title:function(){var e="商家列表";return ke[this.type-1]&&(e=ke[this.type-1].name+e),e}}},$e=Ie,Se=(r("fda8"),Object(M["a"])($e,xe,ye,!1,null,"1c8bcd01",null)),Le=Se.exports,Ue={name:"Home",components:{VanImage:l["a"],Rate:fe["a"],Popover:f["a"],ShopList:Le,Header:_e},computed:{user:function(){return this.$store.state.user}},data:function(){return{SERVICETYPE:ke,PAYMENT:Re,DELIVERY:Oe,showUserAction:!1,loading:!1,hasMore:!0,param:{page:1,rows:40,keywords:""},items:[]}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.search();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{search:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,V.show.getShops(e.param);case 3:if(a=t.sent,n=a.data,n.success){t.next=7;break}return t.abrupt("return",Notify({type:"danger",message:n.message}));case 7:e.loading=!1,n.data.length<e.param.rows&&(e.hasMore=!1),e.param.page++,(r=e.items).push.apply(r,Object(me["a"])(n.data));case 11:case"end":return t.stop()}}),t)})))()},reset:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.items=[],e.param.page=1,e.search();case 3:case"end":return t.stop()}}),t)})))()},logout:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:y(null),e.showUserAction=!1,e.$store.dispatch("getUser");case 3:case"end":return t.stop()}}),t)})))()}}},Ae=Ue,Pe=(r("c60e"),Object(M["a"])(Ae,pe,le,!1,null,"7f8647e1",null)),Te=Pe.exports,qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame"},[r("Header"),r("div",{staticClass:"shop-list-frame"},[r("div",{staticClass:"zone-frame"},[r("ShopList",{attrs:{type:e.$route.params.type,items:e.items,loading:e.loading,hasMore:e.hasMore},on:{search:function(t){return e.search()}}})],1)])],1)},ze=[],Fe={name:"Service",components:{VanImage:l["a"],Rate:fe["a"],Header:_e,ShopList:Le},data:function(){return{items:[],loading:!1,hasMore:!0,param:{page:1,rows:40,type:this.$route.params.type}}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.search();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{search:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,V.show.getTypeShops(e.param);case 3:if(a=t.sent,n=a.data,n.success){t.next=7;break}return t.abrupt("return",Notify({type:"danger",message:n.message}));case 7:e.loading=!1,n.data.length<e.param.rows&&(e.hasMore=!1),e.param.page++,(r=e.items).push.apply(r,Object(me["a"])(n.data));case 11:case"end":return t.stop()}}),t)})))()}}},Ge=Fe,Be=(r("6c3e"),Object(M["a"])(Ge,qe,ze,!1,null,"729699a6",null)),Ve=Be.exports,Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame"},[r("div",{staticClass:"page-banner",style:{"background-image":"url("+e.shop.back+")"}},[r("div",{staticClass:"banner-content"},[r("Header"),r("div",{staticClass:"shop-base-frame row-between-center"},[r("div",{staticClass:"shop-base-info row-start-center"},[r("VanImage",{attrs:{src:e.shop.logo,fit:"cover",round:"",width:"80",height:"80"}}),r("div",{staticClass:"shop-info"},[r("div",{staticClass:"shop-name"},[r("b",[e._v(e._s(e.shop.name))])]),r("div",{staticClass:"shop-rate"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"14",color:"#ffd21e",readonly:"","void-color":"#eee"},model:{value:e.shop.rate,callback:function(t){e.$set(e.shop,"rate",t)},expression:"shop.rate"}})],1)]),r("div",{staticClass:"shop-follow"},[r("div",{on:{click:function(t){e.following?e.unfollow():e.follow()}}},[e.following?r("Icon",{attrs:{name:"like",size:"20",color:"#fc6923"}}):r("Icon",{attrs:{name:"like-o",size:"20"}})],1),r("div",{class:[e.following?"follow":""]},[r("b",[e._v(e._s(e.following?"取消":"关注"))])])])],1),r("div",{staticClass:"shop-extra-info row-start-top"},[r("div",{staticClass:"extra-info-frame"},[e._m(0),r("div",{staticClass:"extra-info-value"},[r("b",[e._v(e._s(e.shop.minprice)+" "+e._s(e.CURRENCY[e.shop.currency]))])])]),r("div",{staticClass:"extra-info-frame"},[e._m(1),r("div",{staticClass:"extra-info-value"},e._l(e.shop.delivery,(function(t,a){return r("Tag",{key:a,staticClass:"tags",attrs:{type:"success"}},[e._v(e._s(e.DELIVERY[t]))])})),1)]),r("div",{staticClass:"extra-info-frame"},[e._m(2),r("div",{staticClass:"extra-info-value"},e._l(e.shop.payment,(function(t,a){return r("Tag",{key:a,staticClass:"tags",attrs:{type:"success"}},[e._v(e._s(e.PAYMENT[t]))])})),1)])])])],1),r("div",{staticClass:"banner-mask"})]),r("div",{staticClass:"shop-tag-frame"},[r("div",{staticClass:"zone-frame row-start-center"},[r("div",{class:["shop-tag-item",0===e.active?"active":""],on:{click:function(t){e.active=0}}},[r("b",[e._v("所有商品")])]),r("div",{class:["shop-tag-item",1===e.active?"active":""],on:{click:function(t){e.active=1}}},[r("b",[e._v("商家信息")])]),r("div",{class:["shop-tag-item",2===e.active?"active":""],on:{click:function(t){e.active=2}}},[r("b",[e._v("用户点评")])])])]),r("div",{staticClass:"base-frame row-between-top"},[r("div",{staticClass:"base-frame-left"},[r("div",{staticClass:"shop-goods-frame",style:{display:0===e.active?"":"none"}},[r("div",{staticClass:"shop-class-list row-start-center"},e._l(e.classList,(function(t,a){return r("div",{key:a,class:["shop-class-item",e.class_active===t._id?"active":""],on:{click:function(r){e.class_active=t._id}}},[r("b",[e._v(e._s(t.name))])])})),0),r("div",{staticClass:"shop-goods-list row-between-top"},e._l(e.classGoodsList,(function(t,a){return r("div",{key:a,staticClass:"shop-goods-item row-between-top"},[r("VanImage",{attrs:{src:t.pics,fit:"cover",width:"40%",height:"130px"},on:{click:function(r){return e.lookPics(t.pics)}}}),r("div",{staticClass:"goods-info"},[r("div",{staticClass:"goods-name"},[r("b",[e._v(e._s(t.code))]),e._v(" "),r("b",[e._v(e._s(t.name))])]),r("div",{staticClass:"goods-tags"},[e._l(t.tags,(function(t,a){return r("Tag",{key:a,staticClass:"tags",attrs:{type:"success"}},[e._v(e._s(t))])})),t.stop?r("Tag",{staticClass:"tags",attrs:{type:"danger"}},[e._v("已售完")]):e._e()],2),r("div",[r("div",{staticClass:"goods-price"},[r("b",[e._v(e._s(t.price)+e._s(e.CURRENCY[e.shop.currency])+"/"+e._s(1===t.count?"":t.count)+e._s(e.UNIT[t.unit]))])]),e.ordering||t.stop?e._e():r("div",{staticClass:"order-action row-start-center"},[r("div",{staticClass:"order-sub",on:{click:function(r){return e.order(t,!1)}}},[e._v("-")]),r("div",{staticClass:"order-num"},[e._v(e._s(e.orderList[t._id]?e.orderList[t._id]["count"]:0))]),r("div",{staticClass:"order-add",on:{click:function(r){return e.order(t,!0)}}},[e._v("+")])])])])],1)})),0)]),r("div",{staticClass:"shop-info-frame",style:{display:1===e.active?"":"none"}},[r("h1",[e._v("店铺照片")]),r("div",{staticClass:"shop-pics-list row-start-center"},e._l(e.shop.pics,(function(e,t){return r("div",{key:t,staticClass:"shop-pics-item"},[r("VanImage",{attrs:{src:e,fit:"cover",width:"100%",height:"100%"}})],1)})),0),r("div",{staticClass:"shop-info-item row-start-top"},[r("Icon",{attrs:{name:"shop",size:"22"}}),r("div",{staticClass:"shop-info-text row-start-top"},[e._v("店铺介绍：")]),r("div",{staticStyle:{"max-width":"500px"}},[e._v(e._s(e.shop.brief))])],1),r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"map-marked",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("店铺地址："+e._s(e.shop.city)+" - "+e._s(e.shop.address))])],1),r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"underway",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("营业时间："+e._s(e.shop.stime)+" - "+e._s(e.shop.etime))])],1),r("br"),r("br"),r("h1",[e._v("联系方式")]),e.shop.phone?r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"phone",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("商家电话："+e._s(e.shop.phone))])],1):e._e(),e.shop.wechat?r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"wechat",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("商家微信："+e._s(e.shop.wechat))])],1):e._e(),e.shop.telegram?r("div",{staticClass:"shop-info-item row-start-center"},[r("VanImage",{attrs:{src:"/img/telegram.svg",fit:"cover",width:"20px",height:"20px"}}),r("div",{staticClass:"shop-info-text"},[e._v("商家飞机："),r("a",{attrs:{href:"https://t.me/"+e.shop.telegram,target:"_blank"}},[e._v(e._s(e.shop.telegram))])])],1):e._e()]),r("div",{staticClass:"shop-comment-frame",style:{display:2===e.active?"":"none"}},[r("Review",{attrs:{shopid:e.$route.params._id}})],1)]),r("div",{staticClass:"base-frame-right"},[e._m(3),r("div",{staticClass:"shop-discount-frame"},[e._m(4),r("div",{staticClass:"list row-start-top"},[r("div",{staticClass:"discount-text"},[e._v(e._s(e.shop.discount))])]),e.shop.discount?e._e():r("div",{staticClass:"list"},[e._v(" 暂无优惠信息 ")])]),r("div",{staticClass:"shop-notice-frame"},[e._m(5),r("div",{staticClass:"list"},[e._v(" "+e._s(e.shop.notice)+" ")])])]),r("div",{staticClass:"shopping-cart",on:{click:function(t){return e.showCartAtion()}}},[r("Badge",{attrs:{content:e.orderCount}},[r("VanImage",{attrs:{src:"/img/shop/shopping-cart.png",fit:"cover",width:"60px",height:"60px"}})],1)],1),r("Overlay",{attrs:{show:e.showCart},on:{click:function(t){e.showCart=!1}}},[r("div",{staticClass:"row-center-center"},[r("div",{staticClass:"order-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-base"},[r("p",[e._v("请选择收货地址:")]),r("div",{staticClass:"uinfo-list"},[r("RadioGroup",{model:{value:e.uinfo,callback:function(t){e.uinfo=t},expression:"uinfo"}},e._l(e.infoList,(function(t,a){return r("div",{key:a,staticClass:"uinfo-item"},[r("Radio",{attrs:{name:t}},[r("div",{staticClass:"row-start-center"},[e._v("称呼："+e._s(t.name)+" ｜ 地址："+e._s(t.address))]),r("br"),r("div",{staticClass:"row-start-center"},[e._v("电话："+e._s(t.phone)+" ｜ 微信："+e._s(t.wechat)+" ｜ 飞机：@"+e._s(t.telegram))])])],1)})),0),e.infoList.length<6?r("div",{staticClass:"uinfo-item row-start-center",on:{click:function(t){return e.$store.dispatch("setAddress",{show:!0,info:null})}}},[r("Icon",{attrs:{name:"add-o",size:"20"}}),r("span",{staticStyle:{"margin-left":"10px",cursor:"pointer"}},[e._v("新增地址")])],1):e._e()],1)]),r("div",{staticClass:"order-base row-between-center"},[r("p",[e._v("请选择付款方式:")]),r("RadioGroup",{model:{value:e.orderInfo.payment,callback:function(t){e.$set(e.orderInfo,"payment",t)},expression:"orderInfo.payment"}},[r("div",{staticClass:"row-start-center"},e._l(e.shop.payment,(function(t,a){return r("div",{staticClass:"order-payment"},[r("Radio",{attrs:{name:t}},[e._v(e._s(e.PAYMENT[t]))])],1)})),0)])],1),r("div",{staticClass:"order-list"},e._l(e.orderList,(function(t,a){return r("div",{key:a,staticClass:"row-between-top"},[r("div",{staticClass:"order-item row-start-top"},[r("div",{staticClass:"order-item-pics",on:{click:function(r){return e.lookPics(t.info.pics)}}},[r("VanImage",{attrs:{src:t.info.pics,fit:"cover",width:"100px",height:"60px"}})],1),r("div",{staticClass:"order-item-name"},[e._v(" "+e._s(t.info.code)+" "+e._s(t.info.name)+" * "+e._s(t.count)+" ")])]),r("div",[e._v(" "+e._s(t.amount)+" "+e._s(e.CURRENCY[e.shop.currency])+" ")])])})),0),r("div",{staticClass:"order-memo"},[r("Field",{attrs:{rows:"2",autosize:"",label:"客户备注",type:"textarea",maxlength:"150",placeholder:"可备注您的要求，比如口味，忌口等","show-word-limit":""},model:{value:e.orderInfo.memo,callback:function(t){e.$set(e.orderInfo,"memo",t)},expression:"orderInfo.memo"}})],1),r("div",{staticClass:"order-create row-between-center"},[r("div",{staticClass:"order-amount"},[r("b",[e._v("商品总计： "+e._s(e.orderAmount)+" "+e._s(e.CURRENCY[e.shop.currency]))])]),r("div",[r("Button",{staticStyle:{width:"150px"},attrs:{round:"",type:"info",disabled:!e.orderAmount||e.orderAmount<e.shop.minprice},on:{click:function(t){return e.createOrder()}}},[e._v(" 生成订单 ")])],1)])])])])],1)])},Ye=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b",[e._v("起送价")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b",[e._v("配送方式")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b",[e._v("付款方式")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shop-notice-title"},[r("b",[e._v("商家公告")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("b",[e._v("优惠")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("b",[e._v("公告")])])}],Me=(r("4662"),r("28a2")),De=(r("e17f"),r("2241")),He=(r("4ddd"),r("9f14")),Je=(r("a44c"),r("e27c")),We=(r("18e9"),r("471a")),Ke=(r("c3a6"),r("ad06")),Qe=(r("4de4"),r("99af"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"review-frame"},[e._l(e.items,(function(t,a){return r("div",{key:a,staticClass:"review-item row-start-top"},[r("div",{staticClass:"user-info"},[r("VanImage",{attrs:{src:t.user.avatar,width:"50",height:"50",fit:"cover",round:""}}),r("div",[e._v(e._s(t.user.name))])],1),r("div",{staticClass:"review-info"},[r("div",{staticClass:"review-rate"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"14",color:"#ffd21e",readonly:"","void-color":"#eee"},model:{value:t.rate,callback:function(r){e.$set(t,"rate",r)},expression:"item.rate"}})],1),r("div",{staticClass:"review-pics row-start-center"},e._l(t.pics,(function(t,a){return r("div",{key:a,staticClass:"pic-item",on:{click:function(r){return e.lookPics(t)}}},[r("VanImage",{attrs:{src:t,width:"100%",height:"100%",fit:"cover"}})],1)})),0),r("div",{staticClass:"review-text"},[e._v(" "+e._s(t.text)+" ")]),r("div",{staticClass:"review-time"},[e._v(" "+e._s(e._f("formatTime")(t.created_at))+" ")]),r("div",{staticClass:"review-action row-start-center"},[t.ownerid!==e.user._id||t.reply?e._e():r("div",{staticClass:"action-item"},[r("a",{on:{click:function(r){e.reply._id=t._id,e.reply.key=a,e.reply.show=!0}}},[e._v("回复评论")])]),e._v(" "),t.user._id===e.user._id?r("div",{staticClass:"action-item"},[r("a",{on:{click:function(r){return e.delReview(t._id,a)}}},[e._v("删除评论")])]):e._e()]),t.reply&&t.ownerid===e.user._id?r("div",[r("div",{staticClass:"review-reply"},[r("b",[e._v("商家回复：")]),e._v(e._s(t.reply)+" ")]),r("div",{staticClass:"review-action row-start-center"},[r("div",{staticClass:"action-item"},[r("a",{on:{click:function(r){return e.delReply(t._id,a)}}},[e._v("删除回复")])])])]):e._e()])])})),e.hasMore?r("div",{staticClass:"review-more row-center-center"},[r("Button",{staticStyle:{width:"150px"},attrs:{round:"",type:"primary",loading:e.loading},on:{click:function(t){return e.getReview()}}},[e._v("查看更多")])],1):e._e(),r("Overlay",{attrs:{show:e.reply.show,"z-index":"150"}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.reply.show=!1}}},[r("div",{staticClass:"review-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-text"},[r("h3",[e._v("回复评价")]),r("div",{staticClass:"review-item"},[r("Field",{attrs:{rows:"3",autosize:"",type:"textarea",placeholder:"请输入回复内容",maxlength:"150","show-word-limit":""},model:{value:e.reply.text,callback:function(t){e.$set(e.reply,"text",t)},expression:"reply.text"}})],1)]),r("div",{staticClass:"review-action row-start-center"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.replyReview()}}},[e._v("提交评价")]),r("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"warning"},on:{click:function(t){return e.resetReply()}}},[e._v("取消提交")])],1)])])])],2)}),Xe=[],Ze=r("5530"),et=(r("a434"),{name:"Review",props:["shopid"],components:{VanImage:l["a"],Rate:fe["a"],Button:m["a"],Overlay:v["a"],Field:h["a"]},filters:{formatTime:function(e){return R(e)}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getReview();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{params:{page:1,rows:50},items:[],hasMore:!0,loading:!1,reply:{_id:"",text:"",key:"",show:!1}}},computed:{user:function(){var e=this.$store.state.user?this.$store.state.user:{};return e}},methods:{getReview:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,V.review.getReview(Object(Ze["a"])(Object(Ze["a"])({},e.params),{},{shopid:e.shopid}));case 3:if(a=t.sent,n=a.data,e.loading=!1,n.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 8:e.params.page++,n.data.length<e.params.rows&&(e.hasMore=!1),(r=e.items).push.apply(r,Object(me["a"])(n.data));case 11:case"end":return t.stop()}}),t)})))()},lookPics:function(e){return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(Me["a"])({images:[e],closeable:!0});case 1:case"end":return t.stop()}}),t)})))()},delReview:function(e,t){var r=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:De["a"].confirm({title:"删除评价",message:"确认删除该评价吗？删除后不可恢复"}).then(Object(p["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,V.review.delReview(e);case 2:if(n=a.sent,s=n.data,s.success){a.next=6;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:return r.items.splice(t,1),a.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 8:case"end":return a.stop()}}),a)})))).catch((function(){}));case 1:case"end":return a.stop()}}),a)})))()},replyReview:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.review.replyReview(e.reply._id,e.reply.text);case 2:if(r=t.sent,a=r.data,a.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return e.items[e.reply.key].reply=e.reply.text,e.resetReply(),t.abrupt("return",Object(d["a"])({type:"success",message:a.message}));case 9:case"end":return t.stop()}}),t)})))()},delReply:function(e,t){var r=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:De["a"].confirm({title:"删除回复",message:"确认删除该回复吗？"}).then(Object(p["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,V.review.delReply(e);case 2:if(n=a.sent,s=n.data,s.success){a.next=6;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:return r.items[t].reply="",a.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 8:case"end":return a.stop()}}),a)})))).catch((function(){}));case 1:case"end":return a.stop()}}),a)})))()},resetReply:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.reply={_id:"",text:"",key:"",show:!1};case 1:case"end":return t.stop()}}),t)})))()}}}),tt=et,rt=(r("67b7"),Object(M["a"])(tt,Qe,Xe,!1,null,"0f211653",null)),at=rt.exports,nt={name:"Shop",components:{VanImage:l["a"],Rate:fe["a"],Header:_e,Review:at,Tag:Ce["a"],Icon:Ke["a"],Badge:We["a"],Overlay:v["a"],Field:h["a"],Button:m["a"],RadioGroup:Je["a"],Radio:He["a"]},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getShop();case 3:return t.next=5,e.isfollow();case 5:e.$store.dispatch("setLoading",!1);case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{PAYMENT:Re,DELIVERY:Oe,CURRENCY:je,UNIT:Ee,active:0,shop:{},classList:[],goodsList:[],following:!1,class_active:"",ordering:!1,showCart:!1,orderList:{},uinfo:"",orderInfo:{uinfo:"",memo:"",payment:0,items:[],total:0,currency:"",shopid:""}}},computed:{user:function(){return this.$store.state.user},infoList:function(){return this.$store.state.infoList},classGoodsList:function(){var e=this,t=this.goodsList.filter((function(t,r){return-1!==t.classid.indexOf(e.class_active)}));return t},orderCount:function(){var e=0;for(var t in this.ordering,this.orderList)e+=this.orderList[t].count;return e},orderAmount:function(){var e=0;for(var t in this.ordering,this.orderList)e+=this.orderList[t].amount;return e}},methods:{isfollow:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.follow.isfollow(e.$route.params._id);case 2:r=t.sent,a=r.data,a.success&&(e.following=!!a.data);case 5:case"end":return t.stop()}}),t)})))()},getShop:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.show.getShop(e.$route.params._id);case 2:if(r=t.sent,a=r.data,a.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:n=a.data,s=n.shop,i=n.classList,o=n.goodsList,e.shop=s,e.classList=i,e.goodsList=o,i.length&&(e.class_active=i[0]._id);case 11:case"end":return t.stop()}}),t)})))()},order:function(e,t){var r=this;return Object(p["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r.ordering=!0,r.orderList[e._id]||(r.orderList[e._id]={count:0,amount:0,info:{}}),!t){a.next=8;break}r.orderList[e._id]["count"]=r.orderList[e._id]["count"]+1,r.orderList[e._id]["amount"]=r.orderList[e._id]["count"]*e.price,r.orderList[e._id]["info"]={name:e.name,code:e.code,pics:e.pics},a.next=15;break;case 8:if(!(r.orderList[e._id]["count"]<=1)){a.next=12;break}return delete r.orderList[e._id],r.ordering=!1,a.abrupt("return");case 12:r.orderList[e._id]["count"]=r.orderList[e._id]["count"]-1,r.orderList[e._id]["amount"]=r.orderList[e._id]["count"]*e.price,r.orderList[e._id]["info"]={name:e.name,code:e.code,pics:e.pics};case 15:r.ordering=!1;case 16:case"end":return a.stop()}}),a)})))()},createOrder:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r in e.orderInfo.currency=e.shop.currency,e.orderInfo.items=[],e.orderList)e.orderInfo.items.push(e.orderList[r]);if(e.orderInfo.total=e.orderAmount,e.orderInfo.shopid=e.shop._id,e.uinfo){t.next=7;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请选择收货地址"}));case 7:if(e.orderInfo.total){t.next=9;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请选择购买的商品"}));case 9:return e.orderInfo.uinfo="称呼：".concat(e.uinfo.name,"\n地址：").concat(e.uinfo.address,"\n").concat(e.uinfo.phone?"电话："+e.uinfo.phone+"\n":"").concat(e.uinfo.wechat?"微信："+e.uinfo.wechat+"\n":"").concat(e.uinfo.telegram?"飞机：@"+e.uinfo.telegram:""),t.next=12,V.order.newOrder(e.orderInfo);case 12:if(a=t.sent,n=a.data,n.success){t.next=16;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 16:Object(d["a"])({type:"success",message:n.message}),e.createOrderText(),e.showCart=!1;case 19:case"end":return t.stop()}}),t)})))()},createOrderText:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i,o,c,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r=e.orderInfo,a=r.items,n=r.total,s=r.currency,i=r.uinfo,o=r.payment,c=r.memo,u="点单商品：\n\n",d=0;d<a.length;d++)u+="".concat(d+1,"：").concat(a[d].info.code,"*").concat(a[d].count,"(").concat(a[d].info.name,") ").concat(a[d].amount,"\n");u+="\n总计：".concat(n," ").concat(e.CURRENCY[s],"\n"),u+="\n付款方式：".concat(e.PAYMENT[o],"\n"),u+="\n联系方式：\n\n".concat(i,"\n"),u+="\n备注：".concat(c,"\n"),k(u),alert("订单信息复制成功！"),De["a"].alert({title:"发送订单信息给商家",message:"订单信息已经复制到您的剪切板，请点击 通知商家 并粘贴订单信息给商家",confirmButtonText:"通知商家",theme:"round-button"}).then((function(){window.open("https://t.me/".concat(e.shop.telegram)),e.$router.push("/user/2")}));case 10:case"end":return t.stop()}}),t)})))()},showCartAtion:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user)for(r in e.showCart=!0,e.infoList)e.infoList[r].default&&(e.uinfo=e.infoList[r]);else e.$store.dispatch("setAccount","login");case 1:case"end":return t.stop()}}),t)})))()},follow:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user){t.next=2;break}return t.abrupt("return",e.$store.dispatch("setAccount","login"));case 2:return t.next=4,V.follow.follow(e.$route.params._id);case 4:if(r=t.sent,a=r.data,a.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 8:return e.following=!0,t.abrupt("return",Object(d["a"])({type:"success",message:a.message}));case 10:case"end":return t.stop()}}),t)})))()},unfollow:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user){t.next=2;break}return t.abrupt("return",e.$store.dispatch("setAccount","login"));case 2:return t.next=4,V.follow.unfollow(e.$route.params._id);case 4:if(r=t.sent,a=r.data,a.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 8:return e.following=!1,t.abrupt("return",Object(d["a"])({type:"success",message:a.message}));case 10:case"end":return t.stop()}}),t)})))()},lookPics:function(e){return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(Me["a"])({images:[e],closeable:!0});case 1:case"end":return t.stop()}}),t)})))()}}},st=nt,it=(r("6199"),Object(M["a"])(st,Ne,Ye,!1,null,"7fbf3c44",null)),ot=it.exports,ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame"},[r("Header"),r("div",{staticClass:"user-center-frame row-between-top"},[r("div",{staticClass:"center-tab"},[r("div",{class:["center-tab-item",0===e.active?"active":""],on:{click:function(t){return e.$router.push("/user/0")}}},[r("b",[e._v("账户信息")])]),r("div",{class:["center-tab-item",1===e.active?"active":""],on:{click:function(t){return e.$router.push("/user/1")}}},[r("b",[e._v("地址管理")])]),r("div",{class:["center-tab-item",2===e.active?"active":""],on:{click:function(t){return e.$router.push("/user/2")}}},[r("b",[e._v("我的订单")])]),r("div",{class:["center-tab-item",3===e.active?"active":""],on:{click:function(t){return e.$router.push("/user/3")}}},[r("b",[e._v("关注的店")])]),r("div",{class:["center-tab-item",4===e.active?"active":""],on:{click:function(t){return e.$router.push("/user/4")}}},[r("b",[e._v("我的店铺")])])]),r("div",{staticClass:"center-info"},[0===e.active?r("div",{staticClass:"center-info-item"},[r("div",{staticClass:"row-start-center user-info-item"},[r("div",{staticClass:"info-item-name"},[e._v("账号")]),r("div",{staticClass:"info-item-value"},[e._v(e._s(e.user.account))])]),r("div",{staticClass:"row-start-center user-info-item"},[r("div",{staticClass:"info-item-name"},[e._v("角色")]),r("div",{staticClass:"info-item-value row-start-center"},e._l(e.user.access,(function(t,a){return r("div",{key:a,staticClass:"user-access"},[r("Tag",{attrs:{type:"success",size:"medium"}},[e._v(e._s(e.ACCESS[t]))])],1)})),0)]),r("div",{staticClass:"row-start-center user-info-item"},[r("div",{staticClass:"info-item-name"},[e._v("头像")]),r("div",{staticClass:"info-item-value"},[e.edit?r("VanImage",{attrs:{src:e.editInfo.avatar,round:"",width:"50px",height:"50px"}}):r("VanImage",{attrs:{src:e.user.avatar,round:"",width:"50px",height:"50px"}}),r("div",[r("Upload",{attrs:{type:"avatar",single:"getAvatarUrl"},on:{getUrl:e.getAvatarUrl}},[e.edit?r("Button",{attrs:{type:"info",size:"mini"}},[e._v("更换头像")]):e._e()],1)],1)],1)]),r("div",{staticClass:"row-start-center user-info-item"},[r("div",{staticClass:"info-item-name"},[e._v("昵称")]),e.edit?r("div",{staticClass:"info-item-value"},[r("Field",{staticStyle:{padding:"0",border:"1px solid gray"},attrs:{placeholder:"更新昵称"},model:{value:e.editInfo.name,callback:function(t){e.$set(e.editInfo,"name",t)},expression:"editInfo.name"}})],1):r("div",{staticClass:"info-item-value"},[e._v(e._s(e.user.name))])]),e.edit?r("div",{staticClass:"row-start-center user-info-item"},[r("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.updateUser()}}},[e._v("更改信息")]),r("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",size:"small"},on:{click:function(t){e.edit=!1}}},[e._v("放弃更改")])],1):r("div",{staticClass:"row-start-center user-info-item"},[r("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.editUser()}}},[e._v("修改信息")])],1)]):e._e(),1===e.active?r("div",{staticClass:"center-info-item"},[r("div",{staticClass:"address-list-frame row-start-center"},[e._l(e.infoList,(function(t,a){return r("div",{key:a,staticClass:"address-item"},[r("div",{staticClass:"row-between-center"},[r("div",{staticClass:"info-name"},[r("b",[e._v(e._s(t.name))]),e._v(" "),t.default?r("span",{staticStyle:{"font-size":"14px"}},[e._v("(默认地址)")]):e._e()]),r("div",[r("span",[r("a",{on:{click:function(r){return e.$store.dispatch("setAddress",{show:!0,info:t})}}},[e._v("修改")])]),e._v(" "),t.default?e._e():r("span",[r("a",{on:{click:function(r){return e.setDefault(t._id)}}},[e._v("设为默认")])]),e._v(" "),r("span",[r("a",{on:{click:function(r){return e.delInfo(t._id)}}},[e._v("删除")])])])]),r("div",{staticClass:"info-address"},[e._v(" "+e._s(t.address)+" ")])])})),e.infoList.length<6?r("div",{staticClass:"address-item row-center-center",on:{click:function(t){return e.$store.dispatch("setAddress",{show:!0,info:null})}}},[r("Icon",{attrs:{name:"add-o",size:"50"}})],1):e._e()],2)]):e._e(),2===e.active?r("div",{staticClass:"center-info-item"},[r("UserOrder")],1):e._e(),3===e.active?r("div",{staticClass:"center-info-item"},[r("UserFollow")],1):e._e(),4===e.active?r("div",{staticClass:"center-info-item"},[r("UserShops")],1):e._e(),5===e.active?r("div",{staticClass:"center-info-item"},[r("ShopOrder")],1):e._e()])])],1)},ut=[],dt=(r("a9e3"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload-frame",on:{click:function(t){return e.selectImg()}}},[e._t("default"),r("input",{staticStyle:{display:"none"},attrs:{id:e.single,type:"file",accept:"image/*"},on:{change:function(t){return e.getImg(t)}}})],2)}),pt=[],lt={name:"Upload",props:["type","single"],components:{Notify:d["a"]},methods:{selectImg:function(){if(!this.single)return Object(d["a"])({type:"danger",message:"系统错误，请注意图片标示"});document.getElementById(this.single).click()},getImg:function(e){var t=e.target.files[0];if(e.target.value="",!t)return Object(d["a"])({type:"danger",message:"请选择图片"});if(t.size>5e5)return Object(d["a"])({type:"danger",message:"图片大小不得超过500kb"});var r=this,a=new FileReader;a.readAsDataURL(t),a.onload=function(){r.upload(this.result)}},upload:function(e){var t=this;V.common.uploadImg(e,this.type).then((function(e){var r=e.data;r.success?t.$emit("getUrl",r.data):Object(d["a"])({type:"danger",message:r.message})}))}}},mt=lt,ft=Object(M["a"])(mt,dt,pt,!1,null,null,null),ht=ft.exports,vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{on:{click:function(t){return e.$emit("close")}}},[r("Overlay",{attrs:{show:!0,"z-index":"100"}},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"info-title"},[r("h1",[e._v("编辑商铺")])]),r("div",{staticClass:"input-frame"},[r("RadioGroup",{model:{value:e.shop.type,callback:function(t){e.$set(e.shop,"type",t)},expression:"shop.type"}},[r("div",{staticClass:"row-start-center shop-type"},[r("div",[e._v("店铺类型")]),e._l(e.SERVICETYPE,(function(t,a){return r("span",{key:a,staticStyle:{"margin-left":"20px"}},[r("Radio",{attrs:{name:a+1}},[e._v(e._s(t.name))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"店铺名称",placeholder:"请输入店铺名称"},model:{value:e.shop.name,callback:function(t){e.$set(e.shop,"name",t)},expression:"shop.name"}})],1),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"row-start-center pics-frame"},[r("div",[e._v("店铺LOGO")]),r("div",{staticClass:"logo-frame row-center-center"},[r("Upload",{attrs:{type:"shop",single:"getLogoUrl"},on:{getUrl:e.getLogoUrl}},[r("VanImage",{attrs:{src:e.shop.logo,fit:"cover",width:"100px",height:"100px"}})],1)],1)])]),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"row-start-center pics-frame"},[r("div",[e._v("店铺背景")]),r("div",{staticClass:"back-frame row-center-center"},[r("Upload",{attrs:{type:"shop",single:"getBackUrl"},on:{getUrl:e.getBackUrl}},[r("VanImage",{attrs:{src:e.shop.back,fit:"cover",width:"600px",height:"150px"}})],1)],1)])]),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"row-start-center pics-frame"},[r("div",[e._v("店铺环境")]),r("div",{staticClass:"row-start-center shop-img-frame"},[e._l(e.shop.pics,(function(t,a){return r("div",{key:a,staticClass:"shop-img-item row-center-center"},[r("span",{staticClass:"del-pics",on:{click:function(t){return e.delPics(a)}}},[r("Icon",{attrs:{name:"cross",size:"20",color:"red"}})],1),r("VanImage",{attrs:{src:t,fit:"cover",width:"180px",height:"100px"}})],1)})),r("Upload",{attrs:{type:"shop",single:"getPicskUrl"},on:{getUrl:e.getPicsUrl}},[e.shop.pics.length<6?r("div",{staticClass:"shop-img-item row-center-center"},[r("Icon",{attrs:{name:"add-o",size:"50"}})],1):e._e()])],2)])]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"店铺介绍",placeholder:"请输入店铺介绍",type:"textarea",rows:"3",autosize:"",maxlength:"300","show-word-limit":""},model:{value:e.shop.brief,callback:function(t){e.$set(e.shop,"brief",t)},expression:"shop.brief"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"开始营业",placeholder:"请输入开始营业时间 格式如 08:00"},model:{value:e.shop.stime,callback:function(t){e.$set(e.shop,"stime",t)},expression:"shop.stime"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"结束营业",placeholder:"请输入开始结束时间 格式如 23:30"},model:{value:e.shop.etime,callback:function(t){e.$set(e.shop,"etime",t)},expression:"shop.etime"}})],1),r("div",{staticClass:"input-frame"},[r("CheckboxGroup",{model:{value:e.shop.payment,callback:function(t){e.$set(e.shop,"payment",t)},expression:"shop.payment"}},[r("div",{staticClass:"row-start-center checkbox-type"},[r("div",[e._v("付款方式")]),e._l(e.PAYMENT,(function(t,a){return r("span",{key:a,staticStyle:{"margin-left":"20px"}},[r("Checkbox",{attrs:{name:a,shape:"square"}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("CheckboxGroup",{model:{value:e.shop.delivery,callback:function(t){e.$set(e.shop,"delivery",t)},expression:"shop.delivery"}},[r("div",{staticClass:"row-start-center checkbox-type"},[r("div",[e._v("配送方式")]),e._l(e.DELIVERY,(function(t,a){return r("span",{key:a,staticStyle:{"margin-left":"20px"}},[r("Checkbox",{attrs:{name:a,shape:"square"}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",type:"number",label:"最低起送",placeholder:"请输入最低的购买价格"},model:{value:e.shop.minprice,callback:function(t){e.$set(e.shop,"minprice",t)},expression:"shop.minprice"}})],1),r("div",{staticClass:"input-frame"},[r("RadioGroup",{model:{value:e.shop.currency,callback:function(t){e.$set(e.shop,"currency",t)},expression:"shop.currency"}},[r("div",{staticClass:"row-start-center shop-type"},[r("div",[e._v("默认货币")]),e._l(e.CURRENCY,(function(t,a){return r("span",{key:a,staticStyle:{"margin-left":"20px"}},[r("Radio",{attrs:{name:a}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"所在城市",placeholder:"所在的城市，英文拼写如：makati、passy"},model:{value:e.shop.city,callback:function(t){e.$set(e.shop,"city",t)},expression:"shop.city"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"店铺详址",placeholder:"请输入店铺的详细地址"},model:{value:e.shop.address,callback:function(t){e.$set(e.shop,"address",t)},expression:"shop.address"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"店铺公告",placeholder:"请输入店铺的公告信息"},model:{value:e.shop.notice,callback:function(t){e.$set(e.shop,"notice",t)},expression:"shop.notice"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"店铺优惠",placeholder:"请输入店铺的优惠信息",type:"textarea",rows:"3",autosize:""},model:{value:e.shop.discount,callback:function(t){e.$set(e.shop,"discount",t)},expression:"shop.discount"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"商家手机",placeholder:"请输入联系用的手机号"},model:{value:e.shop.phone,callback:function(t){e.$set(e.shop,"phone",t)},expression:"shop.phone"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"商家微信",placeholder:"请输入联系用的微信号"},model:{value:e.shop.wechat,callback:function(t){e.$set(e.shop,"wechat",t)},expression:"shop.wechat"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"商家飞机",formatter:e.checkTelgram,placeholder:"飞机的 username，不需要带@"},model:{value:e.shop.telegram,callback:function(t){e.$set(e.shop,"telegram",t)},expression:"shop.telegram"}})],1),r("div",{staticClass:"input-frame action-frame"},[r("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){e.shopInfo?e.updateShop():e.addShop()}}},[e._v("提交审核")]),e._v(" "),r("Button",{attrs:{type:"default",size:"small"},on:{click:function(t){return e.$emit("close")}}},[e._v("取消提交")])],1)])])])],1)},gt=[],wt=(r("a909"),r("3acc")),bt=(r("3c32"),r("417e")),_t={name:"EditShop",components:{VanImage:l["a"],Overlay:v["a"],Field:h["a"],Button:m["a"],Notify:d["a"],Radio:He["a"],RadioGroup:Je["a"],Checkbox:bt["a"],CheckboxGroup:wt["a"],Icon:Ke["a"],Upload:ht},props:["shopInfo"],data:function(){return{SERVICETYPE:ke,PAYMENT:Re,DELIVERY:Oe,CURRENCY:je,shop:{_id:"",type:1,name:"",logo:"",back:"/img/shop/shopback.png",pics:[],brief:"",stime:"",etime:"",payment:[],delivery:[],minprice:"",currency:"",city:"",address:"",notice:"",discount:"",phone:"",wechat:"",telegram:""}}},mounted:function(){if(this.shopInfo)for(var e in this.shop)this.shop[e]=this.shopInfo[e]},methods:{getLogoUrl:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.logo=e;case 1:case"end":return r.stop()}}),r)})))()},getBackUrl:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.back=e;case 1:case"end":return r.stop()}}),r)})))()},getPicsUrl:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.pics.push(e);case 1:case"end":return r.stop()}}),r)})))()},delPics:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.pics.splice(e,1);case 1:case"end":return r.stop()}}),r)})))()},addShop:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.shop.name.trim()&&e.shop.logo.trim()&&e.shop.stime.trim()&&e.shop.etime.trim()&&e.shop.payment.length&&e.shop.delivery.length&&e.shop.city.trim()&&e.shop.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"基本信息不完整"}));case 2:if(e.shop.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"Telegram不得为空"}));case 4:return e.shop.minprice=e.shop.minprice?e.shop.minprice:0,t.prev=5,t.next=8,V.shop.addShop(e.shop);case 8:if(r=t.sent,a=r.data,a.success){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 12:return e.$emit("confirm"),t.abrupt("return",Object(d["a"])({type:"success",message:a.message}));case 16:if(t.prev=16,t.t0=t["catch"](5),n=t.t0.response,!n){t.next=21;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:n.data.message}));case 21:case"end":return t.stop()}}),t,null,[[5,16]])})))()},updateShop:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.shop._id.trim()&&e.shop.name.trim()&&e.shop.logo.trim()&&e.shop.stime.trim()&&e.shop.etime.trim()&&e.shop.payment.length&&e.shop.delivery.length&&e.shop.city.trim()&&e.shop.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"基本信息不完整"}));case 2:if(e.shop.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"Telegram不得为空"}));case 4:return e.shop.minprice=e.shop.minprice?e.shop.minprice:0,t.prev=5,t.next=8,V.shop.updateShop(e.shop);case 8:if(r=t.sent,a=r.data,a.success){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 12:return e.$emit("confirm"),t.abrupt("return",Object(d["a"])({type:"success",message:a.message}));case 16:if(t.prev=16,t.t0=t["catch"](5),n=t.t0.response,!n){t.next=21;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:n.data.message}));case 21:case"end":return t.stop()}}),t,null,[[5,16]])})))()},checkTelgram:function(e){return e.replace(/[^\w_]/g,"")}}},xt=_t,yt=(r("f294"),Object(M["a"])(xt,vt,gt,!1,null,"0f26dff8",null)),Ct=yt.exports,kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{on:{click:function(t){return e.$emit("close")}}},[r("Overlay",{attrs:{show:!0,"z-index":"100"}},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"info-title"},[r("h1",[e._v("编辑商品")])]),r("div",{staticClass:"class-frame"},[r("div",{staticClass:"frame-title"},[r("b",[e._v("商品类别")])]),r("div",{staticClass:"class-item-frame row-start-center"},e._l(e.classList,(function(t,a){return r("div",{key:a,staticClass:"class-item"},[r("div",{staticClass:"class-input name"},[r("Field",{attrs:{label:"分类名称"},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"item.name"}})],1),r("div",{staticClass:"class-input sort"},[r("Field",{attrs:{label:"分类排序",type:"number"},model:{value:t.sort,callback:function(r){e.$set(t,"sort",r)},expression:"item.sort"}})],1),r("Button",{staticClass:"button",attrs:{type:"primary",size:"small"},on:{click:function(r){return e.updateClass(t.shopid,t._id,t.name,t.sort)}}},[e._v("更新分类")]),r("Button",{staticClass:"button",attrs:{type:"danger",size:"small"},on:{click:function(r){return e.delClass(t._id)}}},[e._v("删除分类")])],1)})),0),r("div",{staticClass:"class-item-edit row-start-center"},[r("div",{staticClass:"class-input name"},[r("Field",{attrs:{label:"分类名称",placeholder:"请输入商品分类名称，如推荐、荤类，素类等"},model:{value:e.classEdit.name,callback:function(t){e.$set(e.classEdit,"name",t)},expression:"classEdit.name"}})],1),r("div",{staticClass:"class-input sort"},[r("Field",{attrs:{label:"分类排序",type:"number",placeholder:"请输入分类名称排序，数值越大越靠前"},model:{value:e.classEdit.sort,callback:function(t){e.$set(e.classEdit,"sort",t)},expression:"classEdit.sort"}})],1),r("Button",{attrs:{type:"info"},on:{click:function(t){return e.addClass()}}},[e._v("新建分类")])],1)]),r("div",{staticClass:"goods-frame"},[r("div",{staticClass:"row-start-center"},[r("b",{staticClass:"frame-title"},[e._v("商品信息")]),r("Button",{staticClass:"add-goods",attrs:{type:"info",size:"mini"},on:{click:function(t){e.initGoods(),e.goodsEditting=!0}}},[e._v("点此新增商品")])],1),r("div",{staticClass:"goods-item-frame"},[r("div",{staticClass:"goods-item row-start-center"},[r("div",{staticClass:"item-frame name"},[e._v("名称")]),r("div",{staticClass:"item-frame code"},[e._v("代码")]),r("div",{staticClass:"item-frame pics"},[e._v("图片")]),r("div",{staticClass:"item-frame price"},[e._v("价格")]),r("div",{staticClass:"item-frame count"},[e._v("数量")]),r("div",{staticClass:"item-frame unit"},[e._v("单位")]),r("div",{staticClass:"item-frame class"},[e._v("分类")]),r("div",{staticClass:"item-frame tags"},[e._v("标签")]),r("div",{staticClass:"item-frame stop"},[e._v("缺货")]),r("div",{staticClass:"item-frame sort"},[e._v("排序")]),r("div",{staticClass:"item-frame action"},[e._v("操作")])]),e._l(e.goodsList,(function(t,a){return r("div",{key:a,staticClass:"goods-item row-start-center"},[r("div",{staticClass:"item-frame name"},[e._v(e._s(t.name))]),r("div",{staticClass:"item-frame code"},[e._v(e._s(t.code))]),r("div",{staticClass:"item-frame pics",staticStyle:{color:"#1989fa"}},[r("a",{on:{click:function(r){return e.showImage(t.pics)}}},[e._v("查看")])]),r("div",{staticClass:"item-frame price"},[e._v(e._s(t.price))]),r("div",{staticClass:"item-frame count"},[e._v(e._s(t.count))]),r("div",{staticClass:"item-frame unit"},[e._v(e._s(e.UNIT[t.unit]))]),r("div",{staticClass:"item-frame class"},[e._v(" ｜"),e._l(t.classid,(function(t,a){return r("span",[e._v(e._s(e.classobj[t])+"｜")])}))],2),r("div",{staticClass:"item-frame tags"},[e._v(e._s(t.tags.join("、")))]),r("div",{staticClass:"item-frame stop",style:{color:t.stop?"red":""}},[e._v(e._s(t.stop?"是":"否"))]),r("div",{staticClass:"item-frame sort"},[e._v(e._s(t.sort))]),r("div",{staticClass:"item-frame action row-start-center"},[r("Button",{staticClass:"action-item",attrs:{type:"primary",size:"mini"},on:{click:function(r){e.goodsEdit=JSON.parse(JSON.stringify(t)),e.goodsEditting=!0}}},[e._v("编辑")]),r("Button",{staticClass:"action-item",attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.delGoods(t._id)}}},[e._v("删除")]),t.stop?r("Button",{staticClass:"action-item",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.stopGoods(t._id,!t.stop,a)}}},[e._v("已备货")]):r("Button",{staticClass:"action-item",attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.stopGoods(t._id,!t.stop,a)}}},[e._v("缺货")])],1)])})),r("Pagination",{attrs:{"items-per-page":e.goodsPage.rows,"total-items":e.goodsPage.total},on:{change:function(t){return e.getGoods()}},model:{value:e.goodsPage.page,callback:function(t){e.$set(e.goodsPage,"page",t)},expression:"goodsPage.page"}})],2)])])])]),r("Overlay",{attrs:{show:e.goodsEditting,"z-index":"150"},on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.goodsEditting=!1}}},[r("div",{staticClass:"goods-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("h3",[e._v("编辑商品信息")]),r("div",{staticClass:"goods-info-edit"},[r("div",{staticClass:"input-frame"},[r("div",{staticClass:"img-frame row-start-center"},[r("div",[e._v("商品图片：")]),r("div",{staticClass:"row-center-center"},[r("Upload",{attrs:{type:"goods",single:"addGoodsPics"},on:{getUrl:e.addGoodsPics}},[r("VanImage",{attrs:{src:e.goodsEdit.pics,fit:"cover",width:"150",height:"110"}})],1)],1)])]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"填写商品名称，如小炒肉、可乐"},model:{value:e.goodsEdit.name,callback:function(t){e.$set(e.goodsEdit,"name",t)},expression:"goodsEdit.name"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"填写商品代码，如A13、C20"},model:{value:e.goodsEdit.code,callback:function(t){e.$set(e.goodsEdit,"code",t)},expression:"goodsEdit.code"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{type:"number",placeholder:"填写商品价格，货币为商家默认货币"},model:{value:e.goodsEdit.price,callback:function(t){e.$set(e.goodsEdit,"price",t)},expression:"goodsEdit.price"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{type:"number",placeholder:"填写商品数量，价格单位数量"},model:{value:e.goodsEdit.count,callback:function(t){e.$set(e.goodsEdit,"count",t)},expression:"goodsEdit.count"}})],1),r("div",{staticClass:"input-frame"},[r("RadioGroup",{model:{value:e.goodsEdit.unit,callback:function(t){e.$set(e.goodsEdit,"unit",t)},expression:"goodsEdit.unit"}},[r("div",{staticClass:"row-start-top radio-type"},[r("p",[e._v("物品单位：")]),e._l(e.UNIT,(function(t,a){return r("span",{key:a,staticStyle:{"margin-right":"10px","margin-bottom":"20px"}},[r("Radio",{attrs:{name:a}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("CheckboxGroup",{model:{value:e.goodsEdit.classid,callback:function(t){e.$set(e.goodsEdit,"classid",t)},expression:"goodsEdit.classid"}},[r("div",{staticClass:"row-start-top checkbox-type"},[r("div",[e._v("商品分类：")]),e._l(e.classList,(function(t,a){return r("span",{key:a,staticStyle:{"margin-right":"10px","margin-bottom":"20px"}},[r("Checkbox",{attrs:{name:t._id,shape:"square"}},[e._v(e._s(t.name))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"row-start-center"},[r("div",{staticStyle:{width:"40%"}},[r("Field",{attrs:{placeholder:"商品标签，如新品、推荐、火爆等"},model:{value:e.goodsTag,callback:function(t){e.goodsTag=t},expression:"goodsTag"}})],1),r("Button",{attrs:{type:"info",size:"mini"},on:{click:function(t){return e.addGoodsTag()}}},[e._v("添加标签")]),r("div",{staticClass:"tags-frame row-start-center"},e._l(e.goodsEdit.tags,(function(t,a){return r("Tag",{key:a,staticClass:"goods-tag",attrs:{closeable:"",size:"medium",type:"success"},on:{close:function(t){return e.delGoodsTag(a)}}},[e._v(" "+e._s(t)+" ")])})),1)],1)]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{type:"number",placeholder:"填写商品排序，数值越高越靠前，默认为 0"},model:{value:e.goodsEdit.sort,callback:function(t){e.$set(e.goodsEdit,"sort",t)},expression:"goodsEdit.sort"}})],1),r("div",{staticClass:"goods-action"},[e.goodsEdit._id?r("Button",{attrs:{type:"info"},on:{click:function(t){return e.updateGoods()}}},[e._v("更新商品")]):r("Button",{attrs:{type:"info"},on:{click:function(t){return e.addGoods()}}},[e._v("添加商品")])],1)])])])])],1)},Rt=[],Ot=r("ade3"),jt=(r("6a39"),r("f240")),Et={name:"EditGoods",components:(a={VanImage:l["a"],Overlay:v["a"],Field:h["a"],Button:m["a"],Notify:d["a"],Radio:He["a"],RadioGroup:Je["a"],Checkbox:bt["a"],CheckboxGroup:wt["a"],Icon:Ke["a"],Upload:ht},Object(Ot["a"])(a,"RadioGroup",Je["a"]),Object(Ot["a"])(a,"Radio",He["a"]),Object(Ot["a"])(a,"Tag",Ce["a"]),Object(Ot["a"])(a,"Pagination",jt["a"]),a),props:["shopId","currency"],data:function(){return{UNIT:Ee,classList:[],goodsList:[],classEdit:{name:"",sort:""},goodsEdit:{classid:[],code:"",name:"",pics:"",price:"",count:"",unit:0,tags:[],sort:""},goodsPage:{page:1,rows:50,total:0},goodsTag:"",goodsEditting:!1}},computed:{classobj:function(){for(var e={},t=this.classList.length-1;t>=0;t--)e[this.classList[t]._id]=this.classList[t].name;return e}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getClass();case 2:return t.next=4,e.getGoods();case 4:case"end":return t.stop()}}),t)})))()},methods:{getClass:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.shop.getClass(e.shopId);case 2:if(r=t.sent,a=r.data,a.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:e.classList=a.data;case 7:case"end":return t.stop()}}),t)})))()},addClass:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.classEdit.name.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"分类名称不得为空"}));case 2:return r=e.classEdit.name.trim(),a=e.classEdit.sort?e.classEdit.sort:0,t.next=6,V.shop.addClass(e.shopId,r,a);case 6:if(n=t.sent,s=n.data,s.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 10:return t.next=12,e.getClass();case 12:e.classEdit.name=e.classEdit.sort="",Object(d["a"])({type:"success",message:"添加成功"});case 14:case"end":return t.stop()}}),t)})))()},delClass:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:De["a"].confirm({title:"删除分类",message:"确认删除商品分类么？"}).then(Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.shop.delClass(t.shopId,e);case 2:if(a=r.sent,n=a.data,n.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:return r.next=8,t.getClass();case 8:Object(d["a"])({type:"success",message:"删除成功"});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},updateClass:function(e,t,r,a){var n=this;return Object(p["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:De["a"].confirm({title:"更新分类信息",message:"确认更新分类信息么？"}).then(Object(p["a"])(regeneratorRuntime.mark((function s(){var i,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r.trim()){s.next=2;break}return s.abrupt("return",Object(d["a"])({type:"danger",message:"分类名称不得为空"}));case 2:return s.next=4,V.shop.updateClass(e,t,r,a);case 4:if(i=s.sent,o=i.data,o.success){s.next=8;break}return s.abrupt("return",Object(d["a"])({type:"danger",message:o.message}));case 8:return s.next=10,n.getClass();case 10:Object(d["a"])({type:"success",message:"更新成功"});case 11:case"end":return s.stop()}}),s)})))).catch((function(){}));case 1:case"end":return s.stop()}}),s)})))()},addGoodsPics:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.goodsEdit.pics=e;case 1:case"end":return r.stop()}}),r)})))()},addGoodsTag:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.goodsTag.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品标签不得为空"}));case 2:if(!(e.goodsTag.length>5)){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"标签不得大于5个字"}));case 4:if(!(e.goodsEdit.tags.length>=3)){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品标签不得超过三个"}));case 6:e.goodsEdit.tags.push(e.goodsTag),e.goodsTag="";case 8:case"end":return t.stop()}}),t)})))()},delGoodsTag:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.goodsEdit.tags.splice(e,1);case 1:case"end":return r.stop()}}),r)})))()},initGoods:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.goodsEdit={classid:[],code:"",name:"",pics:"",price:"",count:"",unit:0,tags:[],sort:""};case 1:case"end":return t.stop()}}),t)})))()},getGoods:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.shop.getGoods(e.shopId,e.goodsPage.page,e.goodsPage.rows);case 2:if(r=t.sent,a=r.data,a.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:e.goodsList=a.data.items,e.goodsPage.total=a.data.total;case 8:case"end":return t.stop()}}),t)})))()},addGoods:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.goodsEdit.name.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品名称不得为空"}));case 2:if(e.goodsEdit.code.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品代码不得为空"}));case 4:if(e.goodsEdit.pics.trim()){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品图片不得为空"}));case 6:if(e.goodsEdit.classid.length){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品分类至少一个"}));case 8:if(e.goodsEdit.price.trim()){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品价格不得为空"}));case 10:if(e.goodsEdit.count.trim()){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价数量不得为空"}));case 12:if(String(e.goodsEdit.unit).trim()){t.next=14;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价单位不得为空"}));case 14:return e.goodsEdit.sort=e.goodsEdit.sort.trim()?e.goodsEdit.sort:0,r=Object(Ze["a"])({shopid:e.shopId},e.goodsEdit),t.next=18,V.shop.addGoods(r);case 18:if(a=t.sent,n=a.data,n.success){t.next=22;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 22:return t.next=24,e.getGoods();case 24:e.goodsEditting=!1;case 25:case"end":return t.stop()}}),t)})))()},delGoods:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:De["a"].confirm({title:"删除商品",message:"确认删除商品么？"}).then(Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.shop.delGoods(t.shopId,e);case 2:if(a=r.sent,n=a.data,n.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:return r.next=8,t.getGoods();case 8:Object(d["a"])({type:"success",message:"删除成功"});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},updateGoods:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.goodsEdit.name.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品名称不得为空"}));case 2:if(e.goodsEdit.code.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品代码不得为空"}));case 4:if(e.goodsEdit.pics.trim()){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品图片不得为空"}));case 6:if(e.goodsEdit.classid.length){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品分类至少一个"}));case 8:if(e.goodsEdit.price.trim()){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品价格不得为空"}));case 10:if(e.goodsEdit.count.trim()){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价数量不得为空"}));case 12:if(String(e.goodsEdit.unit).trim()){t.next=14;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价单位不得为空"}));case 14:return e.goodsEdit.sort=e.goodsEdit.sort.trim()?e.goodsEdit.sort:0,t.next=17,V.shop.updateGoods(e.goodsEdit);case 17:if(r=t.sent,a=r.data,a.success){t.next=21;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 21:return t.next=23,e.getGoods();case 23:e.goodsEditting=!1;case 24:case"end":return t.stop()}}),t)})))()},stopGoods:function(e,t,r){var a=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,V.shop.stopGoods(a.shopId,e,t);case 2:if(s=n.sent,i=s.data,i.success){n.next=6;break}return n.abrupt("return",Object(d["a"])({type:"danger",message:i.message}));case 6:a.goodsList[r].stop=t;case 7:case"end":return n.stop()}}),n)})))()},showImage:function(e){return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(Me["a"])({images:[e],closeable:!0});case 1:case"end":return t.stop()}}),t)})))()}}},It=Et,$t=(r("4b41"),Object(M["a"])(It,kt,Rt,!1,null,"aef4b188",null)),St=$t.exports,Lt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-order-frame"},[r("h1",[e._v("订单列表")]),r("br"),r("div",[r("CheckboxGroup",{on:{change:function(t){return e.getUserOrder()}},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},[r("div",{staticClass:"row-start-center"},e._l(e.ORDERSTATUS,(function(t,a){return r("span",{key:a,staticStyle:{"margin-right":"10px"}},[r("Checkbox",{attrs:{name:a,shape:"square"}},[e._v(e._s(t))])],1)})),0)])],1),e.items.length?r("div",{staticClass:"order-list-frame"},[e._m(0),e._l(e.items,(function(t,a){return r("div",{key:a,staticClass:"order-item row-start-center"},[r("div",{staticClass:"cell name omit"},[r("router-link",{attrs:{to:"/shop/"+t.shop._id}},[e._v(e._s(t.shop.name))])],1),r("div",{staticClass:"cell amount"},[e._v(e._s(t.total)+" "+e._s(e.CURRENCY[t.currency]))]),r("div",{staticClass:"cell payment"},[e._v(e._s(e.PAYMENT[t.payment]))]),r("div",{staticClass:"cell delivery"},[e._v(e._s(e.DELIVERY[t.delivery]))]),r("div",{staticClass:"cell time"},[e._v(e._s(e._f("formatTime")(t.created_at)))]),r("div",{staticClass:"cell status warning"},[e._v(e._s(e.ORDERSTATUS[t.status])),t.comment?r("b",[e._v("(已评)")]):e._e()]),r("div",{staticClass:"cell action row-start-center"},[r("Button",{staticClass:"action-button",attrs:{type:"info",size:"mini"},on:{click:function(r){e.orderInfo=t,e.showInfo=!0}}},[e._v("查看")]),-1!==[0,1].indexOf(t.status)?r("Button",{staticClass:"action-button",attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.cancelOrderUser(t)}}},[e._v("撤单")]):e._e(),3===t.status?r("Button",{staticClass:"action-button",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.finishOrder(t._id)}}},[e._v("订单完成")]):e._e(),4!==t.status||t.comment?e._e():r("Button",{staticClass:"action-button",attrs:{type:"primary",size:"mini"},on:{click:function(r){e.review.orderid=t._id,e.showReview=!0}}},[e._v("评价")])],1)])})),r("Pagination",{attrs:{"items-per-page":e.params.rows,"total-items":e.total},on:{change:function(t){return e.getUserOrder()}},model:{value:e.params.page,callback:function(t){e.$set(e.params,"page",t)},expression:"params.page"}})],2):r("div",{staticClass:"order-list-frame"},[e._v(" 暂无订单 ")]),r("Overlay",{attrs:{show:e.showInfo,"z-index":"150"},on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.showInfo=!1}}},[r("div",{staticClass:"order-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-info-item"},e._l(e.orderInfo.items,(function(t,a){return r("div",{key:a,staticClass:"order-item row-between-top"},[r("div",{staticClass:"row-start-top"},[r("div",{staticClass:"order-item-pics"},[r("VanImage",{attrs:{src:t.info.pics,fit:"cover",width:"120px",height:"80px"}})],1),r("div",{staticClass:"order-item-name"},[e._v(" "+e._s(t.info.code)+" "+e._s(t.info.name)+" * "+e._s(t.count)+" ")])]),r("div",[e._v(" "+e._s(t.amount)+" "+e._s(e.CURRENCY[e.orderInfo.currency])+" ")])])})),0),r("div",{staticClass:"order-info-item"},[r("p",[e._v("总计："),r("b",[e._v(e._s(e.orderInfo.total))]),e._v(" "+e._s(e.CURRENCY[e.orderInfo.currency]))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("付款方式："),r("b",[e._v(e._s(e.PAYMENT[e.orderInfo.payment]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送方式："),r("b",[e._v(e._s(e.DELIVERY[e.orderInfo.delivery]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送信息")]),r("p",{staticStyle:{"white-space":"pre-line","margin-top":"10px"}},[e._v(" "+e._s(e.orderInfo.uinfo)+" ")])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单备注："+e._s(e.orderInfo.memo))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("下单时间："+e._s(e._f("formatTime")(e.orderInfo.created_at)))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单状态："),r("b",{staticStyle:{color:"red"}},[e._v(e._s(e.ORDERSTATUS[e.orderInfo.status]))])])])])])]),r("Overlay",{attrs:{show:e.showReview,"z-index":"150"},on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.showReview=!1}}},[r("div",{staticClass:"review-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-rate"},[r("h3",[e._v("订单评分")]),r("div",{staticClass:"review-item row-start-center"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"30",color:"#ffd21e","void-color":"#eee"},model:{value:e.review.rate,callback:function(t){e.$set(e.review,"rate",t)},expression:"review.rate"}}),r("div",{staticClass:"rate-count"},[e._v(e._s(e.review.rate)+" 分")])],1)]),r("div",{staticClass:"order-text"},[r("h3",[e._v("订单评价")]),r("div",{staticClass:"review-item"},[r("Field",{attrs:{rows:"3",autosize:"",type:"textarea",placeholder:"请输入评论内容",maxlength:"150","show-word-limit":""},model:{value:e.review.text,callback:function(t){e.$set(e.review,"text",t)},expression:"review.text"}})],1)]),r("div",{staticClass:"order-pics"},[r("h3",[e._v("图片分享")]),r("div",{staticClass:"review-item row-start-center"},[e._l(e.review.pics,(function(t,a){return r("div",{key:a,staticClass:"pics-frame"},[r("VanImage",{attrs:{src:t,fit:"cover",width:"100%",height:"100%"}}),r("div",{staticClass:"del-pics",on:{click:function(t){return e.delPics(a)}}},[r("Icon",{attrs:{name:"clear",color:"red",size:"20"}})],1)],1)})),e.review.pics.length<3?r("div",{staticClass:"pics-frame row-center-center"},[r("Upload",{attrs:{type:"review",single:"addGoodsPics"},on:{getUrl:e.addPics}},[r("Icon",{attrs:{name:"add-o",size:"80px"}})],1)],1):e._e()],2)]),r("div",{staticClass:"review-action row-start-center"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmReview()}}},[e._v("提交评价")]),r("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"warning"},on:{click:function(t){return e.resetReview()}}},[e._v("取消提交")])],1)])])])],1)},Ut=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-item order-item-title row-start-center"},[r("div",{staticClass:"cell name"},[e._v("商家名称")]),r("div",{staticClass:"cell amount"},[e._v("消费费用")]),r("div",{staticClass:"cell payment"},[e._v("付款方式")]),r("div",{staticClass:"cell delivery"},[e._v("配送方式")]),r("div",{staticClass:"cell time"},[e._v("下单时间")]),r("div",{staticClass:"cell status"},[e._v("订单状态")]),r("div",{staticClass:"cell action"},[e._v("操作")])])}],At=["商家确认中","商家已接单","已送出","已送到","订单完成","用户取消订单","商家取消订单"],Pt={name:"UserOrders",components:{Button:m["a"],VanImage:l["a"],Checkbox:bt["a"],CheckboxGroup:wt["a"],Overlay:v["a"],Pagination:jt["a"],Rate:fe["a"],Field:h["a"],Icon:Ke["a"],Upload:ht},filters:{formatTime:function(e){return R(e)}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getUserOrder();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{PAYMENT:Re,DELIVERY:Oe,CURRENCY:je,ORDERSTATUS:At,params:{status:[],page:1,rows:50},review:{orderid:"",rate:5,text:"",pics:[]},items:[],total:0,orderInfo:"",showInfo:!1,showReview:!1}},methods:{getUserOrder:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.order.getUserOrder(e.params);case 2:if(r=t.sent,a=r.data,a.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:n=a.data,s=n.items,i=n.total,e.items=s,e.total=i;case 9:case"end":return t.stop()}}),t)})))()},cancelOrderUser:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1!==e.status){r.next=3;break}return De["a"].alert({title:"通知商家取消订单",message:"因为商家已经确认了该订单，所以请通知商家来操作取消订单",confirmButtonText:"通知商家",theme:"round-button",closeOnClickOverlay:!0}).then((function(){window.open("https://t.me/".concat(e.shop.telegram))})),r.abrupt("return");case 3:De["a"].confirm({title:"操作取消订单",message:"您确认要取消该订单吗？"}).then(Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.cancelOrderUser(e._id);case 2:if(a=r.sent,n=a.data,n.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:return r.next=8,t.getUserOrder();case 8:return r.abrupt("return",Object(d["a"])({type:"success",message:n.message}));case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 4:case"end":return r.stop()}}),r)})))()},finishOrder:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:De["a"].confirm({title:"订单完成",message:"确定已经收到物品并且完成该订单吗？"}).then(Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.finishOrder(e);case 2:if(a=r.sent,n=a.data,n.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:return r.next=8,t.getUserOrder();case 8:return r.abrupt("return",Object(d["a"])({type:"success",message:n.message}));case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},addPics:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.review.pics.push(e);case 1:case"end":return r.stop()}}),r)})))()},delPics:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.review.pics.splice(e,1);case 1:case"end":return r.stop()}}),r)})))()},confirmReview:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.review),e.review.orderid.trim()){t.next=3;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"评论订单缺失"}));case 3:if(e.review.text.trim()){t.next=5;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请填写评论内容"}));case 5:return t.next=7,V.review.newReview(e.review);case 7:if(r=t.sent,a=r.data,a.success){t.next=11;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 11:return e.resetReview(),e.getUserOrder(),t.abrupt("return",Object(d["a"])({type:"success",message:a.message}));case 14:case"end":return t.stop()}}),t)})))()},resetReview:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.review={orderid:"",rate:5,text:"",pics:[]},e.showReview=!1;case 2:case"end":return t.stop()}}),t)})))()}}},Tt=Pt,qt=(r("b5d6"),Object(M["a"])(Tt,Lt,Ut,!1,null,"231007e0",null)),zt=qt.exports,Ft=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-order-frame"},[e._m(0),r("br"),r("div",[r("CheckboxGroup",{on:{change:function(t){return e.getShopOrder()}},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},[r("div",{staticClass:"row-start-center"},e._l(e.ORDERSTATUS,(function(t,a){return r("span",{key:a,staticStyle:{"margin-right":"10px"}},[r("Checkbox",{attrs:{name:a,shape:"square"}},[e._v(e._s(t))])],1)})),0)])],1),e.items.length?r("div",{staticClass:"order-list-frame"},[e._m(1),e._l(e.items,(function(t,a){return r("div",{key:a,staticClass:"order-item row-start-center"},[r("div",{staticClass:"cell name omit"},[r("router-link",{attrs:{to:"/shop/"+t.shop._id}},[e._v(e._s(t.shop.name))])],1),r("div",{staticClass:"cell amount"},[e._v(e._s(t.total)+" "+e._s(e.CURRENCY[t.currency]))]),r("div",{staticClass:"cell payment"},[e._v(e._s(e.PAYMENT[t.payment]))]),r("div",{staticClass:"cell delivery"},[e._v(e._s(e.DELIVERY[t.delivery]))]),r("div",{staticClass:"cell time"},[e._v(e._s(e._f("formatTime")(t.created_at)))]),r("div",{staticClass:"cell status warning"},[e._v(e._s(e.ORDERSTATUS[t.status]))]),r("div",{staticClass:"cell action row-start-center"},[r("Button",{staticClass:"action-button",attrs:{type:"info",size:"mini"},on:{click:function(r){e.orderInfo=t,e.showInfo=!0}}},[e._v("查看")]),0===t.status?r("Button",{staticClass:"action-button",attrs:{type:"primary",size:"mini"},on:{click:function(r){e.confirm._id=t._id,e.showConfirm=!0}}},[e._v("确认接单")]):e._e(),1===t.status?r("Button",{staticClass:"action-button",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.delivery(t._id)}}},[e._v("已送出")]):e._e(),2===t.status?r("Button",{staticClass:"action-button",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.arrived(t._id)}}},[e._v("已送到")]):e._e(),-1!==[0,1].indexOf(t.status)?r("Button",{staticClass:"action-button",attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.cancelOrderShop(t._id)}}},[e._v("取消订单")]):e._e()],1)])})),r("Pagination",{attrs:{"items-per-page":e.params.rows,"total-items":e.total},on:{change:function(t){return e.getShopOrder()}},model:{value:e.params.page,callback:function(t){e.$set(e.params,"page",t)},expression:"params.page"}})],2):r("div",{staticClass:"order-list-frame"},[e._v(" 暂无订单 ")]),r("Overlay",{attrs:{show:e.showInfo,"z-index":"150"},on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.showInfo=!1}}},[r("div",{staticClass:"order-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-info-item"},e._l(e.orderInfo.items,(function(t,a){return r("div",{key:a,staticClass:"order-item row-between-top"},[r("div",{staticClass:"row-start-top"},[r("div",{staticClass:"order-item-pics"},[r("VanImage",{attrs:{src:t.info.pics,fit:"cover",width:"120px",height:"80px"}})],1),r("div",{staticClass:"order-item-name"},[e._v(" "+e._s(t.info.code)+" "+e._s(t.info.name)+" * "+e._s(t.count)+" ")])]),r("div",[e._v(" "+e._s(t.amount)+" "+e._s(e.CURRENCY[e.orderInfo.currency])+" ")])])})),0),r("div",{staticClass:"order-info-item"},[r("p",[e._v("总计："),r("b",[e._v(e._s(e.orderInfo.total))]),e._v(" "+e._s(e.CURRENCY[e.orderInfo.currency]))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("付款方式："),r("b",[e._v(e._s(e.PAYMENT[e.orderInfo.payment]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送方式："),r("b",[e._v(e._s(e.DELIVERY[e.orderInfo.delivery]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送信息")]),r("p",{staticStyle:{"white-space":"pre-line","margin-top":"10px"}},[e._v(" "+e._s(e.orderInfo.uinfo)+" ")])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单备注："+e._s(e.orderInfo.memo))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("下单时间："+e._s(e._f("formatTime")(e.orderInfo.created_at)))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单状态："),r("b",{staticStyle:{color:"red"}},[e._v(e._s(e.ORDERSTATUS[e.orderInfo.status]))])])])])])]),r("Dialog",{attrs:{title:"确认接受该订单吗？","show-cancel-button":""},on:{confirm:function(t){return e.confirmOrder()}},model:{value:e.showConfirm,callback:function(t){e.showConfirm=t},expression:"showConfirm"}},[r("div",{staticStyle:{padding:"20px"}},[r("RadioGroup",{model:{value:e.confirm.delivery,callback:function(t){e.$set(e.confirm,"delivery",t)},expression:"confirm.delivery"}},[r("div",[e._v("请选择配送方式：")]),e._l(e.DELIVERY,(function(t,a){return r("div",{key:a,staticStyle:{"margin-top":"20px"}},[r("Radio",{attrs:{name:a}},[e._v(e._s(t))])],1)}))],2)],1)])],1)},Gt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("商铺订单列表")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-item order-item-title row-start-center"},[r("div",{staticClass:"cell amount"},[e._v("商家名称")]),r("div",{staticClass:"cell amount"},[e._v("消费费用")]),r("div",{staticClass:"cell payment"},[e._v("付款方式")]),r("div",{staticClass:"cell delivery"},[e._v("配送方式")]),r("div",{staticClass:"cell time"},[e._v("下单时间")]),r("div",{staticClass:"cell status"},[e._v("订单状态")]),r("div",{staticClass:"cell action"},[e._v("操作")])])}],Bt={name:"ShopOrders",components:{Button:m["a"],VanImage:l["a"],Radio:He["a"],RadioGroup:Je["a"],Checkbox:bt["a"],CheckboxGroup:wt["a"],Overlay:v["a"],Pagination:jt["a"],Dialog:De["a"].Component},filters:{formatTime:function(e){return R(e)}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.params.shop=e.$route.query._id,"1"===e.$route.query.unfinished&&(e.params.status=[0,1,2]),e.$store.dispatch("setLoading",!0),t.next=5,e.getShopOrder();case 5:e.$store.dispatch("setLoading",!1);case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{PAYMENT:Re,DELIVERY:Oe,CURRENCY:je,ORDERSTATUS:At,params:{status:[],shop:"",page:1,rows:50},confirm:{_id:"",delivery:0},items:[],total:0,orderInfo:"",showInfo:!1,showConfirm:!1}},methods:{getShopOrder:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.order.getShopOrder(e.params);case 2:if(r=t.sent,a=r.data,a.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:n=a.data,s=n.items,i=n.total,e.items=s,e.total=i;case 9:case"end":return t.stop()}}),t)})))()},cancelOrderShop:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:De["a"].confirm({title:"操作取消订单",message:"您确认要取消该订单吗？请通知客户您的取消操作，避免误会！"}).then(Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.cancelOrderShop(e);case 2:if(a=r.sent,n=a.data,n.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:return r.next=8,t.getShopOrder();case 8:Object(d["a"])({type:"success",message:n.message});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},confirmOrder:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.order.confirmOrder(e.confirm);case 2:if(r=t.sent,a=r.data,a.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return t.next=8,e.getShopOrder();case 8:Object(d["a"])({type:"success",message:a.message});case 9:case"end":return t.stop()}}),t)})))()},delivery:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:De["a"].confirm({title:"商品已配送",message:"商品已经确认送出了么？"}).then(Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.delivery(e);case 2:if(a=r.sent,n=a.data,n.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:return r.next=8,t.getShopOrder();case 8:Object(d["a"])({type:"success",message:n.message});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},arrived:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:De["a"].confirm({title:"商品已送到",message:"商品已经确认送到了么？"}).then(Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.arrived(e);case 2:if(a=r.sent,n=a.data,n.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:return r.next=8,t.getShopOrder();case 8:Object(d["a"])({type:"success",message:n.message});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()}}},Vt=Bt,Nt=(r("daa9"),Object(M["a"])(Vt,Ft,Gt,!1,null,"5983d9f9",null)),Yt=Nt.exports,Mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-shops-frame"},[r("div",{staticClass:"shop-list-frame row-start-center"},[e._l(e.shopList,(function(t,a){return r("div",{key:a,staticClass:"shop-item row-between-center"},[r("VanImage",{attrs:{src:t.logo,fit:"cover",width:"40%",height:"130"}}),r("div",{staticClass:"shop-item-info"},[r("div",{staticClass:"row-start-center"},[r("div",{staticClass:"shop-item-name omit"},[t.pass?r("b",[r("a",{on:{click:function(r){return e.$router.push("/shop/"+t._id)}}},[e._v(e._s(t.name))])]):r("b",[e._v(e._s(t.name))])]),t.pass?e._e():r("span",{staticStyle:{color:"red","margin-left":"10px"}},[e._v(" (审核中)")])]),r("div",{staticClass:"info-edit"},[e._v(" 是否上架： "),r("span",{on:{click:function(r){return e.setRunning(t._id,!t.running,t.pass)}}},[t.running?r("a",{staticClass:"on"},[e._v("点击下架")]):r("a",{staticClass:"off"},[e._v("点击上架")])])]),r("div",{staticClass:"info-edit"},[e._v(" 是否营业： "),r("span",{on:{click:function(r){return e.setOpen(t._id,!t.open,t.pass)}}},[t.open?r("a",{staticClass:"on"},[e._v("点击打烊")]):r("a",{staticClass:"off"},[e._v("点击营业")])])]),r("div",{staticClass:"info-edit"},[r("a",{staticClass:"edit",on:{click:function(r){e.shopInfo=t,e.showShopEdit=!0}}},[e._v("编辑商铺")]),e._v(" | "),r("a",{staticClass:"edit",on:{click:function(r){e.shopId=t._id,e.currency=t.currency,e.showGoodsEdit=!0}}},[e._v("编辑商品")]),e._v(" | "),r("a",{staticClass:"edit",on:{click:function(r){e.deleteid=t._id,e.deleteShop=!0}}},[e._v("删除商铺")])]),r("div",{staticClass:"info-edit"},[r("a",{staticClass:"edit",on:{click:function(r){return e.$router.push("/user/5?_id="+t._id)}}},[e._v("查看店铺订单")]),e._v(" | "),r("a",{staticClass:"edit",on:{click:function(r){return e.$router.push("/user/5?_id="+t._id+"&unfinished=1")}}},[e._v("未完成的订单("),r("b",[e._v(e._s(e.orderCount[t._id]))]),e._v(") ")]),e._v(" | "),r("a",{staticClass:"edit",on:{click:function(r){e.fans_param.page=1,e.fans_param.shopid=t._id,e.getFans(),e.showFans=!0}}},[e._v("查看粉丝")])])])],1)})),e.shopList.length<3?r("div",{staticClass:"shop-item row-center-center",on:{click:function(t){e.shopInfo=null,e.showShopEdit=!0}}},[r("Icon",{attrs:{name:"add-o",size:"50"}})],1):e._e()],2),e._m(0),e.showShopEdit?r("EditShop",{attrs:{shopInfo:e.shopInfo},on:{confirm:function(t){e.getShop(),e.showShopEdit=!1},close:function(t){e.showShopEdit=!1}}}):e._e(),e.showGoodsEdit?r("EditGoods",{attrs:{shopId:e.shopId,currency:e.currency},on:{close:function(t){e.showGoodsEdit=!1}}}):e._e(),e.deleteShop?r("Overlay",{attrs:{show:e.deleteShop}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.deleteShop=!1}}},[r("div",{staticClass:"block",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"title"},[r("h3",[e._v("确认删除店铺么？删除后不可恢复哦！")])]),r("div",{staticClass:"password"},[r("Field",{attrs:{placeholder:"请输入您的登录密码",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("div",{staticClass:"action row-start-center"},[r("Button",{attrs:{type:"danger"},on:{click:function(t){return e.delShop()}}},[e._v("删除店铺")]),r("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"warning"},on:{click:function(t){e.password="",e.deleteShop=!1}}},[e._v("取消删除")])],1)])])]):e._e(),e.showFans?r("Overlay",{attrs:{show:e.showFans}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.showFans=!1}}},[r("div",{staticClass:"fans-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"fans-list-frame"},e._l(e.fans.items,(function(t,a){return r("div",{key:a,staticClass:"fans-item row-start-center"},[r("VanImage",{attrs:{src:t.user.avatar,width:"50px",height:"50px",fit:"cover",round:""}}),r("div",{staticClass:"fans-name"},[r("b",[e._v(e._s(t.user.name))])])],1)})),0),r("Pagination",{attrs:{"items-per-page":e.fans_param.rows,"total-items":e.fans.total},on:{change:function(t){return e.getFans()}},model:{value:e.fans_param.page,callback:function(t){e.$set(e.fans_param,"page",t)},expression:"fans_param.page"}})],1)])]):e._e()],1)},Dt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shop-notice"},[r("p",[r("b",[e._v("每位用户最多可创建3个店铺，创建店铺后，可申请店铺信息审核，通过审核后您的店铺会上架。")])]),r("br"),r("p",[r("b",[e._v("请确保店铺信息真实，如发现虚假信息，您的店铺将会被强制下架。")])])])}],Ht={name:"UserShops",components:{VanImage:l["a"],Tag:Ce["a"],Button:m["a"],Field:h["a"],Icon:Ke["a"],Notify:d["a"],Dialog:De["a"],Overlay:v["a"],EditShop:Ct,EditGoods:St,Pagination:jt["a"]},data:function(){return{showShopEdit:!1,showGoodsEdit:!1,showFans:!1,shopList:[],shopInfo:null,shopId:null,currency:null,deleteShop:!1,password:"",deleteid:"",orderCount:{},intervalId:null,fans_param:{page:1,rows:20,shopid:""},fans:{total:0,items:[]}}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getShop();case 3:return t.next=5,e.getUnfinished();case 5:e.$store.dispatch("setLoading",!1),e.intervalId=setInterval(Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUnfinished();case 2:case"end":return t.stop()}}),t)}))),6e4);case 7:case"end":return t.stop()}}),t)})))()},destroyed:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:clearInterval(e.intervalId);case 1:case"end":return t.stop()}}),t)})))()},methods:{getShop:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.shop.getShop("/api/shop/get_shop");case 2:r=t.sent,a=r.data,a.success&&(e.shopList=a.data);case 5:case"end":return t.stop()}}),t)})))()},delShop:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.password.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"登录密码不得为空！"}));case 2:return t.next=4,V.shop.delShop(e.deleteid,e.password);case 4:if(r=t.sent,a=r.data,a.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 8:e.password="",e.deleteShop=!1,e.getShop(),Object(d["a"])({type:"success",message:"删除商城成功"});case 12:case"end":return t.stop()}}),t)})))()},setRunning:function(e,t,r){var a=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r){n.next=2;break}return n.abrupt("return",Object(d["a"])({type:"danger",message:"审核未通过，不可操作上架状态"}));case 2:return n.next=4,V.shop.setRunning(e,t);case 4:if(s=n.sent,i=s.data,i.success){n.next=8;break}return n.abrupt("return",Object(d["a"])({type:"danger",message:i.message}));case 8:a.getShop();case 9:case"end":return n.stop()}}),n)})))()},setOpen:function(e,t,r){var a=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r){n.next=2;break}return n.abrupt("return",Object(d["a"])({type:"danger",message:"审核未通过，不可操作营业状态"}));case 2:return n.next=4,V.shop.setOpen(e,t);case 4:if(s=n.sent,i=s.data,i.success){n.next=8;break}return n.abrupt("return",Object(d["a"])({type:"danger",message:i.message}));case 8:a.getShop();case 9:case"end":return n.stop()}}),n)})))()},getUnfinished:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.shopList.length){t.next=2;break}return t.abrupt("return");case 2:r=e.shopList.length-1;case 3:if(!(r>=0)){t.next=16;break}return t.next=6,V.order.unfinishedCount(e.shopList[r]._id);case 6:if(a=t.sent,n=a.data,n.success){t.next=11;break}return clearInterval(e.intervalId),t.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 11:e.orderCount[e.shopList[r]._id]=n.data,e.orderCount=JSON.parse(JSON.stringify(e.orderCount));case 13:r--,t.next=3;break;case 16:case"end":return t.stop()}}),t)})))()},getFans:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.follow.shopFollow(e.fans_param);case 2:if(r=t.sent,a=r.data,a.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:e.fans.items=a.data.items,e.fans.total=a.data.total;case 8:case"end":return t.stop()}}),t)})))()}}},Jt=Ht,Wt=(r("b905"),Object(M["a"])(Jt,Mt,Dt,!1,null,"c814398e",null)),Kt=Wt.exports,Qt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-follow-frame"},[r("div",{staticClass:"shop-list row-start-center"},e._l(e.items,(function(t,a){return r("div",{key:a,staticClass:"shop-item"},[r("router-link",{attrs:{to:"/shop/"+t.shop._id}},[r("div",{staticClass:"shop-logo-frame"},[r("VanImage",{attrs:{src:t.shop.logo,width:"100%",height:"120px",fit:"cover"}}),r("div",{staticClass:"shop-tag"},[r("Tag",{attrs:{type:"primary"}},[e._v(e._s(e.SERVICETYPE[t.shop.type-1].name))])],1)],1),r("div",{staticClass:"row-between-center shop-info"},[r("div",{staticClass:"shop-name omit"},[r("b",[e._v(e._s(t.shop.name))])])])])],1)})),0)])},Xt=[],Zt={name:"UserFollow",components:{VanImage:l["a"],Tag:Ce["a"]},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.userFollow();case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{SERVICETYPE:ke,items:[]}},methods:{userFollow:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.follow.userFollow();case 2:if(r=t.sent,a=r.data,a.success){t.next=6;break}return t.abrupt("return",Notify({type:"danger",message:a.message}));case 6:e.items=a.data;case 7:case"end":return t.stop()}}),t)})))()}}},er=Zt,tr=(r("d7ce"),Object(M["a"])(er,Qt,Xt,!1,null,"7ec090c0",null)),rr=tr.exports,ar={shoper:"店主",admin:"管理员"},nr={name:"User",components:{VanImage:l["a"],Header:_e,Tag:Ce["a"],Button:m["a"],Field:h["a"],Icon:Ke["a"],Notify:d["a"],Upload:ht,EditShop:Ct,EditGoods:St,Overlay:v["a"],UserOrder:zt,ShopOrder:Yt,UserShops:Kt,UserFollow:rr},computed:{user:function(){var e=this.$store.state.user?this.$store.state.user:{};return e},infoList:function(){return this.$store.state.infoList}},data:function(){return{ACCESS:ar,active:0,edit:!1,editInfo:{name:"",avatar:""},showShopEdit:!1,showGoodsEdit:!1,shopList:[],shopInfo:null,shopId:null,currency:null,deleteShop:!1,password:"",deleteid:""}},mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.active=Number(e.$route.params.active);case 1:case"end":return t.stop()}}),t)})))()},methods:{editUser:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.editInfo.name||(e.editInfo.name=e.user.name),e.editInfo.avatar||(e.editInfo.avatar=e.user.avatar),e.edit=!0;case 3:case"end":return t.stop()}}),t)})))()},updateUser:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.editInfo.name.trim()&&e.editInfo.avatar.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"更新信息缺失"}));case 2:if(!(e.editInfo.name.length>8)){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"昵称不要超过十个字"}));case 4:return t.next=6,V.user.updateUser(e.editInfo.name,e.editInfo.avatar);case 6:if(r=t.sent,a=r.data,a.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 10:e.$store.dispatch("getUser"),e.edit=!1,Object(d["a"])({type:"success",message:"更新成功"});case 13:case"end":return t.stop()}}),t)})))()},getAvatarUrl:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.editInfo.avatar=e;case 1:case"end":return r.stop()}}),r)})))()},setDefault:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.info.setDefault(e);case 2:if(a=r.sent,n=a.data,n.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:t.$store.dispatch("getInfoList"),Object(d["a"])({type:"success",message:"更新成功"});case 8:case"end":return r.stop()}}),r)})))()},delInfo:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:De["a"].confirm({title:"是否删除该地址信息"}).then(Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.info.delInfo(e);case 2:if(a=r.sent,n=a.data,n.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:t.$store.dispatch("getInfoList");case 7:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()}}},sr=nr,ir=(r("f96a"),Object(M["a"])(sr,ct,ut,!1,null,"160509c6",null)),or=ir.exports,cr=[{path:"/",name:"Home",component:Te,meta:{title:"海外圈-海外华人的圈圈",keepAlive:!0}},{path:"/service/:type",name:"Service",component:Ve,meta:{title:"海外圈-商店服务",keepAlive:!0}},{path:"/shop/:_id",name:"Shop",component:ot,meta:{title:"海外圈-店铺信息",keepAlive:!0}},{path:"/user/:active",name:"User",component:or,meta:{title:"海外圈-个人中心"}}],ur=cr,dr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("移动端开发中，请用电脑打开！")])},pr=[],lr={},mr=Object(M["a"])(lr,dr,pr,!1,null,null,null),fr=mr.exports,hr=[{path:"/",name:"Home",component:fr,meta:{title:"海外圈-海外华人的圈圈",keepAlive:!0}}],vr=hr;n["a"].use(de["a"]);var gr=function(e){var t="PC"===e?ur:vr,r=new de["a"]({mode:"history",routes:t});return r.beforeEach((function(e,t,r){var a=e.matched.slice().reverse().find((function(e){return e.meta&&e.meta.title})),n=e.matched.slice().reverse().find((function(e){return e.meta&&e.meta.metaTags}));if(a&&(document.title=a.meta.title),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map((function(e){return e.parentNode.removeChild(e)})),!n)return r();n.meta.metaTags.map((function(e){var t=document.createElement("meta");return Object.keys(e).forEach((function(r){t.setAttribute(r,e[r])})),t.setAttribute("data-vue-router-controlled",""),t})).forEach((function(e){return document.head.appendChild(e)})),r()})),r},wr=r("2f62"),br={loading:!1,showAccount:!1,showAddress:!1,eidtAddress:null,user:null,infoList:[]},_r=br,xr={setLoading:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=e.commit,e.state,a("setLoading",t);case 2:case"end":return r.stop()}}),r)})))()},setAccount:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=e.commit,e.state,a("setAccount",t);case 2:case"end":return r.stop()}}),r)})))()},setAddress:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=e.commit,e.state,n=t.show,s=t.info,a("setAddress",{show:n,info:s});case 3:case"end":return r.stop()}}),r)})))()},getUser:function(e){return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,e.state,t.next=3,V.user.getUser();case 3:a=t.sent,n=a.data,n.success?r("getUser",n.data):r("getUser",null);case 6:case"end":return t.stop()}}),t)})))()},getInfoList:function(e){return Object(p["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,e.state,t.next=3,V.info.getInfoList();case 3:a=t.sent,n=a.data,n.success?r("getInfoList",n.data):r("getInfoList",[]);case 6:case"end":return t.stop()}}),t)})))()}},yr=xr,Cr={setLoading:function(e,t){e.loading=t},setAccount:function(e,t){e.showAccount=t},setAddress:function(e,t){var r=t.show,a=t.info;e.eidtAddress=a,e.showAddress=r},getUser:function(e,t){e.user=t},getInfoList:function(e,t){e.infoList=t}},kr=Cr;n["a"].use(wr["a"]);var Rr=new wr["a"].Store({state:_r,mutations:kr,actions:yr}),Or=Rr;r("2ea5");n["a"].config.productionTip=!1;var jr=document.documentElement.clientWidth,Er=jr>700?"PC":"MB",Ir="PC"===Er?ae:ue,$r=gr(Er);new n["a"]({router:$r,store:Or,render:function(e){return e(Ir)}}).$mount("#app")},"5dfa":function(e,t,r){"use strict";r("ff88")},6199:function(e,t,r){"use strict";r("5339")},"67b7":function(e,t,r){"use strict";r("c608")},"6c3e":function(e,t,r){"use strict";r("cae6")},"7f26":function(e,t,r){"use strict";r("1eec")},"9ad9":function(e,t,r){},a3ad:function(e,t,r){"use strict";r("9ad9")},ae26:function(e,t,r){},b5d6:function(e,t,r){"use strict";r("ecb2")},b905:function(e,t,r){"use strict";r("e410")},ba55:function(e,t,r){},c608:function(e,t,r){},c60e:function(e,t,r){"use strict";r("51a3")},cae6:function(e,t,r){},d7ce:function(e,t,r){"use strict";r("20a2")},daa9:function(e,t,r){"use strict";r("3a7e")},e410:function(e,t,r){},e799:function(e,t,r){},ecb2:function(e,t,r){},f294:function(e,t,r){"use strict";r("362b")},f96a:function(e,t,r){"use strict";r("2683")},fda8:function(e,t,r){"use strict";r("ba55")},ff88:function(e,t,r){}});