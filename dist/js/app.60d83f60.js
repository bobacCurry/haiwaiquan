(function(e){function t(t){for(var s,i,o=t[0],c=t[1],u=t[2],l=0,p=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],s=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(s=!1)}s&&(n.splice(t--,1),e=i(i.s=r[0]))}return e}var s={},a={app:0},n=[];function i(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=s,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"04d9":function(e,t,r){},"08ad":function(e,t,r){},"0f17":function(e,t,r){"use strict";r("6954")},"0f1d":function(e,t,r){"use strict";r("ae26")},"0fa0":function(e,t,r){},"115e":function(e,t,r){},1627:function(e,t,r){},"1e0b":function(e,t,r){"use strict";r("f566")},"1eec":function(e,t,r){},"20a2":function(e,t,r){},"22e8":function(e,t,r){},2717:function(e,t,r){},2898:function(e,t,r){"use strict";r("2717")},"2cd4":function(e,t,r){"use strict";r("4464")},"2ea5":function(e,t,r){},"354c":function(e,t,r){"use strict";r("0fa0")},4464:function(e,t,r){},"491e":function(e,t,r){"use strict";r("e504")},"4e09":function(e,t,r){"use strict";r("08ad")},"4f62":function(e,t,r){},"51b4":function(e,t,r){"use strict";r("4f62")},"56d7":function(e,t,r){"use strict";r.r(t);r("66cf");var s=r("343b"),a=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("5319"),r("ac1f"),r("2b0e")),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("keep-alive",[e.$route.meta.keepAlive?r("router-view",{key:e.$route.fullPath}):e._e()],1),e.$route.meta.keepAlive?e._e():r("router-view",{key:e.$route.fullPath}),e.showAccount?r("Account"):e._e(),e.showAddress?r("Address"):e._e(),e.loading?r("div",{staticClass:"page-loading row-center-center"},[r("div",{staticClass:"loading-icon"},[r("Loading",{attrs:{color:"#40A6EB",type:"spinner"}})],1),r("div",{staticClass:"loading-mask"})]):e._e()],1)},i=[],o=(r("ac1e"),r("543e")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Overlay",{attrs:{show:!0,"z-index":"100"},on:{click:function(t){return e.$store.dispatch("setAccount",null)}}},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"account-frame",on:{click:function(e){e.stopPropagation()}}},["login"===e.show?r("div",{staticClass:"login-frame"},[r("h1",[e._v("登陆海外圈")]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入用户名",size:"large"},model:{value:e.login_account,callback:function(t){e.login_account=t},expression:"login_account"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入密码",type:"password",size:"large"},model:{value:e.login_password,callback:function(t){e.login_password=t},expression:"login_password"}})],1),r("div",{staticClass:"text-frame"},[r("Popover",{attrs:{trigger:"click",placement:"top"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("b",{staticStyle:{cursor:"pointer"}},[e._v("忘记密码?")])]},proxy:!0}],null,!1,846625665),model:{value:e.showForget,callback:function(t){e.showForget=t},expression:"showForget"}},[r("div",{staticClass:"forget-frame"},[e._v(" 重置密码请联系 "),r("a",{attrs:{href:"https://t.me/guevaratech",target:"_blank"}},[e._v("管理员")])])])],1),r("div",{staticClass:"button-frame"},[r("Button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"large"},on:{click:function(t){return e.login()}}},[e._v("登陆")])],1),r("div",{staticClass:"text-frame"},[r("a",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$store.dispatch("setAccount","register")}}},[e._v("没有账号？立即注册")])])]):e._e(),"register"===e.show?r("div",{staticClass:"register-frame"},[r("h1",[e._v("注册海外圈")]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入用户名，数字、字母或下划线",formatter:e.formatter,size:"large"},model:{value:e.register_account,callback:function(t){e.register_account=t},expression:"register_account"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入密码",type:"password",size:"large"},model:{value:e.register_password,callback:function(t){e.register_password=t},expression:"register_password"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请再次输入密码",type:"password",size:"large"},model:{value:e.register_password_confirm,callback:function(t){e.register_password_confirm=t},expression:"register_password_confirm"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入验证码",size:"large"},model:{value:e.register_captcha,callback:function(t){e.register_captcha=t},expression:"register_captcha"}})],1),r("div",{staticClass:"text-frame"},[r("div",{domProps:{innerHTML:e._s(e.captcha.data)},on:{click:function(t){return e.getCaptcha()}}})]),r("div",{staticClass:"button-frame"},[r("Button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"large"},on:{click:function(t){return e.register()}}},[e._v("注册")])],1),r("div",{staticClass:"text-frame"},[r("a",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$store.dispatch("setAccount","login")}}},[e._v("已有账号？立即登陆")])])]):e._e()])])])],1)},u=[],d=(r("9a83"),r("f564")),l=r("1da1"),p=(r("4056"),r("44bf")),m=(r("66b9"),r("b650")),f=(r("d82d"),r("7278")),h=(r("be7f"),r("565f")),v=(r("f1dc"),r("6e47")),g=(r("498a"),r("96cf"),r("a78e")),w=r.n(g),b={cookieExpires:60},_=b.cookieExpires,x="token",C=function(e){w.a.set(x,e,{expires:_||1})},k=function(){var e=w.a.get(x);return e||!1},y=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy")&&document.execCommand("Copy"),document.body.removeChild(t)},R=function(e){var t=new Date(e),r=t.getFullYear(),s=t.getMonth()+1,a=t.getDay(),n=t.getHours(),i=t.getMinutes(),o=t.getSeconds();return r+"-"+s+"-"+a+" "+n+":"+i+":"+o},O=r("d4ec"),j=r("bee2"),I=(r("b64b"),r("d3b7"),r("bc3a")),E=r.n(I),$=function(){function e(){Object(O["a"])(this,e),this.queue={}}return Object(j["a"])(e,[{key:"getInsideConfig",value:function(){var e=k(),t={timeout:18e4,headers:{token:e}};return t}},{key:"destroy",value:function(e){delete this.queue[e],Object.keys(this.queue).length}},{key:"interceptors",value:function(e,t){var r=this;e.interceptors.request.use((function(e){return Object.keys(r.queue).length,r.queue[t]=!0,e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){r.destroy(t);var s=e.data,a=e.status;return{data:s,status:a}}),(function(e){r.destroy(t);var s=e.response;if(!s){var a=JSON.parse(JSON.stringify(e)),n=a.request,i=n.statusText,o=n.status,c=a.config;s={statusText:i,status:o,request:{responseURL:c.url}}}return Promise.reject(e)}))}},{key:"request",value:function(e){var t=E.a.create();return e=Object.assign(this.getInsideConfig(),e),this.interceptors(t,e.url),t(e)}}]),e}(),S=$,L=new S,U=L,A={uploadImg:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/common/upload_img",method:"post",data:{stream:t,type:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},T={getCaptcha:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/user/get_captcha",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),register:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,s,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/user/register",method:"post",data:{account:t,password:r,captcha:s,key:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,s,a){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/user/login",method:"post",data:{account:t,password:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getUser:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/user/get_user",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),updateUser:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/user/update_user",method:"post",data:{name:t,avatar:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},N={getInfoList:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/info/get_list",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),addInfo:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,s,a,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/info/add_info",method:"post",data:{name:t,phone:r,wechat:s,telegram:a,address:n}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,s,a,n){return e.apply(this,arguments)}return t}(),delInfo:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/info/del_info",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),updateInfo:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,s,a,n,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/info/update_info",method:"post",data:{_id:t,name:r,phone:s,wechat:a,telegram:n,address:i}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,s,a,n,i){return e.apply(this,arguments)}return t}(),setDefault:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/info/set_default",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},P={getShop:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/get_shop",method:"get"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),addShop:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/add_shop",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),delShop:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/del_shop",method:"post",data:{_id:t,password:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updateShop:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/update_shop",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),setOpen:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/set_open",method:"post",data:{_id:t,open:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),setRunning:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/set_running",method:"post",data:{_id:t,running:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),getClass:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/get_class",method:"post",data:{shopid:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),addClass:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/add_class",method:"post",data:{shopid:t,name:r,sort:s}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,s){return e.apply(this,arguments)}return t}(),delClass:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/del_class",method:"post",data:{shopid:t,_id:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updateClass:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,s,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/update_class",method:"post",data:{shopid:t,_id:r,name:s,sort:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,s,a){return e.apply(this,arguments)}return t}(),getGoods:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/get_goods",method:"post",data:{shopid:t,page:r,rows:s}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,s){return e.apply(this,arguments)}return t}(),addGoods:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/add_goods",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),delGoods:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/del_goods",method:"post",data:{shopid:t,_id:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),updateGoods:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/update_goods",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),stopGoods:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/shop/stop_goods",method:"post",data:{shopid:t,_id:r,stop:s}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r,s){return e.apply(this,arguments)}return t}()},F={getShops:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/show/get_shops",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getTypeShops:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/show/get_type_shops",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getShop:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/show/get_shop/".concat(t),method:"post"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},z={newOrder:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/new_order",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),newOrderAgency:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/new_order_agency",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getUserOrder:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/get_user_order",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getShopOrder:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/get_shop_order",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getOrder:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/get_order",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),cancelOrderUser:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/cancel_order_user",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),cancelOrderShop:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/cancel_order_shop",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),confirmOrder:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/confirm_order",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),delivery:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/delivery",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),arrived:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/arrived",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),finishOrder:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/finish_order",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),unfinishedCount:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/order/unfinished_count",method:"post",data:{shopid:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},B={newReview:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/review/new_review",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getReview:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/review/get_review",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),delReview:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/review/del_review",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),replyReview:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/review/reply_review",method:"post",data:{_id:t,text:r}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}(),delReply:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/review/del_reply",method:"post",data:{_id:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},G={isfollow:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/follow/isfollow",method:"post",data:{shopid:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),follow:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/follow/follow",method:"post",data:{shopid:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),unfollow:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/follow/unfollow",method:"post",data:{shopid:t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),userFollow:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/follow/user_follow",method:"post"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),shopFollow:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U.request({url:"/api/follow/shop_follow",method:"post",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},V={common:A,user:T,info:N,shop:P,show:F,order:z,review:B,follow:G},Y={name:"Account",components:{Overlay:v["a"],Field:h["a"],Popover:f["a"],Button:m["a"],VanImage:p["a"]},data:function(){return{showForget:!1,captcha:{data:"",key:""},login_account:"",login_password:"",register_account:"",register_password:"",register_captcha:"",register_key:"",register_password_confirm:""}},computed:{loading:function(){return this.$store.state.loading},show:function(){return this.$store.state.showAccount}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.show){t.next=3;break}return t.next=3,e.getCaptcha();case 3:case"end":return t.stop()}}),t)})))()},methods:{getCaptcha:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.captcha={data:"",key:""},t.next=3,V.user.getCaptcha();case 3:r=t.sent,s=r.data,s.success&&(e.captcha=s.captcha);case 6:case"end":return t.stop()}}),t)})))()},register:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.register_password_confirm.trim()===e.register_password.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请保持密码输入一致"}));case 2:if(e.register_account.trim()&&e.register_password.trim()&&e.register_captcha.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"注册参数缺失"}));case 4:return e.register_key=e.captcha.key,t.next=7,V.user.register(e.register_account,e.register_password,e.register_captcha,e.register_key);case 7:if(r=t.sent,s=r.data,s.success){t.next=11;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 11:Object(d["a"])({type:"success",message:"注册成功！"}),e.$store.dispatch("setAccount","login");case 13:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.login_account.trim()&&e.login_password.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"登陆参数缺失"}));case 2:return t.next=4,V.user.login(e.login_account,e.login_password);case 4:if(r=t.sent,s=r.data,s.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 8:C(s.data.token),e.$store.dispatch("getUser"),e.$store.dispatch("getInfoList"),Object(d["a"])({type:"success",message:"登陆成功！"}),e.$store.dispatch("setAccount",null);case 13:case"end":return t.stop()}}),t)})))()},formatter:function(e){return e.replace(/[^\w_]/g,"")}}},q=Y,D=(r("354c"),r("2877")),M=Object(D["a"])(q,c,u,!1,null,"6eecc09a",null),H=M.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Overlay",{attrs:{show:e.show,"z-index":"100"},on:{click:function(t){return e.$store.dispatch("setAddress",{show:!1,info:null})}}},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"称呼",placeholder:"你的称呼"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"电话",placeholder:"您的电话号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"微信",placeholder:"您的微信号"},model:{value:e.wechat,callback:function(t){e.wechat=t},expression:"wechat"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"飞机",formatter:e.checkTelgram,placeholder:"飞机的 username，不需要带@"},model:{value:e.telegram,callback:function(t){e.telegram=t},expression:"telegram"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{type:"textarea",rows:"3",autosize:"",label:"地址",placeholder:"你的详细收货地址","show-word-limit":"",maxlength:"200"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),r("div",{staticClass:"info-item save-item"},[e.id?r("Button",{attrs:{type:"info"},on:{click:function(t){return e.updateInfo()}}},[e._v("更新")]):r("Button",{attrs:{type:"info"},on:{click:function(t){return e.addInfo()}}},[e._v("保存")]),e._v(" "),r("Button",{attrs:{type:"default"},on:{click:function(t){return e.$store.dispatch("setAddress",{show:!1,info:null})}}},[e._v("取消")])],1)])])])],1)},W=[],K=(r("b0c0"),{name:"Address",components:{Overlay:v["a"],Field:h["a"],Button:m["a"],Notify:d["a"]},data:function(){return{id:"",name:"",phone:"",wechat:"",telegram:"",address:""}},computed:{show:function(){return this.$store.state.showAddress}},mounted:function(){this.$store.state.eidtAddress&&(this.id=this.$store.state.eidtAddress._id,this.name=this.$store.state.eidtAddress.name,this.phone=this.$store.state.eidtAddress.phone,this.wechat=this.$store.state.eidtAddress.wechat,this.telegram=this.$store.state.eidtAddress.telegram,this.address=this.$store.state.eidtAddress.address)},methods:{addInfo:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.name.trim()&&e.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"称呼或地址信息缺失"}));case 2:if(e.phone.trim()||e.wechat.trim()||e.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请填写至少一种联系方式"}));case 4:return t.next=6,V.info.addInfo(e.name,e.phone,e.wechat,e.telegram,e.address);case 6:if(r=t.sent,s=r.data,s.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 10:e.$store.dispatch("getInfoList"),e.$store.dispatch("setAddress",{show:!1,info:null});case 12:case"end":return t.stop()}}),t)})))()},updateInfo:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.name.trim()&&e.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"称呼或地址信息缺失"}));case 2:if(e.phone.trim()||e.wechat.trim()||e.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请填写至少一种联系方式"}));case 4:return t.next=6,V.info.updateInfo(e.id,e.name,e.phone,e.wechat,e.telegram,e.address);case 6:if(r=t.sent,s=r.data,s.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 10:e.$store.dispatch("getInfoList"),e.$store.dispatch("setAddress",{show:!1,info:null});case 12:case"end":return t.stop()}}),t)})))()},checkTelgram:function(e){return e.replace(/[^\w_]/g,"")}}}),Q=K,X=(r("5dfa"),Object(D["a"])(Q,J,W,!1,null,"80ec9096",null)),Z=X.exports,ee={name:"AppPC",components:{Account:H,Address:Z,Loading:o["a"]},computed:{showAccount:function(){return this.$store.state.showAccount},showAddress:function(){return this.$store.state.showAddress},loading:function(){return this.$store.state.loading}},mounted:function(){this.$store.dispatch("getUser"),this.$store.dispatch("getInfoList")}},te=ee,re=(r("7f26"),Object(D["a"])(te,n,i,!1,null,null,null)),se=re.exports,ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("keep-alive",[e.$route.meta.keepAlive?r("router-view",{key:e.$route.fullPath}):e._e()],1),e.$route.meta.keepAlive?e._e():r("router-view",{key:e.$route.fullPath}),e.showAccount?r("Account"):e._e(),e.showAddress?r("Address"):e._e(),e.loading?r("div",{staticClass:"page-loading row-center-center"},[r("div",{staticClass:"loading-icon"},[r("Loading",{attrs:{color:"#40A6EB",type:"spinner"}})],1),r("div",{staticClass:"loading-mask"})]):e._e()],1)},ne=[],ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Overlay",{attrs:{show:!0,"z-index":"100"},on:{click:function(t){return e.$store.dispatch("setAccount",null)}}},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"account-frame",on:{click:function(e){e.stopPropagation()}}},["login"===e.show?r("div",{staticClass:"login-frame"},[r("h3",[e._v("登陆海外圈")]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入用户名"},model:{value:e.login_account,callback:function(t){e.login_account=t},expression:"login_account"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.login_password,callback:function(t){e.login_password=t},expression:"login_password"}})],1),r("div",{staticClass:"text-frame"},[r("Popover",{attrs:{trigger:"click",placement:"top"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("b",{staticStyle:{cursor:"pointer"}},[e._v("忘记密码?")])]},proxy:!0}],null,!1,846625665),model:{value:e.showForget,callback:function(t){e.showForget=t},expression:"showForget"}},[r("div",{staticClass:"forget-frame"},[e._v(" 重置密码请联系 "),r("a",{attrs:{href:"https://t.me/guevaratech",target:"_blank"}},[e._v("管理员")])])])],1),r("div",{staticClass:"button-frame"},[r("Button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.login()}}},[e._v("登陆")])],1),r("div",{staticClass:"text-frame"},[r("a",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$store.dispatch("setAccount","register")}}},[e._v("没有账号？立即注册")])])]):e._e(),"register"===e.show?r("div",{staticClass:"register-frame"},[r("h3",[e._v("注册海外圈")]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入用户名，数字、字母或下划线",formatter:e.formatter},model:{value:e.register_account,callback:function(t){e.register_account=t},expression:"register_account"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.register_password,callback:function(t){e.register_password=t},expression:"register_password"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请再次输入密码",type:"password"},model:{value:e.register_password_confirm,callback:function(t){e.register_password_confirm=t},expression:"register_password_confirm"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"请输入验证码"},model:{value:e.register_captcha,callback:function(t){e.register_captcha=t},expression:"register_captcha"}})],1),r("div",{staticClass:"text-frame"},[r("div",{domProps:{innerHTML:e._s(e.captcha.data)},on:{click:function(t){return e.getCaptcha()}}})]),r("div",{staticClass:"button-frame"},[r("Button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){return e.register()}}},[e._v("注册")])],1),r("div",{staticClass:"text-frame"},[r("a",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$store.dispatch("setAccount","login")}}},[e._v("已有账号？立即登陆")])])]):e._e()])])])],1)},oe=[],ce={name:"Account",components:{Overlay:v["a"],Field:h["a"],Popover:f["a"],Button:m["a"],VanImage:p["a"]},data:function(){return{showForget:!1,captcha:{data:"",key:""},login_account:"",login_password:"",register_account:"",register_password:"",register_captcha:"",register_key:"",register_password_confirm:""}},computed:{loading:function(){return this.$store.state.loading},show:function(){return this.$store.state.showAccount}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.show){t.next=3;break}return t.next=3,e.getCaptcha();case 3:case"end":return t.stop()}}),t)})))()},methods:{getCaptcha:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.captcha={data:"",key:""},t.next=3,V.user.getCaptcha();case 3:r=t.sent,s=r.data,s.success&&(e.captcha=s.captcha);case 6:case"end":return t.stop()}}),t)})))()},register:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.register_password_confirm.trim()===e.register_password.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请保持密码输入一致"}));case 2:if(e.register_account.trim()&&e.register_password.trim()&&e.register_captcha.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"注册参数缺失"}));case 4:return e.register_key=e.captcha.key,t.next=7,V.user.register(e.register_account,e.register_password,e.register_captcha,e.register_key);case 7:if(r=t.sent,s=r.data,s.success){t.next=11;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 11:Object(d["a"])({type:"success",message:"注册成功！"}),e.$store.dispatch("setAccount","login");case 13:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.login_account.trim()&&e.login_password.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"登陆参数缺失"}));case 2:return t.next=4,V.user.login(e.login_account,e.login_password);case 4:if(r=t.sent,s=r.data,s.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 8:C(s.data.token),e.$store.dispatch("getUser"),e.$store.dispatch("getInfoList"),Object(d["a"])({type:"success",message:"登陆成功！"}),e.$store.dispatch("setAccount",null);case 13:case"end":return t.stop()}}),t)})))()},formatter:function(e){return e.replace(/[^\w_]/g,"")}}},ue=ce,de=(r("6bd0"),Object(D["a"])(ue,ie,oe,!1,null,"00a880b0",null)),le=de.exports,pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Overlay",{attrs:{show:e.show,"z-index":"100"},on:{click:function(t){return e.$store.dispatch("setAddress",{show:!1,info:null})}}},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"称呼",placeholder:"你的称呼"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"电话",placeholder:"您的电话号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"微信",placeholder:"您的微信号"},model:{value:e.wechat,callback:function(t){e.wechat=t},expression:"wechat"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{label:"飞机",formatter:e.checkTelgram,placeholder:"飞机username"},model:{value:e.telegram,callback:function(t){e.telegram=t},expression:"telegram"}})],1),r("div",{staticClass:"info-item"},[r("Field",{attrs:{type:"textarea",rows:"3",autosize:"",label:"地址",placeholder:"你的详细收货地址","show-word-limit":"",maxlength:"200"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),r("div",{staticClass:"info-item save-item"},[e.id?r("Button",{attrs:{type:"info"},on:{click:function(t){return e.updateInfo()}}},[e._v("更新")]):r("Button",{attrs:{type:"info"},on:{click:function(t){return e.addInfo()}}},[e._v("保存")]),e._v(" "),r("Button",{attrs:{type:"default"},on:{click:function(t){return e.$store.dispatch("setAddress",{show:!1,info:null})}}},[e._v("取消")])],1)])])])],1)},me=[],fe={name:"Address",components:{Overlay:v["a"],Field:h["a"],Button:m["a"],Notify:d["a"]},data:function(){return{id:"",name:"",phone:"",wechat:"",telegram:"",address:""}},computed:{show:function(){return this.$store.state.showAddress}},mounted:function(){this.$store.state.eidtAddress&&(this.id=this.$store.state.eidtAddress._id,this.name=this.$store.state.eidtAddress.name,this.phone=this.$store.state.eidtAddress.phone,this.wechat=this.$store.state.eidtAddress.wechat,this.telegram=this.$store.state.eidtAddress.telegram,this.address=this.$store.state.eidtAddress.address)},methods:{addInfo:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.name.trim()&&e.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"称呼或地址信息缺失"}));case 2:if(e.phone.trim()||e.wechat.trim()||e.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请填写至少一种联系方式"}));case 4:return t.next=6,V.info.addInfo(e.name,e.phone,e.wechat,e.telegram,e.address);case 6:if(r=t.sent,s=r.data,s.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 10:e.$store.dispatch("getInfoList"),e.$store.dispatch("setAddress",{show:!1,info:null});case 12:case"end":return t.stop()}}),t)})))()},updateInfo:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.name.trim()&&e.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"称呼或地址信息缺失"}));case 2:if(e.phone.trim()||e.wechat.trim()||e.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请填写至少一种联系方式"}));case 4:return t.next=6,V.info.updateInfo(e.id,e.name,e.phone,e.wechat,e.telegram,e.address);case 6:if(r=t.sent,s=r.data,s.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 10:e.$store.dispatch("getInfoList"),e.$store.dispatch("setAddress",{show:!1,info:null});case 12:case"end":return t.stop()}}),t)})))()},checkTelgram:function(e){return e.replace(/[^\w_]/g,"")}}},he=fe,ve=(r("71c1"),Object(D["a"])(he,pe,me,!1,null,"7e6100be",null)),ge=ve.exports,we={name:"AppMB",components:{Loading:o["a"],Account:le,Address:ge},computed:{showAccount:function(){return this.$store.state.showAccount},showAddress:function(){return this.$store.state.showAddress},loading:function(){return this.$store.state.loading}},mounted:function(){this.$store.dispatch("getUser"),this.$store.dispatch("getInfoList")}},be=we,_e=(r("0f1d"),Object(D["a"])(be,ae,ne,!1,null,null,null)),xe=_e.exports,Ce=(r("7db0"),r("fb6a"),r("d81d"),r("a630"),r("3ca3"),r("159b"),r("8c4f")),ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame"},[r("div",{staticClass:"home-banner"},[r("div",{staticClass:"banner-content"},[r("Header"),r("div",{staticClass:"banner-brief"},[e._v(" 海外圈，海外生活不陌生 ")]),r("div",{staticClass:"banner-body row-center-center"},[r("div",{staticClass:"banner-body-content row-between-center"},[r("div",{staticClass:"search-frame"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.param.keywords,expression:"param.keywords"}],attrs:{placeholder:"搜索相关店铺"},domProps:{value:e.param.keywords},on:{input:function(t){t.target.composing||e.$set(e.param,"keywords",t.target.value)}}})]),r("div",{staticClass:"search-button",on:{click:function(t){return e.reset()}}},[e._v(" 搜索 ")])])])],1),r("div",{staticClass:"banner-mask"})]),r("div",{staticClass:"home-body"},[r("div",{staticClass:"home-service-frame row-between-center"},e._l(e.SERVICETYPE,(function(t,s){return r("div",{key:s,staticClass:"service-item",on:{click:function(t){return e.$router.push("/service/"+(s+1))}}},[r("VanImage",{attrs:{src:t.icon,fit:"cover",width:"60",height:"60"}}),r("div",[e._v(e._s(t.name))])],1)})),0),r("div",{staticClass:"home-shops-frame"},[r("ShopList",{attrs:{type:0,items:e.items,loading:e.loading,hasMore:e.hasMore},on:{search:function(t){return e.search()}}})],1)])])},ye=[],Re=r("2909"),Oe=(r("4142"),r("39d1")),je=(r("841c"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:["banner-header",e.trans?"banner-header-trans":""]},[r("div",{staticClass:"banner-header-content row-between-center"},[r("div",{staticClass:"logo-frame row-start-center",on:{click:function(t){return e.$router.push("/")}}},[r("VanImage",{attrs:{src:"/img/logo.png",fit:"cover",width:"50",height:"50"}}),r("div",{staticClass:"logo-slogan"},[e._v("海外圈")])],1),e.user?r("div",{staticClass:"user-frame",on:{click:function(e){e.stopPropagation()}}},[r("Popover",{attrs:{"close-on-click-outside":!0,trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("div",{staticClass:"row-center-center"},[r("VanImage",{attrs:{src:e.user.avatar,fit:"cover",width:"50",height:"50",round:""}}),r("div",{staticClass:"username"},[r("b",[e._v(e._s(e.user.name))])])],1)]},proxy:!0}]),model:{value:e.showUserAction,callback:function(t){e.showUserAction=t},expression:"showUserAction"}},[r("div",{staticClass:"user-action-frame"},[r("div",{staticClass:"user-action-item",on:{click:function(t){return e.$router.push("/user/0")}}},[e._v("用户中心")]),r("div",{staticClass:"user-action-item",on:{click:function(t){return e.logout()}}},[e._v("退出登录")])])])],1):r("div",{staticClass:"account"},[r("span",[r("a",{on:{click:function(t){return e.$store.dispatch("setAccount","login")}}},[e._v("登陆")])]),e._v(" / "),r("span",[r("a",{on:{click:function(t){return e.$store.dispatch("setAccount","register")}}},[e._v("注册")])])])])])}),Ie=[],Ee={name:"Header",components:{VanImage:p["a"],Rate:Oe["a"],Popover:f["a"]},computed:{user:function(){return this.$store.state.user},trans:function(){return-1!==["Home","Shop"].indexOf(this.$route.name)}},data:function(){return{showUserAction:!1}},methods:{logout:function(){C(null),this.showUserAction=!1,this.$store.dispatch("getUser")}}},$e=Ee,Se=(r("a3ad"),Object(D["a"])($e,je,Ie,!1,null,"4589b2a2",null)),Le=Se.exports,Ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v(e._s(e.title))]),r("div",{staticClass:"home-shop-list-frame row-start-center"},e._l(e.items,(function(t,s){return r("div",{key:s,staticClass:"home-shop-item-frame row-between-center",on:{click:function(r){return e.$router.push("/shop/"+t._id)}}},[r("div",{staticClass:"shop-logo"},[r("VanImage",{attrs:{src:t.logo,width:"100%",height:"100%",fit:"cover"}})],1),r("div",{staticClass:"shop-info"},[r("div",{staticClass:"row-between-center"},[r("div",{staticClass:"shop-name omit"},[e._v(e._s(t.name))]),r("div",{staticClass:"shop-city"},[e._v(e._s(t.city))])]),r("div",{staticClass:"shop-rate"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"14",color:"#ffd21e",readonly:"","void-color":"#eee"},model:{value:t.rate,callback:function(r){e.$set(t,"rate",r)},expression:"item.rate"}})],1),r("div",{staticClass:"shop-time"},[e._v("营业时间："+e._s(t.stime)+" - "+e._s(t.etime))]),r("div",{staticClass:"shop-minprice"},[e._v("最低配送："+e._s(t.minprice)+"P")]),r("div",{staticClass:"shop-brief omit"},[e._v(e._s(t.brief))]),r("div",{staticClass:"shop-delivery-payment"},[-1!==t.payment.indexOf(0)?r("Tag",{attrs:{type:"success"}},[e._v("支持到付")]):e._e()],1)])])})),0),e.hasMore?r("div",{staticClass:"get-more row-center-center"},[r("Button",{staticStyle:{width:"150px"},attrs:{round:"",type:"primary",loading:e.loading},on:{click:function(t){return e.$emit("search")}}},[e._v("查看更多")])],1):e._e()])},Ae=[],Te=(r("5f1a"),r("a3e2")),Ne=[{name:"美食",icon:"/img/home/food.png"},{name:"生鲜",icon:"/img/home/vegetable.png"},{name:"超市",icon:"/img/home/cart.png"},{name:"服饰",icon:"/img/home/coat.png"},{name:"美妆",icon:"/img/home/cosmetics.png"},{name:"换汇",icon:"/img/home/bank.png"},{name:"娱乐",icon:"/img/home/ktv.png"},{name:"签证机票",icon:"/img/home/passport.png"},{name:"数码电器",icon:"/img/home/electronic.png"}],Pe=["现金到付","线上付款"],Fe=["商家配送","第三方配送"],ze=["P","CNY","USD","AED"],Be=["份","个","串","只","瓶","把","g","kg","斤","盒","包","粒","支","袋","组","例","件","双","条","套"],Ge={name:"ShopList",components:{VanImage:p["a"],Rate:Oe["a"],Tag:Te["a"],Button:m["a"]},props:["type","items","loading","hasMore"],computed:{title:function(){var e="商家列表";return Ne[this.type-1]&&(e=Ne[this.type-1].name+e),e}}},Ve=Ge,Ye=(r("fda8"),Object(D["a"])(Ve,Ue,Ae,!1,null,"1c8bcd01",null)),qe=Ye.exports,De={name:"Home",components:{VanImage:p["a"],Rate:Oe["a"],Popover:f["a"],ShopList:qe,Header:Le},computed:{user:function(){return this.$store.state.user}},data:function(){return{SERVICETYPE:Ne,PAYMENT:Pe,DELIVERY:Fe,showUserAction:!1,loading:!1,hasMore:!0,param:{page:1,rows:20,keywords:""},items:[]}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.search();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{search:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,V.show.getShops(e.param);case 3:if(s=t.sent,a=s.data,a.success){t.next=7;break}return t.abrupt("return",Notify({type:"danger",message:a.message}));case 7:e.loading=!1,a.data.length<e.param.rows&&(e.hasMore=!1),e.param.page++,(r=e.items).push.apply(r,Object(Re["a"])(a.data));case 11:case"end":return t.stop()}}),t)})))()},reset:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.items=[],e.param.page=1,e.search();case 3:case"end":return t.stop()}}),t)})))()},logout:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:C(null),e.showUserAction=!1,e.$store.dispatch("getUser");case 3:case"end":return t.stop()}}),t)})))()}}},Me=De,He=(r("cca3"),Object(D["a"])(Me,ke,ye,!1,null,"06ac87df",null)),Je=He.exports,We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame"},[r("Header"),r("div",{staticClass:"shop-list-frame"},[r("div",{staticClass:"zone-frame"},[r("ShopList",{attrs:{type:e.$route.params.type,items:e.items,loading:e.loading,hasMore:e.hasMore},on:{search:function(t){return e.search()}}})],1)])],1)},Ke=[],Qe={name:"Service",components:{VanImage:p["a"],Rate:Oe["a"],Header:Le,ShopList:qe},data:function(){return{items:[],loading:!1,hasMore:!0,param:{page:1,rows:20,type:this.$route.params.type}}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.search();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{search:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,V.show.getTypeShops(e.param);case 3:if(s=t.sent,a=s.data,a.success){t.next=7;break}return t.abrupt("return",Notify({type:"danger",message:a.message}));case 7:e.loading=!1,a.data.length<e.param.rows&&(e.hasMore=!1),e.param.page++,(r=e.items).push.apply(r,Object(Re["a"])(a.data));case 11:case"end":return t.stop()}}),t)})))()}}},Xe=Qe,Ze=(r("578f"),Object(D["a"])(Xe,We,Ke,!1,null,"19c34168",null)),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame"},[r("div",{staticClass:"page-banner",style:{"background-image":"url("+e.shop.back+")"}},[r("div",{staticClass:"banner-content"},[r("Header"),r("div",{staticClass:"shop-base-frame row-between-center"},[r("div",{staticClass:"shop-base-info row-start-center"},[r("VanImage",{attrs:{src:e.shop.logo,fit:"cover",round:"",width:"80",height:"80"}}),r("div",{staticClass:"shop-info"},[r("div",{staticClass:"shop-name"},[r("b",[e._v(e._s(e.shop.name))])]),r("div",{staticClass:"shop-rate"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"14",color:"#ffd21e",readonly:"","void-color":"#eee"},model:{value:e.shop.rate,callback:function(t){e.$set(e.shop,"rate",t)},expression:"shop.rate"}})],1)]),r("div",{staticClass:"shop-follow"},[r("div",{on:{click:function(t){e.following?e.unfollow():e.follow()}}},[e.following?r("Icon",{attrs:{name:"like",size:"20",color:"#fc6923"}}):r("Icon",{attrs:{name:"like-o",size:"20"}})],1),r("div",{class:[e.following?"follow":""]},[r("b",[e._v(e._s(e.following?"取消":"关注"))])])])],1),r("div",{staticClass:"shop-extra-info row-start-top"},[r("div",{staticClass:"extra-info-frame"},[e._m(0),r("div",{staticClass:"extra-info-value"},[r("b",[e._v(e._s(e.shop.minprice)+" "+e._s(e.CURRENCY[e.shop.currency]))])])]),r("div",{staticClass:"extra-info-frame"},[e._m(1),r("div",{staticClass:"extra-info-value"},e._l(e.shop.delivery,(function(t,s){return r("Tag",{key:s,staticClass:"tags",attrs:{type:"success"}},[e._v(e._s(e.DELIVERY[t]))])})),1)]),r("div",{staticClass:"extra-info-frame"},[e._m(2),r("div",{staticClass:"extra-info-value"},e._l(e.shop.payment,(function(t,s){return r("Tag",{key:s,staticClass:"tags",attrs:{type:"success"}},[e._v(e._s(e.PAYMENT[t]))])})),1)])])]),e.shop._id?r("div",{staticClass:"share-frame row-start-center"},[r("div",[e._v("分享至：")]),r("div",{staticClass:"share-to"},[r("ShareNetwork",{attrs:{network:"Telegram",url:e.url,title:e.shop.name,description:e.shop.brief,hashtags:""}},[r("VanImage",{attrs:{src:"/img/share/telegram.png",width:"30",height:"30"}})],1)],1),r("div",{staticClass:"share-to"},[r("ShareNetwork",{attrs:{network:"WhatsApp",url:e.url,title:e.shop.name,description:e.shop.brief,hashtags:""}},[r("VanImage",{attrs:{src:"/img/share/whatsapp.png",width:"30",height:"30"}})],1)],1),r("div",{staticClass:"share-to"},[r("ShareNetwork",{attrs:{network:"Line",url:e.url,title:e.shop.name,description:e.shop.brief,hashtags:""}},[r("VanImage",{attrs:{src:"/img/share/line.png",width:"30",height:"30"}})],1)],1)]):e._e()],1),r("div",{staticClass:"banner-mask"})]),r("div",{staticClass:"shop-tag-frame"},[r("div",{staticClass:"zone-frame row-start-center"},[r("div",{class:["shop-tag-item",0===e.active?"active":""],on:{click:function(t){e.active=0}}},[r("b",[e._v("所有商品")])]),r("div",{class:["shop-tag-item",1===e.active?"active":""],on:{click:function(t){e.active=1}}},[r("b",[e._v("商家信息")])]),r("div",{class:["shop-tag-item",2===e.active?"active":""],on:{click:function(t){e.active=2}}},[r("b",[e._v("用户点评")])])])]),r("div",{staticClass:"base-frame row-between-top"},[r("div",{staticClass:"base-frame-left"},[r("div",{staticClass:"shop-goods-frame",style:{display:0===e.active?"":"none"}},[r("div",{staticClass:"shop-class-list row-start-center"},e._l(e.classList,(function(t,s){return r("div",{key:s,class:["shop-class-item",e.class_active===t._id?"active":""],on:{click:function(r){e.class_active=t._id}}},[r("b",[e._v(e._s(t.name))])])})),0),r("div",{staticClass:"shop-goods-list row-between-top"},e._l(e.classGoodsList,(function(t,s){return r("div",{key:s,staticClass:"shop-goods-item row-between-top"},[r("VanImage",{attrs:{src:t.pics,fit:"cover",width:"40%",height:"130px","lazy-load":""},on:{click:function(r){return e.lookPics(t.pics)}}}),r("div",{staticClass:"goods-info"},[r("div",{staticClass:"goods-name"},[r("b",[e._v(e._s(t.code))]),e._v(" "),r("b",[e._v(e._s(t.name))])]),r("div",{staticClass:"goods-tags"},[e._l(t.tags,(function(t,s){return r("Tag",{key:s,staticClass:"tags",attrs:{type:"success"}},[e._v(e._s(t))])})),t.stop?r("Tag",{staticClass:"tags",attrs:{type:"danger"}},[e._v("已售完")]):e._e()],2),r("div",[r("div",{staticClass:"goods-price"},[r("b",[e._v(e._s(t.price)+e._s(e.CURRENCY[e.shop.currency])+"/"+e._s(1===t.count?"":t.count)+e._s(e.UNIT[t.unit]))])]),e.ordering||t.stop?e._e():r("div",{staticClass:"order-action row-start-center"},[r("div",{staticClass:"order-sub",on:{click:function(r){return e.order(t,!1)}}},[e._v("-")]),r("div",{staticClass:"order-num"},[e._v(e._s(e.orderList[t._id]?e.orderList[t._id]["count"]:0))]),r("div",{staticClass:"order-add",on:{click:function(r){return e.order(t,!0)}}},[e._v("+")])])])])],1)})),0)]),r("div",{staticClass:"shop-info-frame",style:{display:1===e.active?"":"none"}},[r("h1",[e._v("店铺照片")]),r("div",{staticClass:"shop-pics-list row-start-center"},e._l(e.shop.pics,(function(e,t){return r("div",{key:t,staticClass:"shop-pics-item"},[r("VanImage",{attrs:{src:e,fit:"cover",width:"100%",height:"100%"}})],1)})),0),r("div",{staticClass:"shop-info-item row-start-top"},[r("Icon",{attrs:{name:"shop",size:"22"}}),r("div",{staticClass:"shop-info-text row-start-top"},[e._v("店铺介绍：")]),r("div",{staticStyle:{"max-width":"500px"}},[e._v(e._s(e.shop.brief))])],1),r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"map-marked",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("店铺地址："+e._s(e.shop.city)+" - "+e._s(e.shop.address))])],1),r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"underway",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("营业时间："+e._s(e.shop.stime)+" - "+e._s(e.shop.etime))])],1),r("br"),r("br"),r("h1",[e._v("联系方式")]),e.shop.phone?r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"phone",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("商家电话："+e._s(e.shop.phone))])],1):e._e(),e.shop.wechat?r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"wechat",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("商家微信："+e._s(e.shop.wechat))])],1):e._e(),e.shop.telegram?r("div",{staticClass:"shop-info-item row-start-center"},[r("VanImage",{attrs:{src:"/img/telegram.svg",fit:"cover",width:"20px",height:"20px"}}),r("div",{staticClass:"shop-info-text"},[e._v("商家飞机："),r("a",{attrs:{href:"https://t.me/"+e.shop.telegram,target:"_blank"}},[e._v(e._s(e.shop.telegram))])])],1):e._e()]),r("div",{staticClass:"shop-comment-frame",style:{display:2===e.active?"":"none"}},[r("Review",{attrs:{shopid:e.$route.params._id}})],1)]),r("div",{staticClass:"base-frame-right"},[e._m(3),r("div",{staticClass:"shop-discount-frame"},[e._m(4),r("div",{staticClass:"list row-start-top"},[r("div",{staticClass:"discount-text"},[e._v(e._s(e.shop.discount))])]),e.shop.discount?e._e():r("div",{staticClass:"list"},[e._v(" 暂无优惠信息 ")])]),r("div",{staticClass:"shop-discount-frame"},[e._m(5),r("div",{staticClass:"list row-start-top"},[r("div",{staticClass:"discount-text"},[e._v(e._s(e.shop.p_discount))])]),e.shop.discount?e._e():r("div",{staticClass:"list"},[e._v(" 暂无平台优惠信息 ")])]),r("div",{staticClass:"shop-notice-frame"},[e._m(6),r("div",{staticClass:"list"},[e._v(" "+e._s(e.shop.notice)+" ")])])]),r("div",{staticClass:"shopping-cart",on:{click:function(t){return e.showCartAtion()}}},[r("Badge",{attrs:{content:e.orderCount}},[r("VanImage",{attrs:{src:"/img/shop/shopping-cart.png",fit:"cover",width:"60px",height:"60px"}})],1)],1),r("Overlay",{attrs:{show:e.showCart},on:{click:function(t){e.showCart=!1}}},[r("div",{staticClass:"row-center-center"},[r("div",{staticClass:"order-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-base"},[r("p",[e._v("请选择收货地址:")]),r("div",{staticClass:"uinfo-list"},[r("RadioGroup",{model:{value:e.uinfo,callback:function(t){e.uinfo=t},expression:"uinfo"}},e._l(e.infoList,(function(t,s){return r("div",{key:s,staticClass:"uinfo-item"},[r("Radio",{attrs:{name:t}},[r("div",{staticClass:"row-start-center"},[e._v("称呼："+e._s(t.name)+" ｜ 地址："+e._s(t.address))]),r("br"),r("div",{staticClass:"row-start-center"},[e._v("电话："+e._s(t.phone)+" ｜ 微信："+e._s(t.wechat)+" ｜ 飞机：@"+e._s(t.telegram))])])],1)})),0),e.infoList.length<6?r("div",{staticClass:"uinfo-item row-start-center",on:{click:function(t){return e.$store.dispatch("setAddress",{show:!0,info:null})}}},[r("Icon",{attrs:{name:"add-o",size:"20"}}),r("span",{staticStyle:{"margin-left":"10px",cursor:"pointer"}},[e._v("新增地址")])],1):e._e()],1)]),r("div",{staticClass:"order-base row-between-center"},[r("p",[e._v("请选择付款方式:")]),r("RadioGroup",{model:{value:e.orderInfo.payment,callback:function(t){e.$set(e.orderInfo,"payment",t)},expression:"orderInfo.payment"}},[r("div",{staticClass:"row-start-center"},e._l(e.shop.payment,(function(t,s){return r("div",{staticClass:"order-payment"},[r("Radio",{attrs:{name:t}},[e._v(e._s(e.PAYMENT[t]))])],1)})),0)])],1),r("div",{staticClass:"order-list"},e._l(e.orderList,(function(t,s){return r("div",{key:s,staticClass:"row-between-top"},[r("div",{staticClass:"order-item row-start-top"},[r("div",{staticClass:"order-item-pics",on:{click:function(r){return e.lookPics(t.info.pics)}}},[r("VanImage",{attrs:{src:t.info.pics,fit:"cover",width:"100px",height:"60px"}})],1),r("div",{staticClass:"order-item-name"},[e._v(" "+e._s(t.info.code)+" "+e._s(t.info.name)+" * "+e._s(t.count)+" ")])]),r("div",[e._v(" "+e._s(t.amount)+" "+e._s(e.CURRENCY[e.shop.currency])+" ")])])})),0),r("div",{staticClass:"order-memo"},[r("Field",{attrs:{rows:"2",autosize:"",label:"客户备注",type:"textarea",maxlength:"150",placeholder:"可备注您的要求，比如口味，忌口等","show-word-limit":""},model:{value:e.orderInfo.memo,callback:function(t){e.$set(e.orderInfo,"memo",t)},expression:"orderInfo.memo"}})],1),r("div",{staticClass:"order-base discount"},[r("b",[e._v("商家优惠："+e._s(e.shop.discount))])]),r("div",{staticClass:"order-base discount"},[r("b",[e._v("平台优惠："+e._s(e.shop.p_discount))])]),r("div",{staticClass:"order-create row-between-center"},[r("div",{staticClass:"order-amount"},[r("b",[e._v("商品总计： "+e._s(e.orderAmount)+" "+e._s(e.CURRENCY[e.shop.currency]))])]),r("div",[r("Button",{staticStyle:{width:"150px"},attrs:{round:"",type:"info",disabled:!e.orderAmount||e.orderAmount<e.shop.minprice},on:{click:function(t){return e.createOrder()}}},[e._v(" 生成订单 ")])],1)])])])]),r("Overlay",{attrs:{show:e.showCartNoLogin},on:{click:function(t){e.showCartNoLogin=!1}}},[r("div",{staticClass:"row-center-center"},[r("div",{staticClass:"order-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-base"},[r("p",[e._v("请填写收货信息:")]),r("div",{staticClass:"uinfo-list"},[r("div",{staticClass:"row-start-center"},[r("Field",{attrs:{placeholder:"您的称呼",required:""},model:{value:e.uinfoNoLogin.name,callback:function(t){e.$set(e.uinfoNoLogin,"name",t)},expression:"uinfoNoLogin.name"}})],1),r("br"),r("div",{staticClass:"row-start-center"},[r("Field",{attrs:{placeholder:"您的收货地址",required:""},model:{value:e.uinfoNoLogin.address,callback:function(t){e.$set(e.uinfoNoLogin,"address",t)},expression:"uinfoNoLogin.address"}})],1),r("br"),r("div",{staticClass:"row-start-center"},[r("Field",{attrs:{placeholder:"您的电话号",type:"number",required:""},model:{value:e.uinfoNoLogin.phone,callback:function(t){e.$set(e.uinfoNoLogin,"phone",t)},expression:"uinfoNoLogin.phone"}})],1),r("br"),r("div",{staticClass:"row-start-center"},[r("Field",{attrs:{placeholder:"您的微信号"},model:{value:e.uinfoNoLogin.wechat,callback:function(t){e.$set(e.uinfoNoLogin,"wechat",t)},expression:"uinfoNoLogin.wechat"}})],1),r("br"),r("div",{staticClass:"row-start-center"},[r("Field",{attrs:{placeholder:"您的飞机号，不需要带@",formatter:e.checkTelgram},model:{value:e.uinfoNoLogin.telegram,callback:function(t){e.$set(e.uinfoNoLogin,"telegram",t)},expression:"uinfoNoLogin.telegram"}})],1)])]),r("div",{staticClass:"order-base row-between-center"},[r("p",[e._v("请选择付款方式:")]),r("RadioGroup",{model:{value:e.orderInfo.payment,callback:function(t){e.$set(e.orderInfo,"payment",t)},expression:"orderInfo.payment"}},[r("div",{staticClass:"row-start-center"},e._l(e.shop.payment,(function(t,s){return r("div",{staticClass:"order-payment"},[r("Radio",{attrs:{name:t}},[e._v(e._s(e.PAYMENT[t]))])],1)})),0)])],1),r("div",{staticClass:"order-list"},e._l(e.orderList,(function(t,s){return r("div",{key:s,staticClass:"row-between-top"},[r("div",{staticClass:"order-item row-start-top"},[r("div",{staticClass:"order-item-pics",on:{click:function(r){return e.lookPics(t.info.pics)}}},[r("VanImage",{attrs:{src:t.info.pics,fit:"cover",width:"100px",height:"60px"}})],1),r("div",{staticClass:"order-item-name"},[e._v(" "+e._s(t.info.code)+" "+e._s(t.info.name)+" * "+e._s(t.count)+" ")])]),r("div",[e._v(" "+e._s(t.amount)+" "+e._s(e.CURRENCY[e.shop.currency])+" ")])])})),0),r("div",{staticClass:"order-memo"},[r("Field",{attrs:{rows:"2",autosize:"",label:"客户备注",type:"textarea",maxlength:"150",placeholder:"可备注您的要求，比如口味，忌口等","show-word-limit":""},model:{value:e.orderInfo.memo,callback:function(t){e.$set(e.orderInfo,"memo",t)},expression:"orderInfo.memo"}})],1),r("div",{staticClass:"order-base discount"},[r("b",[e._v("商家优惠："+e._s(e.shop.discount))])]),r("div",{staticClass:"order-base discount"},[r("b",[e._v("平台优惠："+e._s(e.shop.p_discount))])]),r("div",{staticClass:"order-create row-between-center"},[r("div",{staticClass:"order-amount"},[r("b",[e._v("商品总计： "+e._s(e.orderAmount)+" "+e._s(e.CURRENCY[e.shop.currency]))])]),r("div",[r("Button",{staticStyle:{width:"150px"},attrs:{round:"",type:"info",disabled:!e.orderAmount||e.orderAmount<e.shop.minprice},on:{click:function(t){return e.createOrderNoLogin()}}},[e._v(" 生成游客订单 ")])],1)])])])])],1)])},rt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b",[e._v("起送价")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b",[e._v("配送方式")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b",[e._v("付款方式")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shop-notice-title"},[r("b",[e._v("商家公告")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("b",[e._v("优惠")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("b",[e._v("平台优惠")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"title"},[r("b",[e._v("公告")])])}],st=(r("4662"),r("28a2")),at=(r("e17f"),r("2241")),nt=(r("4ddd"),r("9f14")),it=(r("a44c"),r("e27c")),ot=(r("18e9"),r("471a")),ct=(r("c3a6"),r("ad06")),ut=(r("4de4"),r("99af"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"review-frame"},[e._l(e.items,(function(t,s){return r("div",{key:s,staticClass:"review-item row-start-top"},[r("div",{staticClass:"user-info"},[r("VanImage",{attrs:{src:t.user.avatar,width:"50",height:"50",fit:"cover",round:""}}),r("div",[e._v(e._s(t.user.name))])],1),r("div",{staticClass:"review-info"},[r("div",{staticClass:"review-rate"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"14",color:"#ffd21e",readonly:"","void-color":"#eee"},model:{value:t.rate,callback:function(r){e.$set(t,"rate",r)},expression:"item.rate"}})],1),r("div",{staticClass:"review-pics row-start-center"},e._l(t.pics,(function(t,s){return r("div",{key:s,staticClass:"pic-item",on:{click:function(r){return e.lookPics(t)}}},[r("VanImage",{attrs:{src:t,width:"100%",height:"100%",fit:"cover"}})],1)})),0),r("div",{staticClass:"review-text"},[e._v(" "+e._s(t.text)+" ")]),r("div",{staticClass:"review-time"},[e._v(" "+e._s(e._f("formatTime")(t.created_at))+" ")]),r("div",{staticClass:"review-action row-start-center"},[t.ownerid!==e.user._id||t.reply?e._e():r("div",{staticClass:"action-item"},[r("a",{on:{click:function(r){e.reply._id=t._id,e.reply.key=s,e.reply.show=!0}}},[e._v("回复评论")])]),e._v(" "),t.user._id===e.user._id?r("div",{staticClass:"action-item"},[r("a",{on:{click:function(r){return e.delReview(t._id,s)}}},[e._v("删除评论")])]):e._e()]),t.reply&&t.ownerid===e.user._id?r("div",[r("div",{staticClass:"review-reply"},[r("b",[e._v("商家回复：")]),e._v(e._s(t.reply)+" ")]),r("div",{staticClass:"review-action row-start-center"},[r("div",{staticClass:"action-item"},[r("a",{on:{click:function(r){return e.delReply(t._id,s)}}},[e._v("删除回复")])])])]):e._e()])])})),e.hasMore?r("div",{staticClass:"review-more row-center-center"},[r("Button",{staticStyle:{width:"150px"},attrs:{round:"",type:"primary",loading:e.loading},on:{click:function(t){return e.getReview()}}},[e._v("查看更多")])],1):e._e(),r("Overlay",{attrs:{show:e.reply.show,"z-index":"150"}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.reply.show=!1}}},[r("div",{staticClass:"review-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-text"},[r("h3",[e._v("回复评价")]),r("div",{staticClass:"review-item"},[r("Field",{attrs:{rows:"3",autosize:"",type:"textarea",placeholder:"请输入回复内容",maxlength:"150","show-word-limit":""},model:{value:e.reply.text,callback:function(t){e.$set(e.reply,"text",t)},expression:"reply.text"}})],1)]),r("div",{staticClass:"review-action row-start-center"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.replyReview()}}},[e._v("提交评价")]),r("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"warning"},on:{click:function(t){return e.resetReply()}}},[e._v("取消提交")])],1)])])])],2)}),dt=[],lt=r("5530"),pt=(r("a434"),{name:"Review",props:["shopid"],components:{VanImage:p["a"],Rate:Oe["a"],Button:m["a"],Overlay:v["a"],Field:h["a"]},filters:{formatTime:function(e){return R(e)}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getReview();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{params:{page:1,rows:50},items:[],hasMore:!0,loading:!1,reply:{_id:"",text:"",key:"",show:!1}}},computed:{user:function(){var e=this.$store.state.user?this.$store.state.user:{};return e}},methods:{getReview:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,V.review.getReview(Object(lt["a"])(Object(lt["a"])({},e.params),{},{shopid:e.shopid}));case 3:if(s=t.sent,a=s.data,e.loading=!1,a.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 8:e.params.page++,a.data.length<e.params.rows&&(e.hasMore=!1),(r=e.items).push.apply(r,Object(Re["a"])(a.data));case 11:case"end":return t.stop()}}),t)})))()},lookPics:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(st["a"])({images:[e],closeable:!0});case 1:case"end":return t.stop()}}),t)})))()},delReview:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:at["a"].confirm({title:"删除评价",message:"确认删除该评价吗？删除后不可恢复"}).then(Object(l["a"])(regeneratorRuntime.mark((function s(){var a,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,V.review.delReview(e);case 2:if(a=s.sent,n=a.data,n.success){s.next=6;break}return s.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:return r.items.splice(t,1),s.abrupt("return",Object(d["a"])({type:"success",message:n.message}));case 8:case"end":return s.stop()}}),s)})))).catch((function(){}));case 1:case"end":return s.stop()}}),s)})))()},replyReview:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.review.replyReview(e.reply._id,e.reply.text);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:return e.items[e.reply.key].reply=e.reply.text,e.resetReply(),t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 9:case"end":return t.stop()}}),t)})))()},delReply:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:at["a"].confirm({title:"删除回复",message:"确认删除该回复吗？"}).then(Object(l["a"])(regeneratorRuntime.mark((function s(){var a,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,V.review.delReply(e);case 2:if(a=s.sent,n=a.data,n.success){s.next=6;break}return s.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:return r.items[t].reply="",s.abrupt("return",Object(d["a"])({type:"success",message:n.message}));case 8:case"end":return s.stop()}}),s)})))).catch((function(){}));case 1:case"end":return s.stop()}}),s)})))()},resetReply:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.reply={_id:"",text:"",key:"",show:!1};case 1:case"end":return t.stop()}}),t)})))()}}}),mt=pt,ft=(r("67b7"),Object(D["a"])(mt,ut,dt,!1,null,"0f211653",null)),ht=ft.exports,vt=r("bd8c"),gt=r.n(vt);a["a"].use(gt.a);var wt,bt,_t,xt={name:"Shop",components:{VanImage:p["a"],Rate:Oe["a"],Header:Le,Review:ht,Tag:Te["a"],Icon:ct["a"],Badge:ot["a"],Overlay:v["a"],Field:h["a"],Button:m["a"],RadioGroup:it["a"],Radio:nt["a"]},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getShop();case 3:return t.next=5,e.isfollow();case 5:e.$store.dispatch("setLoading",!1);case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{PAYMENT:Pe,DELIVERY:Fe,CURRENCY:ze,UNIT:Be,active:0,shop:{},classList:[],goodsList:[],following:!1,class_active:"",ordering:!1,showCart:!1,orderList:{},uinfo:"",showCartNoLogin:!1,uinfoNoLogin:{name:"",address:"",phone:"",wechat:"",telegram:""},orderInfo:{uinfo:"",memo:"",payment:0,items:[],total:0,currency:"",shopid:""},url:window.location.href}},computed:{user:function(){return this.$store.state.user},infoList:function(){return this.$store.state.infoList},classGoodsList:function(){var e=this,t=this.goodsList.filter((function(t,r){return-1!==t.classid.indexOf(e.class_active)}));return t},orderCount:function(){var e=0;for(var t in this.ordering,this.orderList)e+=this.orderList[t].count;return e},orderAmount:function(){var e=0;for(var t in this.ordering,this.orderList)e+=this.orderList[t].amount;return e}},methods:{isfollow:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.follow.isfollow(e.$route.params._id);case 2:r=t.sent,s=r.data,s.success&&(e.following=!!s.data);case 5:case"end":return t.stop()}}),t)})))()},getShop:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.show.getShop(e.$route.params._id);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:a=s.data,n=a.shop,i=a.classList,o=a.goodsList,e.shop=n,e.classList=i,e.goodsList=o,i.length&&(e.class_active=i[0]._id);case 11:case"end":return t.stop()}}),t)})))()},order:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r.ordering=!0,r.orderList[e._id]||(r.orderList[e._id]={count:0,amount:0,info:{}}),!t){s.next=8;break}r.orderList[e._id]["count"]=r.orderList[e._id]["count"]+1,r.orderList[e._id]["amount"]=r.orderList[e._id]["count"]*e.price,r.orderList[e._id]["info"]={name:e.name,code:e.code,pics:e.pics},s.next=15;break;case 8:if(!(r.orderList[e._id]["count"]<=1)){s.next=12;break}return delete r.orderList[e._id],r.ordering=!1,s.abrupt("return");case 12:r.orderList[e._id]["count"]=r.orderList[e._id]["count"]-1,r.orderList[e._id]["amount"]=r.orderList[e._id]["count"]*e.price,r.orderList[e._id]["info"]={name:e.name,code:e.code,pics:e.pics};case 15:r.ordering=!1;case 16:case"end":return s.stop()}}),s)})))()},createOrder:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r in e.orderInfo.currency=e.shop.currency,e.orderInfo.items=[],e.orderList)e.orderInfo.items.push(e.orderList[r]);if(e.orderInfo.total=e.orderAmount,e.orderInfo.shopid=e.shop._id,e.uinfo){t.next=7;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请选择收货地址"}));case 7:if(e.orderInfo.total){t.next=9;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请选择购买的商品"}));case 9:return e.orderInfo.uinfo="称呼：".concat(e.uinfo.name,"\n地址：").concat(e.uinfo.address,"\n").concat(e.uinfo.phone?"电话："+e.uinfo.phone+"\n":"").concat(e.uinfo.wechat?"微信："+e.uinfo.wechat+"\n":"").concat(e.uinfo.telegram?"飞机：@"+e.uinfo.telegram:""),t.next=12,V.order.newOrder(e.orderInfo);case 12:if(s=t.sent,a=s.data,a.success){t.next=16;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 16:e.orderInfo.orderId=a.orderId,Object(d["a"])({type:"success",message:a.message}),e.createOrderText(),e.showCart=!1;case 20:case"end":return t.stop()}}),t)})))()},createOrderNoLogin:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r in e.orderInfo.currency=e.shop.currency,e.orderInfo.items=[],e.orderList)e.orderInfo.items.push(e.orderList[r]);if(e.orderInfo.total=e.orderAmount,e.orderInfo.shopid=e.shop._id,e.uinfoNoLogin.name&&e.uinfoNoLogin.address&&e.uinfoNoLogin.phone){t.next=7;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请选择收货信息不完善"}));case 7:if(e.orderInfo.total){t.next=9;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请选择购买的商品"}));case 9:return e.orderInfo.uinfo="称呼：".concat(e.uinfoNoLogin.name,"\n地址：").concat(e.uinfoNoLogin.address,"\n").concat(e.uinfoNoLogin.phone?"电话："+e.uinfoNoLogin.phone+"\n":"").concat(e.uinfoNoLogin.wechat?"微信："+e.uinfoNoLogin.wechat+"\n":"").concat(e.uinfoNoLogin.telegram?"飞机：@"+e.uinfoNoLogin.telegram:""),t.next=12,V.order.newOrderAgency(e.orderInfo);case 12:if(s=t.sent,a=s.data,a.success){t.next=16;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 16:e.orderInfo.orderId=a.orderId,Object(d["a"])({type:"success",message:a.message}),e.createOrderText(),e.showCartNoLogin=!1,e.orderList={},e.orderInfo={uinfo:"",memo:"",payment:0,items:[],total:0,currency:"",shopid:""};case 22:case"end":return t.stop()}}),t)})))()},createOrderText:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i,o,c,u,d,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r=e.orderInfo,s=r.items,a=r.total,n=r.currency,i=r.uinfo,o=r.payment,c=r.memo,u=r.orderId,d="点单商品：\n\n",l=0;l<s.length;l++)d+="".concat(l+1,"：").concat(s[l].info.code,"*").concat(s[l].count,"(").concat(s[l].info.name,") ").concat(s[l].amount,"\n");d+="\n总计：".concat(a," ").concat(e.CURRENCY[n],"\n"),d+="\n付款方式：".concat(e.PAYMENT[o],"\n"),d+="\n联系方式：\n\n".concat(i,"\n"),d+="\n备注：".concat(c,"\n"),d+="\n商家优惠：".concat(e.shop.discount,"\n"),d+="\n平台优惠：".concat(e.shop.p_discount,"\n"),d+="\n订单码：".concat(u,"\n"),y(d),alert("订单信息复制成功！"),at["a"].alert({title:"发送订单信息给商家",message:"订单信息已经复制到您的剪切板，请点击 通知商家 并粘贴订单信息给商家",confirmButtonText:"通知商家",theme:"round-button"}).then((function(){window.open("https://t.me/".concat(e.shop.telegram)),e.user&&e.$router.push("/user/2")}));case 13:case"end":return t.stop()}}),t)})))()},showCartAtion:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user){t.next=3;break}return e.showCartNoLogin=!0,t.abrupt("return");case 3:if(e.user)for(r in e.showCart=!0,e.infoList)e.infoList[r].default&&(e.uinfo=e.infoList[r]);else e.$store.dispatch("setAccount","login");case 4:case"end":return t.stop()}}),t)})))()},follow:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user){t.next=2;break}return t.abrupt("return",e.$store.dispatch("setAccount","login"));case 2:return t.next=4,V.follow.follow(e.$route.params._id);case 4:if(r=t.sent,s=r.data,s.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 8:return e.following=!0,t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 10:case"end":return t.stop()}}),t)})))()},unfollow:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user){t.next=2;break}return t.abrupt("return",e.$store.dispatch("setAccount","login"));case 2:return t.next=4,V.follow.unfollow(e.$route.params._id);case 4:if(r=t.sent,s=r.data,s.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 8:return e.following=!1,t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 10:case"end":return t.stop()}}),t)})))()},lookPics:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(st["a"])({images:[e],closeable:!0});case 1:case"end":return t.stop()}}),t)})))()},checkTelgram:function(e){return e.replace(/[^\w_]/g,"")}}},Ct=xt,kt=(r("1e0b"),Object(D["a"])(Ct,tt,rt,!1,null,"3894a374",null)),yt=kt.exports,Rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame"},[r("Header"),r("div",{staticClass:"user-center-frame row-between-top"},[r("div",{staticClass:"center-tab"},[r("div",{class:["center-tab-item",0===e.active?"active":""],on:{click:function(t){return e.$router.push("/user/0")}}},[r("b",[e._v("账户信息")])]),r("div",{class:["center-tab-item",1===e.active?"active":""],on:{click:function(t){return e.$router.push("/user/1")}}},[r("b",[e._v("地址管理")])]),r("div",{class:["center-tab-item",2===e.active?"active":""],on:{click:function(t){return e.$router.push("/user/2")}}},[r("b",[e._v("我的订单")])]),r("div",{class:["center-tab-item",3===e.active?"active":""],on:{click:function(t){return e.$router.push("/user/3")}}},[r("b",[e._v("关注的店")])]),r("div",{class:["center-tab-item",4===e.active?"active":""],on:{click:function(t){return e.$router.push("/user/4")}}},[r("b",[e._v("我的店铺")])])]),r("div",{staticClass:"center-info"},[0===e.active?r("div",{staticClass:"center-info-item"},[r("div",{staticClass:"row-start-center user-info-item"},[r("div",{staticClass:"info-item-name"},[e._v("账号")]),r("div",{staticClass:"info-item-value"},[e._v(e._s(e.user.account))])]),r("div",{staticClass:"row-start-center user-info-item"},[r("div",{staticClass:"info-item-name"},[e._v("头像")]),r("div",{staticClass:"info-item-value"},[e.edit?r("VanImage",{attrs:{src:e.editInfo.avatar,round:"",width:"50px",height:"50px"}}):r("VanImage",{attrs:{src:e.user.avatar,round:"",width:"50px",height:"50px"}}),r("div",[r("Upload",{attrs:{type:"avatar",single:"getAvatarUrl"},on:{getUrl:e.getAvatarUrl}},[e.edit?r("Button",{attrs:{type:"info",size:"mini"}},[e._v("更换头像")]):e._e()],1)],1)],1)]),r("div",{staticClass:"row-start-center user-info-item"},[r("div",{staticClass:"info-item-name"},[e._v("昵称")]),e.edit?r("div",{staticClass:"info-item-value"},[r("Field",{staticStyle:{padding:"0",border:"1px solid gray"},attrs:{placeholder:"更新昵称"},model:{value:e.editInfo.name,callback:function(t){e.$set(e.editInfo,"name",t)},expression:"editInfo.name"}})],1):r("div",{staticClass:"info-item-value"},[e._v(e._s(e.user.name))])]),e.edit?r("div",{staticClass:"row-start-center user-info-item"},[r("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.updateUser()}}},[e._v("更改信息")]),r("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",size:"small"},on:{click:function(t){e.edit=!1}}},[e._v("放弃更改")])],1):r("div",{staticClass:"row-start-center user-info-item"},[r("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.editUser()}}},[e._v("修改信息")])],1)]):e._e(),1===e.active?r("div",{staticClass:"center-info-item"},[r("div",{staticClass:"address-list-frame row-start-center"},[e._l(e.infoList,(function(t,s){return r("div",{key:s,staticClass:"address-item"},[r("div",{staticClass:"row-between-center"},[r("div",{staticClass:"info-name"},[r("b",[e._v(e._s(t.name))]),e._v(" "),t.default?r("span",{staticStyle:{"font-size":"14px"}},[e._v("(默认地址)")]):e._e()]),r("div",[r("span",[r("a",{on:{click:function(r){return e.$store.dispatch("setAddress",{show:!0,info:t})}}},[e._v("修改")])]),e._v(" "),t.default?e._e():r("span",[r("a",{on:{click:function(r){return e.setDefault(t._id)}}},[e._v("设为默认")])]),e._v(" "),r("span",[r("a",{on:{click:function(r){return e.delInfo(t._id)}}},[e._v("删除")])])])]),r("div",{staticClass:"info-address"},[e._v(" "+e._s(t.address)+" ")])])})),e.infoList.length<6?r("div",{staticClass:"address-item row-center-center",on:{click:function(t){return e.$store.dispatch("setAddress",{show:!0,info:null})}}},[r("Icon",{attrs:{name:"add-o",size:"50"}})],1):e._e()],2)]):e._e(),2===e.active?r("div",{staticClass:"center-info-item"},[r("UserOrder")],1):e._e(),3===e.active?r("div",{staticClass:"center-info-item"},[r("UserFollow")],1):e._e(),4===e.active?r("div",{staticClass:"center-info-item"},[r("UserShops")],1):e._e(),5===e.active?r("div",{staticClass:"center-info-item"},[r("ShopOrder")],1):e._e()])])],1)},Ot=[],jt=(r("a9e3"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload-frame",on:{click:function(t){return e.selectImg()}}},[e._t("default"),r("input",{staticStyle:{display:"none"},attrs:{id:e.single,type:"file",accept:"image/*"},on:{change:function(t){return e.getImg(t)}}})],2)}),It=[],Et={name:"Upload",props:["type","single"],components:{Notify:d["a"]},methods:{selectImg:function(){if(!this.single)return Object(d["a"])({type:"danger",message:"系统错误，请注意图片标示"});document.getElementById(this.single).click()},getImg:function(e){var t=e.target.files[0];if(e.target.value="",!t)return Object(d["a"])({type:"danger",message:"请选择图片"});if(t.size>3e5)return Object(d["a"])({type:"danger",message:"图片大小不得超过300kb"});if(t.size>15e4&&"goods"===this.type)return Object(d["a"])({type:"danger",message:"商品图片大小不得超过150kb"});var r=this,s=new FileReader;s.readAsDataURL(t),s.onload=function(){r.upload(this.result)}},upload:function(e){var t=this;V.common.uploadImg(e,this.type).then((function(e){var r=e.data;r.success?t.$emit("getUrl",r.data):Object(d["a"])({type:"danger",message:r.message})}))}}},$t=Et,St=Object(D["a"])($t,jt,It,!1,null,null,null),Lt=St.exports,Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{on:{click:function(t){return e.$emit("close")}}},[r("Overlay",{attrs:{show:!0,"z-index":"100"}},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"info-title"},[r("h1",[e._v("编辑商铺")])]),r("div",{staticClass:"input-frame"},[r("RadioGroup",{model:{value:e.shop.type,callback:function(t){e.$set(e.shop,"type",t)},expression:"shop.type"}},[r("div",{staticClass:"row-start-center shop-type"},[r("div",[e._v("店铺类型")]),e._l(e.SERVICETYPE,(function(t,s){return r("span",{key:s,staticStyle:{"margin-left":"20px"}},[r("Radio",{attrs:{name:s+1}},[e._v(e._s(t.name))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"店铺名称",placeholder:"请输入店铺名称"},model:{value:e.shop.name,callback:function(t){e.$set(e.shop,"name",t)},expression:"shop.name"}})],1),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"row-start-center pics-frame"},[r("div",[e._v("店铺LOGO")]),r("div",{staticClass:"logo-frame row-center-center"},[r("Upload",{attrs:{type:"shop",single:"getLogoUrl"},on:{getUrl:e.getLogoUrl}},[r("VanImage",{attrs:{src:e.shop.logo,fit:"cover",width:"100px",height:"100px"}})],1)],1)])]),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"row-start-center pics-frame"},[r("div",[e._v("店铺背景")]),r("div",{staticClass:"back-frame row-center-center"},[r("Upload",{attrs:{type:"shop",single:"getBackUrl"},on:{getUrl:e.getBackUrl}},[r("VanImage",{attrs:{src:e.shop.back,fit:"cover",width:"600px",height:"150px"}})],1)],1)])]),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"row-start-center pics-frame"},[r("div",[e._v("店铺环境")]),r("div",{staticClass:"row-start-center shop-img-frame"},[e._l(e.shop.pics,(function(t,s){return r("div",{key:s,staticClass:"shop-img-item row-center-center"},[r("span",{staticClass:"del-pics",on:{click:function(t){return e.delPics(s)}}},[r("Icon",{attrs:{name:"cross",size:"20",color:"red"}})],1),r("VanImage",{attrs:{src:t,fit:"cover",width:"180px",height:"100px"}})],1)})),r("Upload",{attrs:{type:"shop",single:"getPicskUrl"},on:{getUrl:e.getPicsUrl}},[e.shop.pics.length<6?r("div",{staticClass:"shop-img-item row-center-center"},[r("Icon",{attrs:{name:"add-o",size:"50"}})],1):e._e()])],2)])]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"店铺介绍",placeholder:"请输入店铺介绍",type:"textarea",rows:"3",autosize:"",maxlength:"300","show-word-limit":""},model:{value:e.shop.brief,callback:function(t){e.$set(e.shop,"brief",t)},expression:"shop.brief"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"开始营业",placeholder:"请输入开始营业时间 格式如 08:00"},model:{value:e.shop.stime,callback:function(t){e.$set(e.shop,"stime",t)},expression:"shop.stime"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"结束营业",placeholder:"请输入开始结束时间 格式如 23:30"},model:{value:e.shop.etime,callback:function(t){e.$set(e.shop,"etime",t)},expression:"shop.etime"}})],1),r("div",{staticClass:"input-frame"},[r("CheckboxGroup",{model:{value:e.shop.payment,callback:function(t){e.$set(e.shop,"payment",t)},expression:"shop.payment"}},[r("div",{staticClass:"row-start-center checkbox-type"},[r("div",[e._v("付款方式")]),e._l(e.PAYMENT,(function(t,s){return r("span",{key:s,staticStyle:{"margin-left":"20px"}},[r("Checkbox",{attrs:{name:s,shape:"square"}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("CheckboxGroup",{model:{value:e.shop.delivery,callback:function(t){e.$set(e.shop,"delivery",t)},expression:"shop.delivery"}},[r("div",{staticClass:"row-start-center checkbox-type"},[r("div",[e._v("配送方式")]),e._l(e.DELIVERY,(function(t,s){return r("span",{key:s,staticStyle:{"margin-left":"20px"}},[r("Checkbox",{attrs:{name:s,shape:"square"}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",type:"number",label:"最低起送",placeholder:"请输入最低的购买价格"},model:{value:e.shop.minprice,callback:function(t){e.$set(e.shop,"minprice",t)},expression:"shop.minprice"}})],1),r("div",{staticClass:"input-frame"},[r("RadioGroup",{model:{value:e.shop.currency,callback:function(t){e.$set(e.shop,"currency",t)},expression:"shop.currency"}},[r("div",{staticClass:"row-start-center shop-type"},[r("div",[e._v("默认货币")]),e._l(e.CURRENCY,(function(t,s){return r("span",{key:s,staticStyle:{"margin-left":"20px"}},[r("Radio",{attrs:{name:s}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"所在城市",placeholder:"所在的城市，英文拼写如：makati、passy"},model:{value:e.shop.city,callback:function(t){e.$set(e.shop,"city",t)},expression:"shop.city"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"店铺详址",placeholder:"请输入店铺的详细地址"},model:{value:e.shop.address,callback:function(t){e.$set(e.shop,"address",t)},expression:"shop.address"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"店铺公告",placeholder:"请输入店铺的公告信息"},model:{value:e.shop.notice,callback:function(t){e.$set(e.shop,"notice",t)},expression:"shop.notice"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"店铺优惠",placeholder:"请输入店铺的优惠信息",type:"textarea",rows:"3",autosize:""},model:{value:e.shop.discount,callback:function(t){e.$set(e.shop,"discount",t)},expression:"shop.discount"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"平台优惠",placeholder:"此优惠仅在本平台才有的优惠，本平台免费使用，商户们可适当将推广费用节约出来进行对客户返利，从而增加客户粘性",type:"textarea",rows:"3",autosize:""},model:{value:e.shop.p_discount,callback:function(t){e.$set(e.shop,"p_discount",t)},expression:"shop.p_discount"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"商家手机",placeholder:"请输入联系用的手机号"},model:{value:e.shop.phone,callback:function(t){e.$set(e.shop,"phone",t)},expression:"shop.phone"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"商家微信",placeholder:"请输入联系用的微信号"},model:{value:e.shop.wechat,callback:function(t){e.$set(e.shop,"wechat",t)},expression:"shop.wechat"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"商家飞机",formatter:e.checkTelgram,placeholder:"飞机的 username，不需要带@"},model:{value:e.shop.telegram,callback:function(t){e.$set(e.shop,"telegram",t)},expression:"shop.telegram"}})],1),r("div",{staticClass:"input-frame action-frame"},[r("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){e.shopInfo?e.updateShop():e.addShop()}}},[e._v("提交审核")]),e._v(" "),r("Button",{attrs:{type:"default",size:"small"},on:{click:function(t){return e.$emit("close")}}},[e._v("取消提交")])],1)])])])],1)},At=[],Tt=(r("a909"),r("3acc")),Nt=(r("3c32"),r("417e")),Pt={name:"EditShop",components:{VanImage:p["a"],Overlay:v["a"],Field:h["a"],Button:m["a"],Notify:d["a"],Radio:nt["a"],RadioGroup:it["a"],Checkbox:Nt["a"],CheckboxGroup:Tt["a"],Icon:ct["a"],Upload:Lt},props:["shopInfo"],data:function(){return{SERVICETYPE:Ne,PAYMENT:Pe,DELIVERY:Fe,CURRENCY:ze,shop:{_id:"",type:1,name:"",logo:"",back:"/img/shop/shopback.png",pics:[],brief:"",stime:"",etime:"",payment:[],delivery:[],minprice:"",currency:"",city:"",address:"",notice:"",discount:"",p_discount:"",phone:"",wechat:"",telegram:""}}},mounted:function(){if(this.shopInfo)for(var e in this.shop)this.shop[e]=this.shopInfo[e]},methods:{getLogoUrl:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.logo=e;case 1:case"end":return r.stop()}}),r)})))()},getBackUrl:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.back=e;case 1:case"end":return r.stop()}}),r)})))()},getPicsUrl:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.pics.push(e);case 1:case"end":return r.stop()}}),r)})))()},delPics:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.pics.splice(e,1);case 1:case"end":return r.stop()}}),r)})))()},addShop:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.shop.name.trim()&&e.shop.logo.trim()&&e.shop.stime.trim()&&e.shop.etime.trim()&&e.shop.payment.length&&e.shop.delivery.length&&e.shop.city.trim()&&e.shop.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"基本信息不完整"}));case 2:if(e.shop.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"Telegram不得为空"}));case 4:return e.shop.minprice=e.shop.minprice?e.shop.minprice:0,t.prev=5,t.next=8,V.shop.addShop(e.shop);case 8:if(r=t.sent,s=r.data,s.success){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 12:return e.$emit("confirm"),t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 16:if(t.prev=16,t.t0=t["catch"](5),a=t.t0.response,!a){t.next=21;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.data.message}));case 21:case"end":return t.stop()}}),t,null,[[5,16]])})))()},updateShop:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.shop._id.trim()&&e.shop.name.trim()&&e.shop.logo.trim()&&e.shop.stime.trim()&&e.shop.etime.trim()&&e.shop.payment.length&&e.shop.delivery.length&&e.shop.city.trim()&&e.shop.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"基本信息不完整"}));case 2:if(e.shop.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"Telegram不得为空"}));case 4:return e.shop.minprice=e.shop.minprice?e.shop.minprice:0,t.prev=5,t.next=8,V.shop.updateShop(e.shop);case 8:if(r=t.sent,s=r.data,s.success){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 12:return e.$emit("confirm"),t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 16:if(t.prev=16,t.t0=t["catch"](5),a=t.t0.response,!a){t.next=21;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.data.message}));case 21:case"end":return t.stop()}}),t,null,[[5,16]])})))()},checkTelgram:function(e){return e.replace(/[^\w_]/g,"")}}},Ft=Pt,zt=(r("7e73"),Object(D["a"])(Ft,Ut,At,!1,null,"bf58bf3a",null)),Bt=zt.exports,Gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{on:{click:function(t){return e.$emit("close")}}},[r("Overlay",{attrs:{show:!0,"z-index":"100"}},[r("div",{staticClass:"wrapper"},[r("div",{staticClass:"info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"info-title"},[r("h1",[e._v("编辑商品")])]),r("div",{staticClass:"class-frame"},[r("div",{staticClass:"frame-title"},[r("b",[e._v("商品类别")])]),r("div",{staticClass:"class-item-frame row-start-center"},e._l(e.classList,(function(t,s){return r("div",{key:s,staticClass:"class-item"},[r("div",{staticClass:"class-input name"},[r("Field",{attrs:{label:"分类名称"},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"item.name"}})],1),r("div",{staticClass:"class-input sort"},[r("Field",{attrs:{label:"分类排序",type:"number"},model:{value:t.sort,callback:function(r){e.$set(t,"sort",r)},expression:"item.sort"}})],1),r("Button",{staticClass:"button",attrs:{type:"primary",size:"small"},on:{click:function(r){return e.updateClass(t.shopid,t._id,t.name,t.sort)}}},[e._v("更新分类")]),r("Button",{staticClass:"button",attrs:{type:"danger",size:"small"},on:{click:function(r){return e.delClass(t._id)}}},[e._v("删除分类")])],1)})),0),r("div",{staticClass:"class-item-edit row-start-center"},[r("div",{staticClass:"class-input name"},[r("Field",{attrs:{label:"分类名称",placeholder:"请输入商品分类名称，如推荐、荤类，素类等"},model:{value:e.classEdit.name,callback:function(t){e.$set(e.classEdit,"name",t)},expression:"classEdit.name"}})],1),r("div",{staticClass:"class-input sort"},[r("Field",{attrs:{label:"分类排序",type:"number",placeholder:"请输入分类名称排序，数值越大越靠前"},model:{value:e.classEdit.sort,callback:function(t){e.$set(e.classEdit,"sort",t)},expression:"classEdit.sort"}})],1),r("Button",{attrs:{type:"info"},on:{click:function(t){return e.addClass()}}},[e._v("新建分类")])],1)]),r("div",{staticClass:"goods-frame"},[r("div",{staticClass:"row-start-center"},[r("b",{staticClass:"frame-title"},[e._v("商品信息")]),r("Button",{staticClass:"add-goods",attrs:{type:"info",size:"mini"},on:{click:function(t){e.initGoods(),e.goodsEditting=!0}}},[e._v("点此新增商品")])],1),r("div",{staticClass:"goods-item-frame"},[r("div",{staticClass:"goods-item row-start-center"},[r("div",{staticClass:"item-frame name"},[e._v("名称")]),r("div",{staticClass:"item-frame code"},[e._v("代码")]),r("div",{staticClass:"item-frame pics"},[e._v("图片")]),r("div",{staticClass:"item-frame price"},[e._v("价格")]),r("div",{staticClass:"item-frame count"},[e._v("数量")]),r("div",{staticClass:"item-frame unit"},[e._v("单位")]),r("div",{staticClass:"item-frame class"},[e._v("分类")]),r("div",{staticClass:"item-frame tags"},[e._v("标签")]),r("div",{staticClass:"item-frame stop"},[e._v("缺货")]),r("div",{staticClass:"item-frame sort"},[e._v("排序")]),r("div",{staticClass:"item-frame action"},[e._v("操作")])]),e._l(e.goodsList,(function(t,s){return r("div",{key:s,staticClass:"goods-item row-start-center"},[r("div",{staticClass:"item-frame name"},[e._v(e._s(t.name))]),r("div",{staticClass:"item-frame code"},[e._v(e._s(t.code))]),r("div",{staticClass:"item-frame pics",staticStyle:{color:"#1989fa"}},[r("a",{on:{click:function(r){return e.showImage(t.pics)}}},[e._v("查看")])]),r("div",{staticClass:"item-frame price"},[e._v(e._s(t.price))]),r("div",{staticClass:"item-frame count"},[e._v(e._s(t.count))]),r("div",{staticClass:"item-frame unit"},[e._v(e._s(e.UNIT[t.unit]))]),r("div",{staticClass:"item-frame class"},[e._v(" ｜"),e._l(t.classid,(function(t,s){return r("span",[e._v(e._s(e.classobj[t])+"｜")])}))],2),r("div",{staticClass:"item-frame tags"},[e._v(e._s(t.tags.join("、")))]),r("div",{staticClass:"item-frame stop",style:{color:t.stop?"red":""}},[e._v(e._s(t.stop?"是":"否"))]),r("div",{staticClass:"item-frame sort"},[e._v(e._s(t.sort))]),r("div",{staticClass:"item-frame action row-start-center"},[r("Button",{staticClass:"action-item",attrs:{type:"primary",size:"mini"},on:{click:function(r){e.goodsEdit=JSON.parse(JSON.stringify(t)),e.goodsEditting=!0}}},[e._v("编辑")]),r("Button",{staticClass:"action-item",attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.delGoods(t._id)}}},[e._v("删除")]),t.stop?r("Button",{staticClass:"action-item",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.stopGoods(t._id,!t.stop,s)}}},[e._v("已备货")]):r("Button",{staticClass:"action-item",attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.stopGoods(t._id,!t.stop,s)}}},[e._v("缺货")])],1)])})),r("Pagination",{attrs:{"items-per-page":e.goodsPage.rows,"total-items":e.goodsPage.total},on:{change:function(t){return e.getGoods()}},model:{value:e.goodsPage.page,callback:function(t){e.$set(e.goodsPage,"page",t)},expression:"goodsPage.page"}})],2)])])])]),r("Overlay",{attrs:{show:e.goodsEditting,"z-index":"150"},on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.goodsEditting=!1}}},[r("div",{staticClass:"goods-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("h3",[e._v("编辑商品信息")]),r("div",{staticClass:"goods-info-edit"},[r("div",{staticClass:"input-frame"},[r("div",{staticClass:"img-frame row-start-center"},[r("div",[e._v("商品图片：")]),r("div",{staticClass:"row-center-center"},[r("Upload",{attrs:{type:"goods",single:"addGoodsPics"},on:{getUrl:e.addGoodsPics}},[r("VanImage",{attrs:{src:e.goodsEdit.pics,fit:"cover",width:"150",height:"110"}})],1)],1)])]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"填写商品名称，如小炒肉、可乐"},model:{value:e.goodsEdit.name,callback:function(t){e.$set(e.goodsEdit,"name",t)},expression:"goodsEdit.name"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"填写商品代码，如A13、C20"},model:{value:e.goodsEdit.code,callback:function(t){e.$set(e.goodsEdit,"code",t)},expression:"goodsEdit.code"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{type:"number",placeholder:"填写商品价格，货币为商家默认货币"},model:{value:e.goodsEdit.price,callback:function(t){e.$set(e.goodsEdit,"price",t)},expression:"goodsEdit.price"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{type:"number",placeholder:"填写商品数量，价格单位数量"},model:{value:e.goodsEdit.count,callback:function(t){e.$set(e.goodsEdit,"count",t)},expression:"goodsEdit.count"}})],1),r("div",{staticClass:"input-frame"},[r("RadioGroup",{model:{value:e.goodsEdit.unit,callback:function(t){e.$set(e.goodsEdit,"unit",t)},expression:"goodsEdit.unit"}},[r("div",{staticClass:"row-start-top radio-type"},[r("p",[e._v("物品单位：")]),e._l(e.UNIT,(function(t,s){return r("span",{key:s,staticStyle:{"margin-right":"10px","margin-bottom":"20px"}},[r("Radio",{attrs:{name:s}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("CheckboxGroup",{model:{value:e.goodsEdit.classid,callback:function(t){e.$set(e.goodsEdit,"classid",t)},expression:"goodsEdit.classid"}},[r("div",{staticClass:"row-start-top checkbox-type"},[r("div",[e._v("商品分类：")]),e._l(e.classList,(function(t,s){return r("span",{key:s,staticStyle:{"margin-right":"10px","margin-bottom":"20px"}},[r("Checkbox",{attrs:{name:t._id,shape:"square"}},[e._v(e._s(t.name))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"row-start-center"},[r("div",{staticStyle:{width:"40%"}},[r("Field",{attrs:{placeholder:"商品标签，如新品、推荐、火爆等"},model:{value:e.goodsTag,callback:function(t){e.goodsTag=t},expression:"goodsTag"}})],1),r("Button",{attrs:{type:"info",size:"mini"},on:{click:function(t){return e.addGoodsTag()}}},[e._v("添加标签")]),r("div",{staticClass:"tags-frame row-start-center"},e._l(e.goodsEdit.tags,(function(t,s){return r("Tag",{key:s,staticClass:"goods-tag",attrs:{closeable:"",size:"medium",type:"success"},on:{close:function(t){return e.delGoodsTag(s)}}},[e._v(" "+e._s(t)+" ")])})),1)],1)]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{type:"number",placeholder:"填写商品排序，数值越高越靠前，默认为 0"},model:{value:e.goodsEdit.sort,callback:function(t){e.$set(e.goodsEdit,"sort",t)},expression:"goodsEdit.sort"}})],1),r("div",{staticClass:"goods-action"},[e.goodsEdit._id?r("Button",{attrs:{type:"info"},on:{click:function(t){return e.updateGoods()}}},[e._v("更新商品")]):r("Button",{attrs:{type:"info"},on:{click:function(t){return e.addGoods()}}},[e._v("添加商品")])],1)])])])])],1)},Vt=[],Yt=r("ade3"),qt=(r("6a39"),r("f240")),Dt={name:"EditGoods",components:(wt={VanImage:p["a"],Overlay:v["a"],Field:h["a"],Button:m["a"],Notify:d["a"],Radio:nt["a"],RadioGroup:it["a"],Checkbox:Nt["a"],CheckboxGroup:Tt["a"],Icon:ct["a"],Upload:Lt},Object(Yt["a"])(wt,"RadioGroup",it["a"]),Object(Yt["a"])(wt,"Radio",nt["a"]),Object(Yt["a"])(wt,"Tag",Te["a"]),Object(Yt["a"])(wt,"Pagination",qt["a"]),wt),props:["shopId","currency"],data:function(){return{UNIT:Be,classList:[],goodsList:[],classEdit:{name:"",sort:""},goodsEdit:{classid:[],code:"",name:"",pics:"",price:"",count:"",unit:0,tags:[],sort:""},goodsPage:{page:1,rows:50,total:0},goodsTag:"",goodsEditting:!1}},computed:{classobj:function(){for(var e={},t=this.classList.length-1;t>=0;t--)e[this.classList[t]._id]=this.classList[t].name;return e}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getClass();case 2:return t.next=4,e.getGoods();case 4:case"end":return t.stop()}}),t)})))()},methods:{getClass:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.shop.getClass(e.shopId);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:e.classList=s.data;case 7:case"end":return t.stop()}}),t)})))()},addClass:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.classEdit.name.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"分类名称不得为空"}));case 2:return r=e.classEdit.name.trim(),s=e.classEdit.sort?e.classEdit.sort:0,t.next=6,V.shop.addClass(e.shopId,r,s);case 6:if(a=t.sent,n=a.data,n.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 10:return t.next=12,e.getClass();case 12:e.classEdit.name=e.classEdit.sort="",Object(d["a"])({type:"success",message:"添加成功"});case 14:case"end":return t.stop()}}),t)})))()},delClass:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"删除分类",message:"确认删除商品分类么？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.shop.delClass(t.shopId,e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getClass();case 8:Object(d["a"])({type:"success",message:"删除成功"});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},updateClass:function(e,t,r,s){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:at["a"].confirm({title:"更新分类信息",message:"确认更新分类信息么？"}).then(Object(l["a"])(regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r.trim()){n.next=2;break}return n.abrupt("return",Object(d["a"])({type:"danger",message:"分类名称不得为空"}));case 2:return n.next=4,V.shop.updateClass(e,t,r,s);case 4:if(i=n.sent,o=i.data,o.success){n.next=8;break}return n.abrupt("return",Object(d["a"])({type:"danger",message:o.message}));case 8:return n.next=10,a.getClass();case 10:Object(d["a"])({type:"success",message:"更新成功"});case 11:case"end":return n.stop()}}),n)})))).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},addGoodsPics:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.goodsEdit.pics=e;case 1:case"end":return r.stop()}}),r)})))()},addGoodsTag:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.goodsTag.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品标签不得为空"}));case 2:if(!(e.goodsTag.length>5)){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"标签不得大于5个字"}));case 4:if(!(e.goodsEdit.tags.length>=3)){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品标签不得超过三个"}));case 6:e.goodsEdit.tags.push(e.goodsTag),e.goodsTag="";case 8:case"end":return t.stop()}}),t)})))()},delGoodsTag:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.goodsEdit.tags.splice(e,1);case 1:case"end":return r.stop()}}),r)})))()},initGoods:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.goodsEdit={classid:[],code:"",name:"",pics:"",price:"",count:"",unit:0,tags:[],sort:""};case 1:case"end":return t.stop()}}),t)})))()},getGoods:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.shop.getGoods(e.shopId,e.goodsPage.page,e.goodsPage.rows);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:e.goodsList=s.data.items,e.goodsPage.total=s.data.total;case 8:case"end":return t.stop()}}),t)})))()},addGoods:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.goodsEdit.name.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品名称不得为空"}));case 2:if(e.goodsEdit.code.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品代码不得为空"}));case 4:if(e.goodsEdit.classid.length){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品分类至少一个"}));case 6:if(e.goodsEdit.price.trim()){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品价格不得为空"}));case 8:if(e.goodsEdit.count.trim()){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价数量不得为空"}));case 10:if(String(e.goodsEdit.unit).trim()){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价单位不得为空"}));case 12:return e.goodsEdit.pics.trim()||(e.goodsEdit.pics="/img/no-img.png"),e.goodsEdit.sort=e.goodsEdit.sort.trim()?e.goodsEdit.sort:0,r=Object(lt["a"])({shopid:e.shopId},e.goodsEdit),t.next=17,V.shop.addGoods(r);case 17:if(s=t.sent,a=s.data,a.success){t.next=21;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 21:return t.next=23,e.getGoods();case 23:e.goodsEditting=!1;case 24:case"end":return t.stop()}}),t)})))()},delGoods:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"删除商品",message:"确认删除商品么？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.shop.delGoods(t.shopId,e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getGoods();case 8:Object(d["a"])({type:"success",message:"删除成功"});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},updateGoods:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.goodsEdit.name.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品名称不得为空"}));case 2:if(e.goodsEdit.code.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品代码不得为空"}));case 4:if(e.goodsEdit.classid.length){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品分类至少一个"}));case 6:if(e.goodsEdit.price.trim()){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品价格不得为空"}));case 8:if(e.goodsEdit.count.trim()){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价数量不得为空"}));case 10:if(String(e.goodsEdit.unit).trim()){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价单位不得为空"}));case 12:return e.goodsEdit.pics.trim()||(e.goodsEdit.pics="/img/no-img.png"),e.goodsEdit.sort=e.goodsEdit.sort.trim()?e.goodsEdit.sort:0,t.next=16,V.shop.updateGoods(e.goodsEdit);case 16:if(r=t.sent,s=r.data,s.success){t.next=20;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 20:return t.next=22,e.getGoods();case 22:e.goodsEditting=!1;case 23:case"end":return t.stop()}}),t)})))()},stopGoods:function(e,t,r){var s=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,V.shop.stopGoods(s.shopId,e,t);case 2:if(n=a.sent,i=n.data,i.success){a.next=6;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:i.message}));case 6:s.goodsList[r].stop=t;case 7:case"end":return a.stop()}}),a)})))()},showImage:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(st["a"])({images:[e],closeable:!0});case 1:case"end":return t.stop()}}),t)})))()}}},Mt=Dt,Ht=(r("b6bb"),Object(D["a"])(Mt,Gt,Vt,!1,null,"cbe34c40",null)),Jt=Ht.exports,Wt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-order-frame"},[r("h1",[e._v("订单列表")]),r("br"),r("div",[r("CheckboxGroup",{on:{change:function(t){return e.getUserOrder()}},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},[r("div",{staticClass:"row-start-center"},e._l(e.ORDERSTATUS,(function(t,s){return r("span",{key:s,staticStyle:{"margin-right":"10px"}},[r("Checkbox",{attrs:{name:s,shape:"square"}},[e._v(e._s(t))])],1)})),0)])],1),e.items.length?r("div",{staticClass:"order-list-frame"},[e._m(0),e._l(e.items,(function(t,s){return r("div",{key:s,staticClass:"order-item row-start-center"},[r("div",{staticClass:"cell name omit"},[r("router-link",{attrs:{to:"/shop/"+t.shop._id}},[e._v(e._s(t.shop.name))])],1),r("div",{staticClass:"cell amount"},[e._v(e._s(t.total)+" "+e._s(e.CURRENCY[t.currency]))]),r("div",{staticClass:"cell payment"},[e._v(e._s(e.PAYMENT[t.payment]))]),r("div",{staticClass:"cell delivery"},[e._v(e._s(e.DELIVERY[t.delivery]))]),r("div",{staticClass:"cell time"},[e._v(e._s(e._f("formatTime")(t.created_at)))]),r("div",{staticClass:"cell status warning"},[e._v(e._s(e.ORDERSTATUS[t.status])),t.comment?r("b",[e._v("(已评)")]):e._e()]),r("div",{staticClass:"cell action row-start-center"},[r("Button",{staticClass:"action-button",attrs:{type:"info",size:"mini"},on:{click:function(r){e.orderInfo=t,e.showInfo=!0}}},[e._v("查看")]),-1!==[0,1].indexOf(t.status)?r("Button",{staticClass:"action-button",attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.cancelOrderUser(t)}}},[e._v("撤单")]):e._e(),3===t.status?r("Button",{staticClass:"action-button",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.finishOrder(t._id)}}},[e._v("订单完成")]):e._e(),4!==t.status||t.comment?e._e():r("Button",{staticClass:"action-button",attrs:{type:"primary",size:"mini"},on:{click:function(r){e.review.orderid=t._id,e.showReview=!0}}},[e._v("评价")])],1)])})),r("Pagination",{attrs:{"items-per-page":e.params.rows,"total-items":e.total},on:{change:function(t){return e.getUserOrder()}},model:{value:e.params.page,callback:function(t){e.$set(e.params,"page",t)},expression:"params.page"}})],2):r("div",{staticClass:"order-list-frame"},[e._v(" 暂无订单 ")]),r("Overlay",{attrs:{show:e.showInfo,"z-index":"150"},on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.showInfo=!1}}},[r("div",{staticClass:"order-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-info-item"},e._l(e.orderInfo.items,(function(t,s){return r("div",{key:s,staticClass:"order-item row-between-top"},[r("div",{staticClass:"row-start-top"},[r("div",{staticClass:"order-item-pics"},[r("VanImage",{attrs:{src:t.info.pics,fit:"cover",width:"120px",height:"80px"}})],1),r("div",{staticClass:"order-item-name"},[e._v(" "+e._s(t.info.code)+" "+e._s(t.info.name)+" * "+e._s(t.count)+" ")])]),r("div",[e._v(" "+e._s(t.amount)+" "+e._s(e.CURRENCY[e.orderInfo.currency])+" ")])])})),0),r("div",{staticClass:"order-info-item"},[r("p",[e._v("总计："),r("b",[e._v(e._s(e.orderInfo.total))]),e._v(" "+e._s(e.CURRENCY[e.orderInfo.currency]))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("付款方式："),r("b",[e._v(e._s(e.PAYMENT[e.orderInfo.payment]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送方式："),r("b",[e._v(e._s(e.DELIVERY[e.orderInfo.delivery]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送信息")]),r("p",{staticStyle:{"white-space":"pre-line","margin-top":"10px"}},[e._v(" "+e._s(e.orderInfo.uinfo)+" ")])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单备注："+e._s(e.orderInfo.memo))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("下单时间："+e._s(e._f("formatTime")(e.orderInfo.created_at)))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单状态："),r("b",{staticStyle:{color:"red"}},[e._v(e._s(e.ORDERSTATUS[e.orderInfo.status]))])])])])])]),r("Overlay",{attrs:{show:e.showReview,"z-index":"150"},on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.showReview=!1}}},[r("div",{staticClass:"review-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-rate"},[r("h3",[e._v("订单评分")]),r("div",{staticClass:"review-item row-start-center"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"30",color:"#ffd21e","void-color":"#eee"},model:{value:e.review.rate,callback:function(t){e.$set(e.review,"rate",t)},expression:"review.rate"}}),r("div",{staticClass:"rate-count"},[e._v(e._s(e.review.rate)+" 分")])],1)]),r("div",{staticClass:"order-text"},[r("h3",[e._v("订单评价")]),r("div",{staticClass:"review-item"},[r("Field",{attrs:{rows:"3",autosize:"",type:"textarea",placeholder:"请输入评论内容",maxlength:"150","show-word-limit":""},model:{value:e.review.text,callback:function(t){e.$set(e.review,"text",t)},expression:"review.text"}})],1)]),r("div",{staticClass:"order-pics"},[r("h3",[e._v("图片分享")]),r("div",{staticClass:"review-item row-start-center"},[e._l(e.review.pics,(function(t,s){return r("div",{key:s,staticClass:"pics-frame"},[r("VanImage",{attrs:{src:t,fit:"cover",width:"100%",height:"100%"}}),r("div",{staticClass:"del-pics",on:{click:function(t){return e.delPics(s)}}},[r("Icon",{attrs:{name:"clear",color:"red",size:"20"}})],1)],1)})),e.review.pics.length<3?r("div",{staticClass:"pics-frame row-center-center"},[r("Upload",{attrs:{type:"review",single:"addGoodsPics"},on:{getUrl:e.addPics}},[r("Icon",{attrs:{name:"add-o",size:"80px"}})],1)],1):e._e()],2)]),r("div",{staticClass:"review-action row-start-center"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmReview()}}},[e._v("提交评价")]),r("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"warning"},on:{click:function(t){return e.resetReview()}}},[e._v("取消提交")])],1)])])])],1)},Kt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-item order-item-title row-start-center"},[r("div",{staticClass:"cell name"},[e._v("商家名称")]),r("div",{staticClass:"cell amount"},[e._v("消费费用")]),r("div",{staticClass:"cell payment"},[e._v("付款方式")]),r("div",{staticClass:"cell delivery"},[e._v("配送方式")]),r("div",{staticClass:"cell time"},[e._v("下单时间")]),r("div",{staticClass:"cell status"},[e._v("订单状态")]),r("div",{staticClass:"cell action"},[e._v("操作")])])}],Qt=["商家确认中","商家已接单","已送出","已送到","订单完成","用户取消","商家取消"],Xt={name:"UserOrders",components:{Button:m["a"],VanImage:p["a"],Checkbox:Nt["a"],CheckboxGroup:Tt["a"],Overlay:v["a"],Pagination:qt["a"],Rate:Oe["a"],Field:h["a"],Icon:ct["a"],Upload:Lt},filters:{formatTime:function(e){return R(e)}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getUserOrder();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{PAYMENT:Pe,DELIVERY:Fe,CURRENCY:ze,ORDERSTATUS:Qt,params:{status:[],page:1,rows:50},review:{orderid:"",rate:5,text:"",pics:[]},items:[],total:0,orderInfo:"",showInfo:!1,showReview:!1}},methods:{getUserOrder:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.order.getUserOrder(e.params);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:a=s.data,n=a.items,i=a.total,e.items=n,e.total=i;case 9:case"end":return t.stop()}}),t)})))()},cancelOrderUser:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1!==e.status){r.next=3;break}return at["a"].alert({title:"通知商家取消订单",message:"因为商家已经确认了该订单，所以请通知商家来操作取消订单",confirmButtonText:"通知商家",theme:"round-button",closeOnClickOverlay:!0}).then((function(){window.open("https://t.me/".concat(e.shop.telegram))})),r.abrupt("return");case 3:at["a"].confirm({title:"操作取消订单",message:"您确认要取消该订单吗？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.cancelOrderUser(e._id);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getUserOrder();case 8:return r.abrupt("return",Object(d["a"])({type:"success",message:a.message}));case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 4:case"end":return r.stop()}}),r)})))()},finishOrder:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"订单完成",message:"确定已经收到物品并且完成该订单吗？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.finishOrder(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getUserOrder();case 8:return r.abrupt("return",Object(d["a"])({type:"success",message:a.message}));case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},addPics:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.review.pics.push(e);case 1:case"end":return r.stop()}}),r)})))()},delPics:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.review.pics.splice(e,1);case 1:case"end":return r.stop()}}),r)})))()},confirmReview:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.review),e.review.orderid.trim()){t.next=3;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"评论订单缺失"}));case 3:if(e.review.text.trim()){t.next=5;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请填写评论内容"}));case 5:return t.next=7,V.review.newReview(e.review);case 7:if(r=t.sent,s=r.data,s.success){t.next=11;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 11:return e.resetReview(),e.getUserOrder(),t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 14:case"end":return t.stop()}}),t)})))()},resetReview:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.review={orderid:"",rate:5,text:"",pics:[]},e.showReview=!1;case 2:case"end":return t.stop()}}),t)})))()}}},Zt=Xt,er=(r("b5d6"),Object(D["a"])(Zt,Wt,Kt,!1,null,"231007e0",null)),tr=er.exports,rr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-order-frame"},[e._m(0),r("br"),r("div",{staticClass:"row-between-center"},[r("CheckboxGroup",{on:{change:function(t){return e.getShopOrder()}},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},[r("div",{staticClass:"row-start-center"},e._l(e.ORDERSTATUS,(function(t,s){return r("span",{key:s,staticStyle:{"margin-right":"10px"}},[r("Checkbox",{attrs:{name:s,shape:"square"}},[e._v(e._s(t))])],1)})),0)]),r("Search",{staticClass:"row-between-center",attrs:{"show-action":"",label:"订单码",placeholder:"订单查询，输入订单码"},scopedSlots:e._u([{key:"action",fn:function(){return[r("div",{staticStyle:{padding:"0 5px",background:"#07c160",color:"#ffffff"},on:{click:function(t){return e.orderSearch()}}},[e._v("查询订单")])]},proxy:!0}]),model:{value:e.orderId,callback:function(t){e.orderId=t},expression:"orderId"}})],1),e.items.length?r("div",{staticClass:"order-list-frame"},[e._m(1),e._l(e.items,(function(t,s){return r("div",{key:s,staticClass:"order-item row-start-center"},[r("div",{staticClass:"cell name omit"},[r("router-link",{attrs:{to:"/shop/"+t.shop._id}},[e._v(e._s(t.shop.name))])],1),r("div",{staticClass:"cell amount"},[e._v(e._s(t.total)+" "+e._s(e.CURRENCY[t.currency]))]),r("div",{staticClass:"cell payment"},[e._v(e._s(e.PAYMENT[t.payment]))]),r("div",{staticClass:"cell delivery"},[e._v(e._s(e.DELIVERY[t.delivery]))]),r("div",{staticClass:"cell time"},[e._v(e._s(e._f("formatTime")(t.created_at)))]),r("div",{staticClass:"cell status warning"},[e._v(e._s(e.ORDERSTATUS[t.status]))]),r("div",{staticClass:"cell action row-start-center"},[r("Button",{staticClass:"action-button",attrs:{type:"info",size:"mini"},on:{click:function(r){e.orderInfo=t,e.showInfo=!0}}},[e._v("查看")]),0===t.status?r("Button",{staticClass:"action-button",attrs:{type:"primary",size:"mini"},on:{click:function(r){e.confirm._id=t._id,e.showConfirm=!0}}},[e._v("确认接单")]):e._e(),1===t.status?r("Button",{staticClass:"action-button",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.delivery(t._id)}}},[e._v("已送出")]):e._e(),2===t.status?r("Button",{staticClass:"action-button",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.arrived(t._id)}}},[e._v("已送到")]):e._e(),-1!==[0,1].indexOf(t.status)?r("Button",{staticClass:"action-button",attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.cancelOrderShop(t._id)}}},[e._v("取消订单")]):e._e()],1)])})),r("Pagination",{attrs:{"items-per-page":e.params.rows,"total-items":e.total},on:{change:function(t){return e.getShopOrder()}},model:{value:e.params.page,callback:function(t){e.$set(e.params,"page",t)},expression:"params.page"}})],2):r("div",{staticClass:"order-list-frame"},[e._v(" 暂无订单 ")]),r("Overlay",{attrs:{show:e.showInfo,"z-index":"150"},on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.showInfo=!1}}},[r("div",{staticClass:"order-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-info-item"},e._l(e.orderInfo.items,(function(t,s){return r("div",{key:s,staticClass:"order-item row-between-top"},[r("div",{staticClass:"row-start-top"},[r("div",{staticClass:"order-item-pics"},[r("VanImage",{attrs:{src:t.info.pics,fit:"cover",width:"120px",height:"80px"}})],1),r("div",{staticClass:"order-item-name"},[e._v(" "+e._s(t.info.code)+" "+e._s(t.info.name)+" * "+e._s(t.count)+" ")])]),r("div",[e._v(" "+e._s(t.amount)+" "+e._s(e.CURRENCY[e.orderInfo.currency])+" ")])])})),0),r("div",{staticClass:"order-info-item"},[r("p",[e._v("总计："),r("b",[e._v(e._s(e.orderInfo.total))]),e._v(" "+e._s(e.CURRENCY[e.orderInfo.currency]))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("付款方式："),r("b",[e._v(e._s(e.PAYMENT[e.orderInfo.payment]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送方式："),r("b",[e._v(e._s(e.DELIVERY[e.orderInfo.delivery]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送信息")]),r("p",{staticStyle:{"white-space":"pre-line","margin-top":"10px"}},[e._v(" "+e._s(e.orderInfo.uinfo)+" ")])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单备注："+e._s(e.orderInfo.memo))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("下单时间："+e._s(e._f("formatTime")(e.orderInfo.created_at)))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单状态："),r("b",{staticStyle:{color:"red"}},[e._v(e._s(e.ORDERSTATUS[e.orderInfo.status]))])])])])])]),r("Dialog",{attrs:{title:"确认接受该订单吗？","show-cancel-button":""},on:{confirm:function(t){return e.confirmOrder()}},model:{value:e.showConfirm,callback:function(t){e.showConfirm=t},expression:"showConfirm"}},[r("div",{staticStyle:{padding:"20px"}},[r("RadioGroup",{model:{value:e.confirm.delivery,callback:function(t){e.$set(e.confirm,"delivery",t)},expression:"confirm.delivery"}},[r("div",[e._v("请选择配送方式：")]),e._l(e.DELIVERY,(function(t,s){return r("div",{key:s,staticStyle:{"margin-top":"20px"}},[r("Radio",{attrs:{name:s}},[e._v(e._s(t))])],1)}))],2)],1)])],1)},sr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("商铺订单列表")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-item order-item-title row-start-center"},[r("div",{staticClass:"cell amount"},[e._v("商家名称")]),r("div",{staticClass:"cell amount"},[e._v("消费费用")]),r("div",{staticClass:"cell payment"},[e._v("付款方式")]),r("div",{staticClass:"cell delivery"},[e._v("配送方式")]),r("div",{staticClass:"cell time"},[e._v("下单时间")]),r("div",{staticClass:"cell status"},[e._v("订单状态")]),r("div",{staticClass:"cell action"},[e._v("操作")])])}],ar=(r("5852"),r("d961")),nr={name:"ShopOrders",components:{Button:m["a"],VanImage:p["a"],Radio:nt["a"],RadioGroup:it["a"],Checkbox:Nt["a"],CheckboxGroup:Tt["a"],Overlay:v["a"],Pagination:qt["a"],Dialog:at["a"].Component,Search:ar["a"]},filters:{formatTime:function(e){return R(e)}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.params.shop=e.$route.query._id,"1"===e.$route.query.unfinished&&(e.params.status=[]),e.$store.dispatch("setLoading",!0),t.next=5,e.getShopOrder();case 5:e.$store.dispatch("setLoading",!1);case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{PAYMENT:Pe,DELIVERY:Fe,CURRENCY:ze,ORDERSTATUS:Qt,params:{status:[],shop:"",page:1,rows:50},confirm:{_id:"",delivery:0},items:[],total:0,orderInfo:"",showInfo:!1,showConfirm:!1,orderId:""}},methods:{getShopOrder:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.order.getShopOrder(e.params);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:a=s.data,n=a.items,i=a.total,e.items=n,e.total=i;case 9:case"end":return t.stop()}}),t)})))()},cancelOrderShop:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"操作取消订单",message:"您确认要取消该订单吗？请通知客户您的取消操作，避免误会！"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.cancelOrderShop(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getShopOrder();case 8:Object(d["a"])({type:"success",message:a.message});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},confirmOrder:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.order.confirmOrder(e.confirm);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:return t.next=8,e.getShopOrder();case 8:Object(d["a"])({type:"success",message:s.message});case 9:case"end":return t.stop()}}),t)})))()},delivery:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"商品已配送",message:"商品已经确认送出了么？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.delivery(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getShopOrder();case 8:Object(d["a"])({type:"success",message:a.message});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},arrived:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"商品已送到",message:"商品已经确认送到了么？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.arrived(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getShopOrder();case 8:Object(d["a"])({type:"success",message:a.message});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},orderSearch:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.order.getOrder({orderId:e.orderId,shopId:e.params.shop});case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:a=s.data,n=a.items,i=a.total,e.items=n,e.total=i;case 9:case"end":return t.stop()}}),t)})))()}}},ir=nr,or=(r("0f17"),Object(D["a"])(ir,rr,sr,!1,null,"39e291e2",null)),cr=or.exports,ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-shops-frame"},[r("div",{staticClass:"shop-list-frame row-start-center"},[e._l(e.shopList,(function(t,s){return r("div",{key:s,staticClass:"shop-item row-between-center"},[r("VanImage",{attrs:{src:t.logo,fit:"cover",width:"40%",height:"130"}}),r("div",{staticClass:"shop-item-info"},[r("div",{staticClass:"row-start-center"},[r("div",{staticClass:"shop-item-name omit"},[t.pass?r("b",[r("a",{on:{click:function(r){return e.$router.push("/shop/"+t._id)}}},[e._v(e._s(t.name))])]):r("b",[e._v(e._s(t.name))])]),t.pass?e._e():r("span",{staticStyle:{color:"red","margin-left":"10px"}},[e._v(" (审核中)")])]),r("div",{staticClass:"info-edit"},[e._v(" 是否上架： "),r("span",{on:{click:function(r){return e.setRunning(t._id,!t.running,t.pass)}}},[t.running?r("a",{staticClass:"on"},[e._v("点击下架")]):r("a",{staticClass:"off"},[e._v("点击上架")])])]),r("div",{staticClass:"info-edit"},[e._v(" 是否营业： "),r("span",{on:{click:function(r){return e.setOpen(t._id,!t.open,t.pass)}}},[t.open?r("a",{staticClass:"on"},[e._v("点击打烊")]):r("a",{staticClass:"off"},[e._v("点击营业")])])]),r("div",{staticClass:"info-edit"},[r("a",{staticClass:"edit",on:{click:function(r){e.shopInfo=t,e.showShopEdit=!0}}},[e._v("编辑商铺")]),e._v(" | "),r("a",{staticClass:"edit",on:{click:function(r){e.shopId=t._id,e.currency=t.currency,e.showGoodsEdit=!0}}},[e._v("编辑商品")]),e._v(" | "),r("a",{staticClass:"edit",on:{click:function(r){e.deleteid=t._id,e.deleteShop=!0}}},[e._v("删除商铺")])]),r("div",{staticClass:"info-edit"},[r("a",{staticClass:"edit",on:{click:function(r){return e.$router.push("/user/5?_id="+t._id)}}},[e._v("查看店铺订单")]),e._v(" | "),r("a",{staticClass:"edit",on:{click:function(r){return e.$router.push("/user/5?_id="+t._id+"&unfinished=1")}}},[e._v("未完成的订单("),r("b",[e._v(e._s(e.orderCount[t._id]))]),e._v(") ")]),e._v(" | "),r("a",{staticClass:"edit",on:{click:function(r){e.fans_param.page=1,e.fans_param.shopid=t._id,e.getFans(),e.showFans=!0}}},[e._v("查看粉丝")])])])],1)})),e.shopList.length<3?r("div",{staticClass:"shop-item row-center-center",on:{click:function(t){e.shopInfo=null,e.showShopEdit=!0}}},[r("Icon",{attrs:{name:"add-o",size:"50"}})],1):e._e()],2),e._m(0),e.showShopEdit?r("EditShop",{attrs:{shopInfo:e.shopInfo},on:{confirm:function(t){e.getShop(),e.showShopEdit=!1},close:function(t){e.showShopEdit=!1}}}):e._e(),e.showGoodsEdit?r("EditGoods",{attrs:{shopId:e.shopId,currency:e.currency},on:{close:function(t){e.showGoodsEdit=!1}}}):e._e(),e.deleteShop?r("Overlay",{attrs:{show:e.deleteShop}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.deleteShop=!1}}},[r("div",{staticClass:"block",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"title"},[r("h3",[e._v("确认删除店铺么？删除后不可恢复哦！")])]),r("div",{staticClass:"password"},[r("Field",{attrs:{placeholder:"请输入您的登录密码",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("div",{staticClass:"action row-start-center"},[r("Button",{attrs:{type:"danger"},on:{click:function(t){return e.delShop()}}},[e._v("删除店铺")]),r("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"warning"},on:{click:function(t){e.password="",e.deleteShop=!1}}},[e._v("取消删除")])],1)])])]):e._e(),e.showFans?r("Overlay",{attrs:{show:e.showFans}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.showFans=!1}}},[r("div",{staticClass:"fans-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"fans-list-frame"},e._l(e.fans.items,(function(t,s){return r("div",{key:s,staticClass:"fans-item row-start-center"},[r("VanImage",{attrs:{src:t.user.avatar,width:"50px",height:"50px",fit:"cover",round:""}}),r("div",{staticClass:"fans-name"},[r("b",[e._v(e._s(t.user.name))])])],1)})),0),r("Pagination",{attrs:{"items-per-page":e.fans_param.rows,"total-items":e.fans.total},on:{change:function(t){return e.getFans()}},model:{value:e.fans_param.page,callback:function(t){e.$set(e.fans_param,"page",t)},expression:"fans_param.page"}})],1)])]):e._e()],1)},dr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shop-notice"},[r("p",[r("b",[e._v("每位用户最多可创建3个店铺，创建店铺后，可申请店铺信息审核，通过审核后您的店铺会上架。")])]),r("br"),r("p",[r("b",[e._v("请确保店铺信息真实，如发现虚假信息，您的店铺将会被强制下架。")])])])}],lr={name:"UserShops",components:{VanImage:p["a"],Tag:Te["a"],Button:m["a"],Field:h["a"],Icon:ct["a"],Notify:d["a"],Dialog:at["a"],Overlay:v["a"],EditShop:Bt,EditGoods:Jt,Pagination:qt["a"]},data:function(){return{showShopEdit:!1,showGoodsEdit:!1,showFans:!1,shopList:[],shopInfo:null,shopId:null,currency:null,deleteShop:!1,password:"",deleteid:"",orderCount:{},intervalId:null,fans_param:{page:1,rows:20,shopid:""},fans:{total:0,items:[]}}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getShop();case 3:return t.next=5,e.getUnfinished();case 5:e.$store.dispatch("setLoading",!1),e.intervalId=setInterval(Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUnfinished();case 2:case"end":return t.stop()}}),t)}))),6e4);case 7:case"end":return t.stop()}}),t)})))()},destroyed:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:clearInterval(e.intervalId);case 1:case"end":return t.stop()}}),t)})))()},methods:{getShop:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.shop.getShop("/api/shop/get_shop");case 2:r=t.sent,s=r.data,s.success&&(e.shopList=s.data);case 5:case"end":return t.stop()}}),t)})))()},delShop:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.password.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"登录密码不得为空！"}));case 2:return t.next=4,V.shop.delShop(e.deleteid,e.password);case 4:if(r=t.sent,s=r.data,s.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 8:e.password="",e.deleteShop=!1,e.getShop(),Object(d["a"])({type:"success",message:"删除商城成功"});case 12:case"end":return t.stop()}}),t)})))()},setRunning:function(e,t,r){var s=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r){a.next=2;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:"审核未通过，不可操作上架状态"}));case 2:return a.next=4,V.shop.setRunning(e,t);case 4:if(n=a.sent,i=n.data,i.success){a.next=8;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:i.message}));case 8:s.getShop();case 9:case"end":return a.stop()}}),a)})))()},setOpen:function(e,t,r){var s=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r){a.next=2;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:"审核未通过，不可操作营业状态"}));case 2:return a.next=4,V.shop.setOpen(e,t);case 4:if(n=a.sent,i=n.data,i.success){a.next=8;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:i.message}));case 8:s.getShop();case 9:case"end":return a.stop()}}),a)})))()},getUnfinished:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.shopList.length){t.next=2;break}return t.abrupt("return");case 2:r=e.shopList.length-1;case 3:if(!(r>=0)){t.next=16;break}return t.next=6,V.order.unfinishedCount(e.shopList[r]._id);case 6:if(s=t.sent,a=s.data,a.success){t.next=11;break}return clearInterval(e.intervalId),t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 11:e.orderCount[e.shopList[r]._id]=a.data,e.orderCount=JSON.parse(JSON.stringify(e.orderCount));case 13:r--,t.next=3;break;case 16:case"end":return t.stop()}}),t)})))()},getFans:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.follow.shopFollow(e.fans_param);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:e.fans.items=s.data.items,e.fans.total=s.data.total;case 8:case"end":return t.stop()}}),t)})))()}}},pr=lr,mr=(r("671c"),Object(D["a"])(pr,ur,dr,!1,null,"c42f8e42",null)),fr=mr.exports,hr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-follow-frame"},[r("div",{staticClass:"shop-list row-start-center"},e._l(e.items,(function(t,s){return r("div",{key:s,staticClass:"shop-item"},[r("router-link",{attrs:{to:"/shop/"+t.shop._id}},[r("div",{staticClass:"shop-logo-frame"},[r("VanImage",{attrs:{src:t.shop.logo,width:"100%",height:"120px",fit:"cover"}}),r("div",{staticClass:"shop-tag"},[r("Tag",{attrs:{type:"primary"}},[e._v(e._s(e.SERVICETYPE[t.shop.type-1].name))])],1)],1),r("div",{staticClass:"row-between-center shop-info"},[r("div",{staticClass:"shop-name omit"},[r("b",[e._v(e._s(t.shop.name))])])])])],1)})),0)])},vr=[],gr={name:"UserFollow",components:{VanImage:p["a"],Tag:Te["a"]},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.userFollow();case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{SERVICETYPE:Ne,items:[]}},methods:{userFollow:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.follow.userFollow();case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Notify({type:"danger",message:s.message}));case 6:e.items=s.data;case 7:case"end":return t.stop()}}),t)})))()}}},wr=gr,br=(r("d7ce"),Object(D["a"])(wr,hr,vr,!1,null,"7ec090c0",null)),_r=br.exports,xr={shoper:"店主",admin:"管理员"},Cr={name:"User",components:{VanImage:p["a"],Header:Le,Tag:Te["a"],Button:m["a"],Field:h["a"],Icon:ct["a"],Notify:d["a"],Upload:Lt,EditShop:Bt,EditGoods:Jt,Overlay:v["a"],UserOrder:tr,ShopOrder:cr,UserShops:fr,UserFollow:_r},computed:{user:function(){var e=this.$store.state.user?this.$store.state.user:{};return e},infoList:function(){return this.$store.state.infoList}},data:function(){return{ACCESS:xr,active:0,edit:!1,editInfo:{name:"",avatar:""},showShopEdit:!1,showGoodsEdit:!1,shopList:[],shopInfo:null,shopId:null,currency:null,deleteShop:!1,password:"",deleteid:""}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.active=Number(e.$route.params.active);case 1:case"end":return t.stop()}}),t)})))()},methods:{editUser:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.editInfo.name||(e.editInfo.name=e.user.name),e.editInfo.avatar||(e.editInfo.avatar=e.user.avatar),e.edit=!0;case 3:case"end":return t.stop()}}),t)})))()},updateUser:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.editInfo.name.trim()&&e.editInfo.avatar.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"更新信息缺失"}));case 2:if(!(e.editInfo.name.length>8)){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"昵称不要超过十个字"}));case 4:return t.next=6,V.user.updateUser(e.editInfo.name,e.editInfo.avatar);case 6:if(r=t.sent,s=r.data,s.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 10:e.$store.dispatch("getUser"),e.edit=!1,Object(d["a"])({type:"success",message:"更新成功"});case 13:case"end":return t.stop()}}),t)})))()},getAvatarUrl:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.editInfo.avatar=e;case 1:case"end":return r.stop()}}),r)})))()},setDefault:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.info.setDefault(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:t.$store.dispatch("getInfoList"),Object(d["a"])({type:"success",message:"更新成功"});case 8:case"end":return r.stop()}}),r)})))()},delInfo:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"是否删除该地址信息"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.info.delInfo(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:t.$store.dispatch("getInfoList");case 7:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()}}},kr=Cr,yr=(r("f9b3"),Object(D["a"])(kr,Rt,Ot,!1,null,"191b7ca7",null)),Rr=yr.exports,Or=[{path:"/",name:"Home",component:Je,meta:{title:"海外圈-海外华人的圈圈",keepAlive:!0}},{path:"/service/:type",name:"Service",component:et,meta:{title:"海外圈-商店服务",keepAlive:!0}},{path:"/shop/:_id",name:"Shop",component:yt,meta:{title:"海外圈-店铺信息"}},{path:"/user/:active",name:"User",component:Rr,meta:{title:"海外圈-个人中心"}}],jr=Or,Ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame"},[r("div",{staticClass:"home-banner"},[r("div",{staticClass:"banner-frame"},[r("div",{staticClass:"banner-mask"}),r("VanImage",{attrs:{src:"/img/mobile/home/banner.png"}})],1)]),r("div",{staticClass:"home-body"},[r("div",{staticClass:"body-banner"},[r("div",{staticClass:"banner-account row-between-center"},[e._m(0),e.user?r("div",{staticClass:"web-account"},[r("Popover",{attrs:{"close-on-click-outside":!0,trigger:"click"},scopedSlots:e._u([{key:"reference",fn:function(){return[r("VanImage",{attrs:{src:e.user.avatar,round:"",height:"40",width:"40",fit:"cover"}})]},proxy:!0}]),model:{value:e.showUserAction,callback:function(t){e.showUserAction=t},expression:"showUserAction"}},[r("div",{staticClass:"user-action-frame"},[r("div",{staticClass:"user-action-item",on:{click:function(t){return e.goToUser()}}},[e._v("个人中心")]),r("div",{staticClass:"user-action-item",on:{click:function(t){return e.logout()}}},[e._v("退出登录")])])])],1):r("div",{staticClass:"web-account"},[r("a",{on:{click:function(t){return e.$store.dispatch("setAccount","login")}}},[r("b",[e._v("登录")])]),e._v(" / "),r("a",{on:{click:function(t){return e.$store.dispatch("setAccount","register")}}},[r("b",[e._v("注册")])])])])]),r("div",{staticClass:"body-content"},[r("div",{staticClass:"search-frame"},[r("Search",{attrs:{placeholder:"搜索相关店铺",shape:"round"},on:{search:e.reset},model:{value:e.param.keywords,callback:function(t){e.$set(e.param,"keywords",t)},expression:"param.keywords"}})],1),r("div",{staticClass:"home-service-frame flex-wrap row-start-center"},e._l(e.SERVICETYPE,(function(t,s){return r("div",{key:s,staticClass:"service-item",on:{click:function(t){return e.$router.push("/service/"+(s+1))}}},[r("VanImage",{attrs:{src:t.icon,fit:"cover",width:"40",height:"40"}}),r("div",[e._v(e._s(t.name))])],1)})),0),r("div",{staticClass:"home-shops-frame"},[r("div",{staticClass:"home-shops-title"},[e._v("推荐商家")]),r("ShopList",{attrs:{type:0,items:e.items,loading:e.loading,hasMore:e.hasMore},on:{search:function(t){return e.search()}}})],1)])])])},Er=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"web-logo"},[r("b",[e._v("海外圈")])])}],$r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"shop-frame"},[e.type?r("Header",{attrs:{title:e.title}}):e._e(),r("div",{staticClass:"shop-list-frame"},e._l(e.items,(function(t,s){return r("div",{key:s,staticClass:"home-shop-item-frame row-between-center",on:{click:function(r){return e.$router.push("/shop/"+t._id)}}},[r("div",{staticClass:"shop-logo"},[r("VanImage",{attrs:{src:t.logo,width:"100%",height:"100%",fit:"cover"}})],1),r("div",{staticClass:"shop-info"},[r("div",{staticClass:"row-between-center"},[r("div",{staticClass:"shop-name omit"},[e._v(e._s(t.name))]),r("div",{staticClass:"shop-city"},[e._v(e._s(t.city))])]),r("div",{staticClass:"shop-rate"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"14",color:"#ffd21e",readonly:"","void-color":"#eee"},model:{value:t.rate,callback:function(r){e.$set(t,"rate",r)},expression:"item.rate"}})],1),r("div",{staticClass:"shop-time"},[e._v("营业时间："+e._s(t.stime)+" - "+e._s(t.etime))]),r("div",{staticClass:"shop-minprice"},[e._v("最低配送："+e._s(t.minprice)+"P")]),r("div",{staticClass:"shop-brief omit"},[e._v(e._s(t.brief))]),r("div",{staticClass:"shop-delivery-payment"},[-1!==t.payment.indexOf(0)?r("Tag",{attrs:{type:"success"}},[e._v("支持到付")]):e._e()],1)])])})),0),e.hasMore?r("div",{staticClass:"get-more row-center-center"},[r("Button",{staticStyle:{width:"150px"},attrs:{round:"",type:"primary",loading:e.loading},on:{click:function(t){return e.$emit("search")}}},[e._v("查看更多")])],1):e._e()],1)},Sr=[],Lr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"header-frame"},[r("NavBar",{attrs:{title:e.title,"left-arrow":""},on:{"click-left":function(t){return e.goHome()}},scopedSlots:e._u([{key:"left",fn:function(){return[r("div",{staticClass:"arrow-frame row-start-center"},[r("Icon",{attrs:{name:"arrow-left",color:"black",size:"20"}})],1)]},proxy:!0}])})],1)},Ur=[],Ar=(r("5246"),r("6b41")),Tr={name:"Header",components:{NavBar:Ar["a"],Icon:ct["a"]},props:["title"],methods:{goHome:function(){this.$router.push("/")}}},Nr=Tr,Pr=Object(D["a"])(Nr,Lr,Ur,!1,null,null,null),Fr=Pr.exports,zr={name:"ShopList",components:{VanImage:p["a"],Rate:Oe["a"],Tag:Te["a"],Button:m["a"],Header:Fr},props:["type","items","loading","hasMore"],computed:{title:function(){var e="推荐列表";return Ne[this.type-1]&&(e=Ne[this.type-1].name),e}}},Br=zr,Gr=(r("51b4"),Object(D["a"])(Br,$r,Sr,!1,null,"d7d55e7c",null)),Vr=Gr.exports,Yr={name:"Home",components:{VanImage:p["a"],Rate:Oe["a"],Popover:f["a"],Search:ar["a"],ShopList:Vr},data:function(){return{SERVICETYPE:Ne,PAYMENT:Pe,DELIVERY:Fe,showUserAction:!1,loading:!1,hasMore:!0,param:{page:1,rows:20,keywords:""},items:[]}},computed:{user:function(){return this.$store.state.user}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.search();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{search:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,V.show.getShops(e.param);case 3:if(s=t.sent,a=s.data,a.success){t.next=7;break}return t.abrupt("return",Notify({type:"danger",message:a.message}));case 7:e.loading=!1,a.data.length<e.param.rows&&(e.hasMore=!1),e.param.page++,(r=e.items).push.apply(r,Object(Re["a"])(a.data));case 11:case"end":return t.stop()}}),t)})))()},reset:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.items=[],e.param.page=1,e.search();case 3:case"end":return t.stop()}}),t)})))()},logout:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:C(null),e.showUserAction=!1,e.$store.dispatch("getUser");case 3:case"end":return t.stop()}}),t)})))()},goToUser:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showUserAction=!1,e.$nextTick((function(){e.$router.push("/user/0")}));case 2:case"end":return t.stop()}}),t)})))()}}},qr=Yr,Dr=(r("2898"),Object(D["a"])(qr,Ir,Er,!1,null,"c789378e",null)),Mr=Dr.exports,Hr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame"},[r("div",{staticClass:"shop-list-frame"},[r("ShopList",{attrs:{type:e.$route.params.type,items:e.items,loading:e.loading,hasMore:e.hasMore},on:{search:function(t){return e.search()}}})],1)])},Jr=[],Wr={name:"Service",components:{ShopList:Vr},data:function(){return{items:[],loading:!1,hasMore:!0,param:{page:1,rows:20,type:this.$route.params.type}}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.search();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},methods:{search:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,V.show.getTypeShops(e.param);case 3:if(s=t.sent,a=s.data,a.success){t.next=7;break}return t.abrupt("return",Notify({type:"danger",message:a.message}));case 7:e.loading=!1,a.data.length<e.param.rows&&(e.hasMore=!1),e.param.page++,(r=e.items).push.apply(r,Object(Re["a"])(a.data));case 11:case"end":return t.stop()}}),t)})))()}}},Kr=Wr,Qr=(r("2cd4"),Object(D["a"])(Kr,Hr,Jr,!1,null,"ebaca054",null)),Xr=Qr.exports,Zr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame-shell"},[r("div",{staticClass:"page-frame"},[r("div",{staticClass:"page-banner"},[r("div",{staticClass:"page-banner-header row-between-center"},[r("div",[r("a",{on:{click:function(t){return e.goBack()}}},[r("Icon",{attrs:{name:"arrow-left",color:"#ffffff",size:"20"}})],1)]),r("div",[r("a",{staticStyle:{"margin-right":"20px"},on:{click:function(t){e.showShare=!0}}},[r("Icon",{attrs:{name:"share-o",size:"20"}})],1),r("a",{on:{click:function(t){e.following?e.unfollow():e.follow()}}},[e.following?r("Icon",{attrs:{name:"star",color:"#fc6923",size:"20"}}):r("Icon",{attrs:{name:"star-o",color:"#ffffff",size:"20"}})],1)])]),r("div",{staticClass:"page-banner-back"},[r("VanImage",{attrs:{src:e.shop.back,width:"100%",height:"100%",fit:"cover"}})],1),r("div",{staticClass:"page-banner-mask"}),r("div",{staticClass:"shop-banner-info"},[r("div",{staticClass:"row-start-center"},[r("VanImage",{attrs:{src:e.shop.logo,width:"50",height:"50",round:"",fit:"cover"}}),r("div",{staticClass:"base-info"},[r("div",{staticClass:"shop-name"},[r("b",[e._v(e._s(e.shop.name))])]),r("div",{staticClass:"shop-rate row-between-center"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"14",color:"#ffd21e",readonly:"","void-color":"#eee"},model:{value:e.shop.rate,callback:function(t){e.$set(e.shop,"rate",t)},expression:"shop.rate"}}),r("div",{staticClass:"minprice"},[e._v(e._s(e.shop.minprice)+e._s(e.CURRENCY[e.shop.currency])+"起送")])],1)])],1),r("div",{staticClass:"shop-info"},[r("div",{staticClass:"shop-info-item row-start-center"},[r("div",[e._v("支持配送方式:")]),e._l(e.shop.delivery,(function(t,s){return r("Tag",{key:s,staticClass:"tags",attrs:{type:"success"}},[e._v(e._s(e.DELIVERY[t]))])}))],2),r("div",{staticClass:"shop-info-item row-start-center"},[r("div",[e._v("支持付款方式:")]),e._l(e.shop.payment,(function(t,s){return r("Tag",{key:s,staticClass:"tags",attrs:{type:"success"}},[e._v(e._s(e.PAYMENT[t]))])}))],2)])])]),r("div",{staticClass:"page-shop-frame"},[r("div",{staticClass:"tab-frame"},[r("Tabs",{attrs:{background:"#f7f7f7"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[r("Tab",{attrs:{title:"所有商品"}},[r("div",{staticClass:"shop-goods-frame row-between-top"},[r("div",{staticClass:"shop-class-frame"},e._l(e.classList,(function(t,s){return r("div",{key:s,class:["shop-class-item",e.class_active._id===t._id?"active":""],on:{click:function(r){e.class_active=t}}},[r("b",[e._v(e._s(t.name))])])})),0),r("div",{staticClass:"shop-class-goods"},[r("div",{staticClass:"shop-class-item-active"},[r("span",[r("b",[e._v(e._s(e.class_active.name))])])]),e._l(e.classGoodsList,(function(t,s){return r("div",{key:s,staticClass:"shop-goods-item row-between-center"},[r("div",{staticClass:"goods-img-frame",on:{click:function(r){return e.lookPics([t.pics],0)}}},[r("VanImage",{attrs:{src:t.pics,fit:"cover",width:"100%",height:"100%","lazy-load":""}})],1),r("div",{staticClass:"goods-info"},[r("div",{staticClass:"goods-name"},[r("b",[e._v(e._s(t.code))]),e._v(" "),r("b",[e._v(e._s(t.name))])]),r("div",{staticClass:"goods-tags"},[e._l(t.tags,(function(t,s){return r("Tag",{key:s,staticClass:"tags",attrs:{type:"success"}},[e._v(e._s(t))])})),t.stop?r("Tag",{staticClass:"tags",attrs:{type:"danger"}},[e._v("已售完")]):e._e()],2),r("div",[r("div",{staticClass:"goods-price"},[r("b",[e._v(e._s(t.price)+e._s(e.CURRENCY[e.shop.currency])+"/"+e._s(1===t.count?"":t.count)+e._s(e.UNIT[t.unit]))])]),e.ordering||t.stop?e._e():r("div",{staticClass:"order-action row-start-center"},[r("div",{staticClass:"order-sub",on:{click:function(r){return e.order(t,!1)}}},[e._v("-")]),r("div",{staticClass:"order-num"},[e._v(e._s(e.orderList[t._id]?e.orderList[t._id]["count"]:0))]),r("div",{staticClass:"order-add",on:{click:function(r){return e.order(t,!0)}}},[e._v("+")])])])])])}))],2)])]),r("Tab",{attrs:{title:"商家信息"}},[r("div",{staticClass:"shop-info-frame"},[r("div",{staticClass:"shop-info-zone"},[r("h4",[e._v("店铺照片")]),r("div",{staticClass:"shop-pics-list row-between-center"},e._l(e.shop.pics,(function(t,s){return r("div",{key:s,staticClass:"shop-pics-item",on:{click:function(t){return e.lookPics(e.shop.pics,s)}}},[r("VanImage",{attrs:{src:t,fit:"cover",width:"100%",height:"100%"}})],1)})),0),r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"shop",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("店铺介绍："+e._s(e.shop.brief))])],1),r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"map-marked",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("店铺地址："+e._s(e.shop.city)+" - "+e._s(e.shop.address))])],1),r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"underway",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("营业时间："+e._s(e.shop.stime)+" - "+e._s(e.shop.etime))])],1)]),r("div",{staticClass:"shop-info-zone"},[r("h4",[e._v("联系方式")]),e.shop.phone?r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"phone",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("商家电话："+e._s(e.shop.phone))])],1):e._e(),e.shop.wechat?r("div",{staticClass:"shop-info-item row-start-center"},[r("Icon",{attrs:{name:"wechat",size:"22"}}),r("div",{staticClass:"shop-info-text"},[e._v("商家微信："+e._s(e.shop.wechat))])],1):e._e(),e.shop.telegram?r("div",{staticClass:"shop-info-item row-start-center"},[r("VanImage",{attrs:{src:"/img/telegram.svg",fit:"cover",width:"20px",height:"20px"}}),r("div",{staticClass:"shop-info-text"},[e._v("商家飞机："),r("a",{attrs:{href:"https://t.me/"+e.shop.telegram,target:"_blank"}},[e._v(e._s(e.shop.telegram))])])],1):e._e()]),r("div",{staticClass:"shop-info-zone"},[r("h4",[e._v("商家公告")]),r("div",{staticClass:"shop-info-item"},[e._v(" "+e._s(e.shop.notice)+" ")])]),r("div",{staticClass:"shop-info-zone"},[r("h4",[e._v("商家优惠")]),r("div",{staticClass:"shop-info-item"},[e.shop.discount?e._e():r("div",{staticClass:"list"},[e._v(" 暂无优惠信息 ")]),r("div",{staticClass:"discount-text"},[e._v(e._s(e.shop.discount))])])]),r("div",{staticClass:"shop-info-zone"},[r("h4",[e._v("平台优惠")]),r("div",{staticClass:"shop-info-item"},[e.shop.p_discount?e._e():r("div",{staticClass:"list"},[e._v(" 暂无优惠信息 ")]),r("div",{staticClass:"discount-text"},[e._v(e._s(e.shop.p_discount))])])])])]),r("Tab",{attrs:{title:"用户点评"}},[r("div",{staticClass:"shop-review-frame"},[r("Review",{attrs:{shopid:e.$route.params._id}})],1)])],1)],1),r("div")]),e.active?e._e():r("div",{staticClass:"shopping-cart row-center-center",on:{click:function(t){return e.showCartAtion()}}},[r("div",{staticClass:"shopping-cart-button row-center-center"},[r("VanImage",{attrs:{src:"/img/shop/shopping-cart.png",width:"30"}}),r("div",{staticStyle:{"margin-left":"10px"}},[e._v("购买商品("+e._s(e.orderCount)+")")])],1)])]),r("ActionSheet",{attrs:{title:"购物订单"},model:{value:e.showCart,callback:function(t){e.showCart=t},expression:"showCart"}},[r("div",{staticClass:"order-info"},[r("div",{staticClass:"order-base"},[r("p",[e._v("请选择收货地址:")]),r("div",{staticClass:"uinfo-list"},[r("RadioGroup",{model:{value:e.uinfo,callback:function(t){e.uinfo=t},expression:"uinfo"}},e._l(e.infoList,(function(t,s){return r("div",{key:s,staticClass:"uinfo-item"},[r("Radio",{attrs:{name:t}},[r("div",{staticClass:"row-start-center"},[e._v("称呼："+e._s(t.name)+" ｜ 地址："+e._s(t.address))]),r("br"),r("div",{staticClass:"row-start-center"},[e._v("电话："+e._s(t.phone)+" ｜ 微信："+e._s(t.wechat)+" ｜ 飞机：@"+e._s(t.telegram))])])],1)})),0),e.infoList.length<6?r("div",{staticClass:"uinfo-item row-start-center",on:{click:function(t){return e.$store.dispatch("setAddress",{show:!0,info:null})}}},[r("Icon",{attrs:{name:"add-o",size:"20"}}),r("span",{staticStyle:{"margin-left":"10px",cursor:"pointer"}},[e._v("新增地址")])],1):e._e()],1)]),r("div",{staticClass:"order-base"},[r("p",[e._v("付款方式:")]),r("br"),r("RadioGroup",{model:{value:e.orderInfo.payment,callback:function(t){e.$set(e.orderInfo,"payment",t)},expression:"orderInfo.payment"}},[r("div",{staticClass:"row-start-center"},e._l(e.shop.payment,(function(t,s){return r("div",{staticClass:"payment-action"},[r("Radio",{attrs:{name:t}},[e._v(e._s(e.PAYMENT[t]))])],1)})),0)])],1),r("div",{staticClass:"order-list"},e._l(e.orderList,(function(t,s){return r("div",{key:s},[r("div",{staticClass:"order-item row-start-top"},[r("div",{staticClass:"order-item-pics",on:{click:function(r){return e.lookPics(t.info.pics)}}},[r("VanImage",{attrs:{src:t.info.pics,fit:"cover",width:"100px",height:"60px"}})],1),r("div",{staticClass:"order-item-name"},[r("p",[e._v(e._s(t.info.code)+" "+e._s(t.info.name)+" * "+e._s(t.count))]),r("br"),r("p",[r("b",[e._v(e._s(t.amount))]),e._v(" "+e._s(e.CURRENCY[e.shop.currency]))])])])])})),0),r("div",{staticClass:"order-memo"},[r("Field",{attrs:{rows:"2",autosize:"",label:"客户备注",type:"textarea",maxlength:"150",placeholder:"可备注您的要求，比如口味，忌口等","show-word-limit":""},model:{value:e.orderInfo.memo,callback:function(t){e.$set(e.orderInfo,"memo",t)},expression:"orderInfo.memo"}})],1),r("div",{staticClass:"order-base discount"},[e._v(" 商家优惠："+e._s(e.shop.discount)+" ")]),r("div",{staticClass:"order-base discount"},[e._v(" 平台优惠："+e._s(e.shop.p_discount)+" ")]),r("div",{staticClass:"order-create row-between-center"},[r("div",{staticClass:"order-amount"},[r("b",[e._v("商品总计： "+e._s(e.orderAmount)+" "+e._s(e.CURRENCY[e.shop.currency]))])]),r("div",[r("Button",{attrs:{round:"",type:"info",size:"small",disabled:!e.orderAmount||e.orderAmount<e.shop.minprice},on:{click:function(t){return e.createOrder()}}},[e._v(" 生成订单 ")])],1)])])]),r("ActionSheet",{attrs:{title:"游客下单"},model:{value:e.showCartNoLogin,callback:function(t){e.showCartNoLogin=t},expression:"showCartNoLogin"}},[r("div",{staticClass:"order-info"},[r("div",{staticClass:"order-base"},[r("p",[e._v("请填写收货信息:")]),r("div",{staticClass:"uinfo-list"},[r("div",{staticClass:"row-start-center"},[r("Field",{attrs:{placeholder:"您的称呼",required:""},model:{value:e.uinfoNoLogin.name,callback:function(t){e.$set(e.uinfoNoLogin,"name",t)},expression:"uinfoNoLogin.name"}})],1),r("br"),r("div",{staticClass:"row-start-center"},[r("Field",{attrs:{placeholder:"您的收货地址",required:""},model:{value:e.uinfoNoLogin.address,callback:function(t){e.$set(e.uinfoNoLogin,"address",t)},expression:"uinfoNoLogin.address"}})],1),r("br"),r("div",{staticClass:"row-start-center"},[r("Field",{attrs:{placeholder:"您的电话号",type:"number",required:""},model:{value:e.uinfoNoLogin.phone,callback:function(t){e.$set(e.uinfoNoLogin,"phone",t)},expression:"uinfoNoLogin.phone"}})],1),r("br"),r("div",{staticClass:"row-start-center"},[r("Field",{attrs:{placeholder:"您的微信号"},model:{value:e.uinfoNoLogin.wechat,callback:function(t){e.$set(e.uinfoNoLogin,"wechat",t)},expression:"uinfoNoLogin.wechat"}})],1),r("br"),r("div",{staticClass:"row-start-center"},[r("Field",{attrs:{placeholder:"您的飞机号，不需要带@",formatter:e.checkTelgram},model:{value:e.uinfoNoLogin.telegram,callback:function(t){e.$set(e.uinfoNoLogin,"telegram",t)},expression:"uinfoNoLogin.telegram"}})],1)])]),r("div",{staticClass:"order-base"},[r("p",[e._v("付款方式:")]),r("br"),r("RadioGroup",{model:{value:e.orderInfo.payment,callback:function(t){e.$set(e.orderInfo,"payment",t)},expression:"orderInfo.payment"}},[r("div",{staticClass:"row-start-center"},e._l(e.shop.payment,(function(t,s){return r("div",{staticClass:"payment-action"},[r("Radio",{attrs:{name:t}},[e._v(e._s(e.PAYMENT[t]))])],1)})),0)])],1),r("div",{staticClass:"order-list"},e._l(e.orderList,(function(t,s){return r("div",{key:s},[r("div",{staticClass:"order-item row-start-top"},[r("div",{staticClass:"order-item-pics",on:{click:function(r){return e.lookPics(t.info.pics)}}},[r("VanImage",{attrs:{src:t.info.pics,fit:"cover",width:"100px",height:"60px"}})],1),r("div",{staticClass:"order-item-name"},[r("p",[e._v(e._s(t.info.code)+" "+e._s(t.info.name)+" * "+e._s(t.count))]),r("br"),r("p",[r("b",[e._v(e._s(t.amount))]),e._v(" "+e._s(e.CURRENCY[e.shop.currency]))])])])])})),0),r("div",{staticClass:"order-memo"},[r("Field",{attrs:{rows:"2",autosize:"",label:"客户备注",type:"textarea",maxlength:"150",placeholder:"可备注您的要求，比如口味，忌口等","show-word-limit":""},model:{value:e.orderInfo.memo,callback:function(t){e.$set(e.orderInfo,"memo",t)},expression:"orderInfo.memo"}})],1),r("div",{staticClass:"order-base discount"},[e._v(" 商家优惠："+e._s(e.shop.discount)+" ")]),r("div",{staticClass:"order-base discount"},[e._v(" 平台优惠："+e._s(e.shop.p_discount)+" ")]),r("div",{staticClass:"order-create row-between-center"},[r("div",{staticClass:"order-amount"},[r("b",[e._v("商品总计： "+e._s(e.orderAmount)+" "+e._s(e.CURRENCY[e.shop.currency]))])]),r("div",[r("Button",{attrs:{round:"",type:"info",size:"small",disabled:!e.orderAmount||e.orderAmount<e.shop.minprice},on:{click:function(t){return e.createOrderNoLogin()}}},[e._v(" 生成订单 ")])],1)])])]),e.shop._id?r("ShareSheet",{attrs:{title:e.shop.name,options:e.options},on:{select:e.shareTo},model:{value:e.showShare,callback:function(t){e.showShare=t},expression:"showShare"}}):e._e(),r("Dialog",{attrs:{"show-confirm-button":!1},model:{value:e.showCopy,callback:function(t){e.showCopy=t},expression:"showCopy"}},[r("div",{staticClass:"clipboard-frame"},[r("div",{staticClass:"order-text-frame"},[r("p",{domProps:{innerHTML:e._s(e.format(e.orderText))}})]),r("br"),r("Button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.orderText,expression:"orderText",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],attrs:{id:"order-info-clipboard",round:"",color:"linear-gradient(to right, #ff6034, #ee0a24)"}},[e._v(" 点击复制订单内容到剪切板 ")])],1)])],1)},es=[],ts=(r("d356"),r("48bd")),rs=(r("2cbd"),r("ab2c")),ss=(r("bda7"),r("5e46")),as=(r("da3c"),r("0b33")),ns=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"review-frame"},[e._l(e.items,(function(t,s){return r("div",{key:s,staticClass:"review-item"},[r("div",{staticClass:"user-info row-start-center"},[r("VanImage",{attrs:{src:t.user.avatar,width:"50",height:"50",fit:"cover",round:""}}),r("div",{staticClass:"user-name"},[r("b",[e._v(e._s(t.user.name))])])],1),r("div",{staticClass:"review-info"},[r("div",{staticClass:"review-rate"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"14",color:"#ffd21e",readonly:"","void-color":"#eee"},model:{value:t.rate,callback:function(r){e.$set(t,"rate",r)},expression:"item.rate"}})],1),r("div",{staticClass:"review-pics row-start-center"},e._l(t.pics,(function(t,s){return r("div",{key:s,staticClass:"pic-item",on:{click:function(r){return e.lookPics(t)}}},[r("VanImage",{attrs:{src:t,width:"100%",height:"100%",fit:"cover"}})],1)})),0),r("div",{staticClass:"review-text"},[e._v(" "+e._s(t.text)+" ")]),r("div",{staticClass:"review-time"},[e._v(" "+e._s(e._f("formatTime")(t.created_at))+" ")]),r("div",{staticClass:"review-action row-start-center"},[t.ownerid!==e.user._id||t.reply?e._e():r("div",{staticClass:"action-item"},[r("a",{on:{click:function(r){e.reply._id=t._id,e.reply.key=s,e.reply.show=!0}}},[e._v("回复评论")])]),e._v(" "),t.user._id===e.user._id?r("div",{staticClass:"action-item"},[r("a",{on:{click:function(r){return e.delReview(t._id,s)}}},[e._v("删除评论")])]):e._e()]),t.reply&&t.ownerid===e.user._id?r("div",[r("div",{staticClass:"review-reply"},[r("b",[e._v("商家回复：")]),e._v(e._s(t.reply)+" ")]),r("div",{staticClass:"review-action row-start-center"},[r("div",{staticClass:"action-item"},[r("a",{on:{click:function(r){return e.delReply(t._id,s)}}},[e._v("删除回复")])])])]):e._e()])])})),e.hasMore?r("div",{staticClass:"review-more row-center-center"},[r("Button",{staticStyle:{width:"150px"},attrs:{round:"",type:"primary",loading:e.loading},on:{click:function(t){return e.getReview()}}},[e._v("查看更多")])],1):e._e(),r("Overlay",{attrs:{show:e.reply.show,"z-index":"150"}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.reply.show=!1}}},[r("div",{staticClass:"review-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-text"},[r("h3",[e._v("回复评价")]),r("div",{staticClass:"reply-item"},[r("Field",{attrs:{rows:"4",autosize:"",type:"textarea",placeholder:"请输入回复内容",maxlength:"150","show-word-limit":""},model:{value:e.reply.text,callback:function(t){e.$set(e.reply,"text",t)},expression:"reply.text"}})],1)]),r("div",{staticClass:"review-action row-start-center"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.replyReview()}}},[e._v("提交评价")]),r("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"warning"},on:{click:function(t){return e.resetReply()}}},[e._v("取消提交")])],1)])])])],2)},is=[],os={name:"Review",props:["shopid"],components:{VanImage:p["a"],Rate:Oe["a"],Button:m["a"],Overlay:v["a"],Field:h["a"]},filters:{formatTime:function(e){return R(e)}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getReview();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{params:{page:1,rows:50},items:[],hasMore:!0,loading:!1,reply:{_id:"",text:"",key:"",show:!1}}},computed:{user:function(){var e=this.$store.state.user?this.$store.state.user:{};return e}},methods:{getReview:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,V.review.getReview(Object(lt["a"])(Object(lt["a"])({},e.params),{},{shopid:e.shopid}));case 3:if(s=t.sent,a=s.data,e.loading=!1,a.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 8:e.params.page++,a.data.length<e.params.rows&&(e.hasMore=!1),(r=e.items).push.apply(r,Object(Re["a"])(a.data));case 11:case"end":return t.stop()}}),t)})))()},lookPics:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(st["a"])({images:[e],closeable:!0});case 1:case"end":return t.stop()}}),t)})))()},delReview:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:at["a"].confirm({title:"删除评价",message:"确认删除该评价吗？删除后不可恢复"}).then(Object(l["a"])(regeneratorRuntime.mark((function s(){var a,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,V.review.delReview(e);case 2:if(a=s.sent,n=a.data,n.success){s.next=6;break}return s.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:return r.items.splice(t,1),s.abrupt("return",Object(d["a"])({type:"success",message:n.message}));case 8:case"end":return s.stop()}}),s)})))).catch((function(){}));case 1:case"end":return s.stop()}}),s)})))()},replyReview:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.review.replyReview(e.reply._id,e.reply.text);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:return e.items[e.reply.key].reply=e.reply.text,e.resetReply(),t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 9:case"end":return t.stop()}}),t)})))()},delReply:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:at["a"].confirm({title:"删除回复",message:"确认删除该回复吗？"}).then(Object(l["a"])(regeneratorRuntime.mark((function s(){var a,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,V.review.delReply(e);case 2:if(a=s.sent,n=a.data,n.success){s.next=6;break}return s.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 6:return r.items[t].reply="",s.abrupt("return",Object(d["a"])({type:"success",message:n.message}));case 8:case"end":return s.stop()}}),s)})))).catch((function(){}));case 1:case"end":return s.stop()}}),s)})))()},resetReply:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.reply={_id:"",text:"",key:"",show:!1};case 1:case"end":return t.stop()}}),t)})))()}}},cs=os,us=(r("6b8a"),Object(D["a"])(cs,ns,is,!1,null,"46d27368",null)),ds=us.exports,ls={telegram:"https://t.me/share/url?url=@u&text=@t",whatsapp:"https://api.whatsapp.com/send?text=@t%0D%0A@u%0D%0A@d",line:"http://line.me/R/msg/text/?@t%0D%0A@u%0D%0A@d",facebook:"https://www.facebook.com/sharer/sharer.php?u=@u&title=@t&description=@d&quote=@q&hashtag=@h"},ps=function(e,t,r,s){if("link"===e)return y(t);if(ls[e]){var a=ls[e].replace(/@u/g,encodeURIComponent(t)).replace(/@t/g,encodeURIComponent(r)).replace(/@d/g,encodeURIComponent(s));window.open(a,"_blank")}},ms={name:"Shop",components:{VanImage:p["a"],Rate:Oe["a"],Tag:Te["a"],Icon:ct["a"],Badge:ot["a"],Overlay:v["a"],Field:h["a"],Button:m["a"],RadioGroup:it["a"],Radio:nt["a"],Tab:as["a"],Tabs:ss["a"],Review:ds,ActionSheet:rs["a"],ShareSheet:ts["a"],Dialog:at["a"].Component},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getShop();case 3:return t.next=5,e.isfollow();case 5:e.$store.dispatch("setLoading",!1);case 6:case"end":return t.stop()}}),t)})))()},beforeRouteEnter:function(e,t,r){bt=t,r()},data:function(){return{PAYMENT:Pe,DELIVERY:Fe,CURRENCY:ze,UNIT:Be,active:0,shop:{},classList:[],goodsList:[],following:!1,class_active:"",ordering:!1,showCart:!1,orderList:{},uinfo:"",orderInfo:{uinfo:"",memo:"",payment:0,items:[],total:0,currency:"",shopid:""},showCartNoLogin:!1,uinfoNoLogin:{name:"",address:"",phone:"",wechat:"",telegram:""},showShare:!1,options:[{name:"telegram",icon:"/img/share/telegram.png"},{name:"whatsapp",icon:"/img/share/whatsapp.png"},{name:"line",icon:"/img/share/line.png"},{name:"facebook",icon:"/img/share/facebook.png"},{name:"link",icon:"link"}],orderText:"",showCopy:!1}},computed:{user:function(){return this.$store.state.user},infoList:function(){return this.$store.state.infoList},classGoodsList:function(){var e=this,t=this.goodsList.filter((function(t,r){return-1!==t.classid.indexOf(e.class_active._id)}));return t},orderCount:function(){var e=0;for(var t in this.ordering,this.orderList)e+=this.orderList[t].count;return e},orderAmount:function(){var e=0;for(var t in this.ordering,this.orderList)e+=this.orderList[t].amount;return e}},methods:{shareTo:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:ps(e.name,window.location.href,t.shop.name,t.shop.brief),t.showShare=!1;case 2:case"end":return r.stop()}}),r)})))()},goBack:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(bt.name){t.next=2;break}return t.abrupt("return",e.$router.push("/"));case 2:e.$router.go(-1);case 3:case"end":return t.stop()}}),t)})))()},isfollow:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.follow.isfollow(e.$route.params._id);case 2:r=t.sent,s=r.data,s.success&&(e.following=!!s.data);case 5:case"end":return t.stop()}}),t)})))()},getShop:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.show.getShop(e.$route.params._id);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:a=s.data,n=a.shop,i=a.classList,o=a.goodsList,e.shop=n,e.classList=i,e.goodsList=o,i.length&&(e.class_active=i[0]);case 11:case"end":return t.stop()}}),t)})))()},order:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(r.ordering=!0,r.orderList[e._id]||(r.orderList[e._id]={count:0,amount:0,info:{}}),!t){s.next=8;break}r.orderList[e._id]["count"]=r.orderList[e._id]["count"]+1,r.orderList[e._id]["amount"]=r.orderList[e._id]["count"]*e.price,r.orderList[e._id]["info"]={name:e.name,code:e.code,pics:e.pics},s.next=15;break;case 8:if(!(r.orderList[e._id]["count"]<=1)){s.next=12;break}return delete r.orderList[e._id],r.ordering=!1,s.abrupt("return");case 12:r.orderList[e._id]["count"]=r.orderList[e._id]["count"]-1,r.orderList[e._id]["amount"]=r.orderList[e._id]["count"]*e.price,r.orderList[e._id]["info"]={name:e.name,code:e.code,pics:e.pics};case 15:r.ordering=!1;case 16:case"end":return s.stop()}}),s)})))()},createOrder:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r in e.orderInfo.currency=e.shop.currency,e.orderInfo.items=[],e.orderList)e.orderInfo.items.push(e.orderList[r]);if(e.orderInfo.total=e.orderAmount,e.orderInfo.shopid=e.shop._id,e.uinfo){t.next=7;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请选择收货地址"}));case 7:if(e.orderInfo.total){t.next=9;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请选择购买的商品"}));case 9:return e.orderInfo.uinfo="称呼：".concat(e.uinfo.name,"\n地址：").concat(e.uinfo.address,"\n").concat(e.uinfo.phone?"电话："+e.uinfo.phone+"\n":"").concat(e.uinfo.wechat?"微信："+e.uinfo.wechat+"\n":"").concat(e.uinfo.telegram?"飞机：@"+e.uinfo.telegram:""),t.next=12,V.order.newOrder(e.orderInfo);case 12:if(s=t.sent,a=s.data,a.success){t.next=16;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 16:e.orderInfo.orderId=a.orderId,Object(d["a"])({type:"success",message:a.message}),e.createOrderText(),e.showCart=!1;case 20:case"end":return t.stop()}}),t)})))()},createOrderNoLogin:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r in e.orderInfo.currency=e.shop.currency,e.orderInfo.items=[],e.orderList)e.orderInfo.items.push(e.orderList[r]);if(e.orderInfo.total=e.orderAmount,e.orderInfo.shopid=e.shop._id,e.uinfoNoLogin.name&&e.uinfoNoLogin.address&&e.uinfoNoLogin.phone){t.next=7;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请选择收货信息不完善"}));case 7:if(e.orderInfo.total){t.next=9;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请选择购买的商品"}));case 9:return e.orderInfo.uinfo="称呼：".concat(e.uinfoNoLogin.name,"\n地址：").concat(e.uinfoNoLogin.address,"\n").concat(e.uinfoNoLogin.phone?"电话："+e.uinfoNoLogin.phone+"\n":"").concat(e.uinfoNoLogin.wechat?"微信："+e.uinfoNoLogin.wechat+"\n":"").concat(e.uinfoNoLogin.telegram?"飞机：@"+e.uinfoNoLogin.telegram:""),t.next=12,V.order.newOrderAgency(e.orderInfo);case 12:if(s=t.sent,a=s.data,a.success){t.next=16;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 16:e.orderInfo.orderId=a.orderId,Object(d["a"])({type:"success",message:a.message}),e.createOrderText(),e.showCartNoLogin=!1,e.orderList={},e.orderInfo={uinfo:"",memo:"",payment:0,items:[],total:0,currency:"",shopid:""};case 22:case"end":return t.stop()}}),t)})))()},createOrderText:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i,o,c,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(r=e.orderInfo,s=r.items,a=r.total,n=r.currency,i=r.uinfo,o=r.payment,c=r.memo,u=r.orderId,e.orderText="点单商品：\n\n",d=0;d<s.length;d++)e.orderText+="".concat(d+1,"：").concat(s[d].info.code,"*").concat(s[d].count,"(").concat(s[d].info.name,") ").concat(s[d].amount,"\n");e.orderText+="\n总计：".concat(a," ").concat(e.CURRENCY[n],"\n"),e.orderText+="\n付款方式：".concat(e.PAYMENT[o],"\n"),e.orderText+="\n联系方式：\n\n".concat(i,"\n"),e.orderText+="\n备注：".concat(c,"\n"),e.orderText+="\n商家优惠：".concat(e.shop.discount,"\n"),e.orderText+="\n平台优惠：".concat(e.shop.p_discount,"\n"),e.orderText+="\n订单码：".concat(u,"\n"),e.showCopy=!0;case 11:case"end":return t.stop()}}),t)})))()},showCartAtion:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user){t.next=3;break}return e.showCartNoLogin=!0,t.abrupt("return");case 3:if(e.user)for(r in e.showCart=!0,e.infoList)e.infoList[r].default&&(e.uinfo=e.infoList[r]);else e.$store.dispatch("setAccount","login");case 4:case"end":return t.stop()}}),t)})))()},follow:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user){t.next=2;break}return t.abrupt("return",e.$store.dispatch("setAccount","login"));case 2:return t.next=4,V.follow.follow(e.$route.params._id);case 4:if(r=t.sent,s=r.data,s.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 8:return e.following=!0,t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 10:case"end":return t.stop()}}),t)})))()},unfollow:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user){t.next=2;break}return t.abrupt("return",e.$store.dispatch("setAccount","login"));case 2:return t.next=4,V.follow.unfollow(e.$route.params._id);case 4:if(r=t.sent,s=r.data,s.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 8:return e.following=!1,t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 10:case"end":return t.stop()}}),t)})))()},lookPics:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:Object(st["a"])({images:e,startPosition:t,closeable:!0});case 1:case"end":return r.stop()}}),r)})))()},checkTelgram:function(e){return e.replace(/[^\w_]/g,"")},onCopy:function(){var e=this;this.showCopy=!1,at["a"].alert({title:"发送订单信息给商家",message:"订单信息已经复制到您的剪切板，请点击 通知商家 并粘贴订单信息给商家",confirmButtonText:"通知商家",theme:"round-button"}).then((function(){window.open("https://t.me/".concat(e.shop.telegram)),e.user&&e.$router.push("/user/2")}))},onError:function(){var e=this;this.showCopy=!1,at["a"].alert({title:"发送订单信息给商家",message:"订单信息复制失败，请通知商家去后台查看订单信息！",confirmButtonText:"通知商家",theme:"round-button"}).then((function(){window.open("https://t.me/".concat(e.shop.telegram)),e.user&&e.$router.push("/user/2")}))}}},fs=ms,hs=(r("93e9"),Object(D["a"])(fs,Zr,es,!1,null,"58e7d2a2",null)),vs=hs.exports,gs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-frame"},[r("Header",{attrs:{title:"个人中心"}}),r("div",{staticClass:"page-body"},[r("div",{staticClass:"block-frame"},[r("div",{staticClass:"block-item-frame row-between-center"},[r("div",{class:["block-item",0===e.active?"block-item-active":""],on:{click:function(t){return e.$router.push("/user/0")}}},[r("VanImage",{attrs:{src:"/img/mobile/user/info.png",width:"50",height:"50",fit:"cover"}}),e._m(0)],1),r("div",{class:["block-item",1===e.active?"block-item-active":""],on:{click:function(t){return e.$router.push("/user/1")}}},[r("VanImage",{attrs:{src:"/img/mobile/user/address.png",width:"50",height:"50",fit:"cover"}}),e._m(1)],1),r("div",{class:["block-item",2===e.active?"block-item-active":""],on:{click:function(t){return e.$router.push("/user/2")}}},[r("VanImage",{attrs:{src:"/img/mobile/user/order.png",width:"50",height:"50",fit:"cover"}}),e._m(2)],1),r("div",{class:["block-item",3===e.active?"block-item-active":""],on:{click:function(t){return e.$router.push("/user/3")}}},[r("VanImage",{attrs:{src:"/img/mobile/user/follow.png",width:"50",height:"50",fit:"cover"}}),e._m(3)],1),r("div",{class:["block-item",4===e.active?"block-item-active":""],on:{click:function(t){return e.$router.push("/user/4")}}},[r("VanImage",{attrs:{src:"/img/mobile/user/shop.png",width:"50",height:"50",fit:"cover"}}),e._m(4)],1)])]),0===e.active?r("div",[r("UserBaseInfo")],1):e._e(),1===e.active?r("div",[r("UserAddressInfo")],1):e._e(),2===e.active?r("div",[r("UserOrderInfo")],1):e._e(),3===e.active?r("div",[r("UserFollowInfo")],1):e._e(),4===e.active?r("div",[r("UserShopInfo")],1):e._e(),5===e.active?r("div",[r("ShopOrderInfo")],1):e._e()])],1)},ws=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b",[e._v("账号信息")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b",[e._v("地址管理")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b",[e._v("订单管理")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b",[e._v("我的关注")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b",[e._v("我的店铺")])])}],bs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"block-frame"},[r("div",{staticClass:"user-info-frame"},[r("div",{staticClass:"row-start-center info-item"},[r("div",{staticClass:"info-label"},[e._v("账号")]),r("div",{staticClass:"info-value"},[e._v(e._s(e.user.account))])]),r("div",{staticClass:"row-start-center info-item"},[r("div",{staticClass:"info-label"},[e._v("头像")]),r("div",{staticClass:"info-value"},[e.edit?r("VanImage",{attrs:{src:e.editInfo.avatar,round:"",width:"50px",height:"50px"}}):r("VanImage",{attrs:{src:e.user.avatar,round:"",width:"50px",height:"50px"}}),r("div",[r("Upload",{attrs:{type:"avatar",single:"getAvatarUrl"},on:{getUrl:e.getAvatarUrl}},[e.edit?r("Button",{attrs:{type:"info",size:"mini"}},[e._v("更换头像")]):e._e()],1)],1)],1)]),r("div",{staticClass:"row-start-center info-item"},[r("div",{staticClass:"info-label"},[e._v("昵称")]),e.edit?r("div",{staticClass:"info-value"},[r("Field",{staticStyle:{padding:"0",border:"1px solid gray"},attrs:{placeholder:"更新昵称"},model:{value:e.editInfo.name,callback:function(t){e.$set(e.editInfo,"name",t)},expression:"editInfo.name"}})],1):r("div",{staticClass:"info-value"},[e._v(e._s(e.user.name))])]),r("div",{staticClass:"row-start-center info-item"},[e.edit?e._e():r("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.editUser()}}},[e._v("修改信息")]),e.edit?r("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.updateUser()}}},[e._v("更改信息")]):e._e(),e.edit?r("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",size:"small"},on:{click:function(t){e.edit=!1}}},[e._v("放弃更改")]):e._e()],1)])])},_s=[],xs={components:{VanImage:p["a"],Button:m["a"],Field:h["a"],Icon:ct["a"],Notify:d["a"],Upload:Lt},computed:{user:function(){var e=this.$store.state.user?this.$store.state.user:{};return e}},data:function(){return{edit:!1,editInfo:{name:"",avatar:""}}},methods:{editUser:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.editInfo.name||(e.editInfo.name=e.user.name),e.editInfo.avatar||(e.editInfo.avatar=e.user.avatar),e.edit=!0;case 3:case"end":return t.stop()}}),t)})))()},updateUser:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.editInfo.name.trim()&&e.editInfo.avatar.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"更新信息缺失"}));case 2:if(!(e.editInfo.name.length>8)){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"昵称不要超过十个字"}));case 4:return t.next=6,V.user.updateUser(e.editInfo.name,e.editInfo.avatar);case 6:if(r=t.sent,s=r.data,s.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 10:e.$store.dispatch("getUser"),e.edit=!1,Object(d["a"])({type:"success",message:"更新成功"});case 13:case"end":return t.stop()}}),t)})))()},getAvatarUrl:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.editInfo.avatar=e;case 1:case"end":return r.stop()}}),r)})))()}}},Cs=xs,ks=(r("a06d"),Object(D["a"])(Cs,bs,_s,!1,null,"090d5c58",null)),ys=ks.exports,Rs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"block-frame"},[r("div",{staticClass:"address-list-frame row-start-center"},[e._l(e.infoList,(function(t,s){return r("div",{key:s,staticClass:"address-item"},[r("div",{staticClass:"row-between-center"},[r("div",{staticClass:"info-name"},[r("b",[e._v(e._s(t.name))]),e._v(" "),t.default?r("span",{staticStyle:{"font-size":"14px"}},[e._v("(默认地址)")]):e._e()]),r("div",[r("span",[r("a",{on:{click:function(r){return e.$store.dispatch("setAddress",{show:!0,info:t})}}},[e._v("修改")])]),e._v(" "),t.default?e._e():r("span",[r("a",{on:{click:function(r){return e.setDefault(t._id)}}},[e._v("设为默认")])]),e._v(" "),r("span",[r("a",{on:{click:function(r){return e.delInfo(t._id)}}},[e._v("删除")])])])]),r("div",{staticClass:"info-address"},[e._v(" "+e._s(t.address)+" ")])])})),e.infoList.length<6?r("div",{staticClass:"address-item row-center-center",on:{click:function(t){return e.$store.dispatch("setAddress",{show:!0,info:null})}}},[r("Icon",{attrs:{name:"add-o",size:"50"}})],1):e._e()],2)])},Os=[],js={components:{Icon:ct["a"],Notify:d["a"],Dialog:at["a"]},computed:{user:function(){var e=this.$store.state.user?this.$store.state.user:{};return e},infoList:function(){return this.$store.state.infoList}},data:function(){return{}},methods:{setDefault:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.info.setDefault(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:t.$store.dispatch("getInfoList"),Object(d["a"])({type:"success",message:"更新成功"});case 8:case"end":return r.stop()}}),r)})))()},delInfo:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"是否删除该地址信息"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.info.delInfo(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:t.$store.dispatch("getInfoList");case 7:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()}}},Is=js,Es=(r("ceae"),Object(D["a"])(Is,Rs,Os,!1,null,"fcefb938",null)),$s=Es.exports,Ss=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"block-frame"},[r("div",{staticClass:"user-order-frame"},[r("div",{staticClass:"order-status-list"},[r("CheckboxGroup",{on:{change:function(t){return e.getUserOrder()}},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},[r("div",{staticClass:"status-list row-start-center"},e._l(e.ORDERSTATUS,(function(t,s){return r("span",{key:s,staticStyle:{margin:"5px"}},[r("Checkbox",{attrs:{name:s,shape:"square"}},[e._v(e._s(t))])],1)})),0)])],1),r("div",{staticClass:"order-list-frame"},[e._l(e.items,(function(t,s){return r("div",{key:s,staticClass:"order-item"},[r("div",{staticClass:"row-between-center"},[r("div",{staticClass:"order-logo"},[r("VanImage",{attrs:{src:t.shop.logo,width:"100%",height:"100%",fit:"cover"}})],1),r("div",{staticClass:"order-info"},[r("div",{staticClass:"title"},[r("router-link",{attrs:{to:"/shop/"+t.shop._id}},[e._v(" "+e._s(t.shop.name)+" ")])],1),r("div",[e._v(e._s(e.PAYMENT[t.payment])+"、"+e._s(e.DELIVERY[t.delivery]))]),r("div",{staticClass:"row-between-center"},[r("div",[r("b",{staticStyle:{color:"red"}},[e._v(e._s(t.total)+" "+e._s(e.CURRENCY[t.currency]))])]),r("div",{staticStyle:{color:"red"}},[e._v(e._s(e.ORDERSTATUS[t.status]))])]),r("div",{staticClass:"time"},[e._v(e._s(e._f("formatTime")(t.created_at)))])])]),r("div",{staticClass:"order-action-frame"},[r("Button",{staticClass:"order-action",attrs:{type:"info"},on:{click:function(r){e.orderInfo=t,e.showInfo=!0}}},[e._v("查看")]),-1!==[0,1].indexOf(t.status)?r("Button",{staticClass:"order-action",attrs:{type:"danger"},on:{click:function(r){return e.cancelOrderUser(t)}}},[e._v("撤单")]):e._e(),3===t.status?r("Button",{staticClass:"order-action",attrs:{type:"primary"},on:{click:function(r){return e.finishOrder(t._id)}}},[e._v("订单完成")]):e._e(),4!==t.status||t.comment?e._e():r("Button",{staticClass:"order-action",attrs:{type:"primary"},on:{click:function(r){e.review.orderid=t._id,e.showReview=!0}}},[e._v("评价")])],1)])})),r("Pagination",{attrs:{"items-per-page":e.params.rows,"total-items":e.total},on:{change:function(t){return e.getUserOrder()}},model:{value:e.params.page,callback:function(t){e.$set(e.params,"page",t)},expression:"params.page"}})],2)]),r("ActionSheet",{attrs:{title:"订单详情"},model:{value:e.showInfo,callback:function(t){e.showInfo=t},expression:"showInfo"}},[r("div",{staticClass:"order-info-frame"},[r("div",{staticClass:"order-info-item"},e._l(e.orderInfo.items,(function(t,s){return r("div",{key:s,staticClass:"order-item row-between-top"},[r("div",{staticClass:"row-start-top"},[r("div",{staticClass:"order-item-pics"},[r("VanImage",{attrs:{src:t.info.pics,fit:"cover",width:"120px",height:"80px"}})],1),r("div",{staticClass:"order-item-name"},[r("div",[e._v(e._s(t.info.code)+" "+e._s(t.info.name)+" * "+e._s(t.count))]),r("br"),r("div",[e._v(e._s(t.amount)+" "+e._s(e.CURRENCY[e.orderInfo.currency]))])])])])})),0),r("div",{staticClass:"order-info-item"},[r("p",[e._v("总计："),r("b",[e._v(e._s(e.orderInfo.total))]),e._v(" "+e._s(e.CURRENCY[e.orderInfo.currency]))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("付款方式："),r("b",[e._v(e._s(e.PAYMENT[e.orderInfo.payment]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送方式："),r("b",[e._v(e._s(e.DELIVERY[e.orderInfo.delivery]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送信息")]),r("p",{staticStyle:{"white-space":"pre-line","margin-top":"10px"}},[e._v(" "+e._s(e.orderInfo.uinfo)+" ")])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单备注："+e._s(e.orderInfo.memo))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("下单时间："+e._s(e._f("formatTime")(e.orderInfo.created_at)))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单状态："),r("b",{staticStyle:{color:"red"}},[e._v(e._s(e.ORDERSTATUS[e.orderInfo.status]))])])])])]),r("Overlay",{attrs:{show:e.showReview,"z-index":"150"},on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.showReview=!1}}},[r("div",{staticClass:"review-info-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"order-rate"},[r("h3",[e._v("订单评分")]),r("div",{staticClass:"review-item row-start-center"},[r("Rate",{attrs:{"allow-half":"","void-icon":"star",size:"30",color:"#ffd21e","void-color":"#eee"},model:{value:e.review.rate,callback:function(t){e.$set(e.review,"rate",t)},expression:"review.rate"}}),r("div",{staticClass:"rate-count"},[e._v(e._s(e.review.rate)+" 分")])],1)]),r("div",{staticClass:"order-text"},[r("h3",[e._v("订单评价")]),r("div",{staticClass:"review-item"},[r("Field",{attrs:{rows:"3",autosize:"",type:"textarea",placeholder:"请输入评论内容",maxlength:"150","show-word-limit":""},model:{value:e.review.text,callback:function(t){e.$set(e.review,"text",t)},expression:"review.text"}})],1)]),r("div",{staticClass:"order-pics"},[r("h3",[e._v("图片分享")]),r("div",{staticClass:"review-item row-start-center"},[e._l(e.review.pics,(function(t,s){return r("div",{key:s,staticClass:"pics-frame"},[r("VanImage",{attrs:{src:t,fit:"cover",width:"100%",height:"100%"}}),r("div",{staticClass:"del-pics",on:{click:function(t){return e.delPics(s)}}},[r("Icon",{attrs:{name:"clear",color:"red",size:"20"}})],1)],1)})),e.review.pics.length<3?r("div",{staticClass:"pics-frame row-center-center"},[r("Upload",{attrs:{type:"review",single:"addGoodsPics"},on:{getUrl:e.addPics}},[r("Icon",{attrs:{name:"add-o",size:"80px"}})],1)],1):e._e()],2)]),r("div",{staticClass:"review-action row-start-center"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmReview()}}},[e._v("提交评价")]),r("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"warning"},on:{click:function(t){return e.resetReview()}}},[e._v("取消提交")])],1)])])])],1)},Ls=[],Us={components:{Button:m["a"],VanImage:p["a"],Checkbox:Nt["a"],CheckboxGroup:Tt["a"],Overlay:v["a"],Pagination:qt["a"],Rate:Oe["a"],Field:h["a"],Icon:ct["a"],ActionSheet:rs["a"],Upload:Lt},filters:{formatTime:function(e){return R(e)}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getUserOrder();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{PAYMENT:Pe,DELIVERY:Fe,CURRENCY:ze,ORDERSTATUS:Qt,params:{status:[],page:1,rows:10},review:{orderid:"",rate:5,text:"",pics:[]},items:[],total:0,orderInfo:"",showInfo:!1,showReview:!1}},methods:{getUserOrder:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.order.getUserOrder(e.params);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:a=s.data,n=a.items,i=a.total,e.items=n,e.total=i;case 9:case"end":return t.stop()}}),t)})))()},cancelOrderUser:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1!==e.status){r.next=3;break}return at["a"].alert({title:"通知商家取消订单",message:"因为商家已经确认了该订单，所以请通知商家来操作取消订单",confirmButtonText:"通知商家",theme:"round-button",closeOnClickOverlay:!0}).then((function(){window.open("https://t.me/".concat(e.shop.telegram))})),r.abrupt("return");case 3:at["a"].confirm({title:"操作取消订单",message:"您确认要取消该订单吗？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.cancelOrderUser(e._id);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getUserOrder();case 8:return r.abrupt("return",Object(d["a"])({type:"success",message:a.message}));case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 4:case"end":return r.stop()}}),r)})))()},finishOrder:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"订单完成",message:"确定已经收到物品并且完成该订单吗？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.finishOrder(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getUserOrder();case 8:return r.abrupt("return",Object(d["a"])({type:"success",message:a.message}));case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},addPics:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.review.pics.push(e);case 1:case"end":return r.stop()}}),r)})))()},delPics:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.review.pics.splice(e,1);case 1:case"end":return r.stop()}}),r)})))()},confirmReview:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.review.orderid.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"评论订单缺失"}));case 2:if(e.review.text.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"请填写评论内容"}));case 4:return t.next=6,V.review.newReview(e.review);case 6:if(r=t.sent,s=r.data,s.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 10:return e.resetReview(),e.getUserOrder(),t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 13:case"end":return t.stop()}}),t)})))()},resetReview:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.review={orderid:"",rate:5,text:"",pics:[]},e.showReview=!1;case 2:case"end":return t.stop()}}),t)})))()}}},As=Us,Ts=(r("acb3"),Object(D["a"])(As,Ss,Ls,!1,null,"46f04bc6",null)),Ns=Ts.exports,Ps=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"block-frame"},[r("div",{staticClass:"user-order-frame"},[r("div",{staticClass:"order-status-list"},[r("CheckboxGroup",{on:{change:function(t){return e.getUserOrder()}},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}},[r("div",{staticClass:"status-list row-start-center"},e._l(e.ORDERSTATUS,(function(t,s){return r("span",{key:s,staticStyle:{margin:"5px"}},[r("Checkbox",{attrs:{name:s,shape:"square"}},[e._v(e._s(t))])],1)})),0)])],1),r("div",{staticClass:"order-list-frame"},[e._l(e.items,(function(t,s){return r("div",{key:s,staticClass:"order-item"},[r("div",{staticClass:"row-between-center"},[r("div",{staticClass:"order-logo"},[r("VanImage",{attrs:{src:t.shop.logo,width:"100%",height:"100%",fit:"cover"}})],1),r("div",{staticClass:"order-info"},[r("div",{staticClass:"title"},[r("router-link",{attrs:{to:"/shop/"+t.shop._id}},[e._v(" "+e._s(t.shop.name)+" ")])],1),r("div",[e._v(e._s(e.PAYMENT[t.payment])+"、"+e._s(e.DELIVERY[t.delivery]))]),r("div",{staticClass:"row-between-center"},[r("div",[r("b",{staticStyle:{color:"red"}},[e._v(e._s(t.total)+" "+e._s(e.CURRENCY[t.currency]))])]),r("div",{staticStyle:{color:"red"}},[e._v(e._s(e.ORDERSTATUS[t.status]))])]),r("div",{staticClass:"time"},[e._v(e._s(e._f("formatTime")(t.created_at)))])])]),r("div",{staticClass:"order-action-frame"},[r("Button",{staticClass:"order-action",attrs:{type:"info",size:"mini"},on:{click:function(r){e.orderInfo=t,e.showInfo=!0}}},[e._v("查看")]),0===t.status?r("Button",{staticClass:"order-action",attrs:{type:"primary",size:"mini"},on:{click:function(r){e.confirm._id=t._id,e.showConfirm=!0}}},[e._v("确认接单")]):e._e(),1===t.status?r("Button",{staticClass:"order-action",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.delivery(t._id)}}},[e._v("已送出")]):e._e(),2===t.status?r("Button",{staticClass:"order-action",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.arrived(t._id)}}},[e._v("已送到")]):e._e(),-1!==[0,1].indexOf(t.status)?r("Button",{staticClass:"order-action",attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.cancelOrderShop(t._id)}}},[e._v("取消订单")]):e._e()],1)])})),r("Pagination",{attrs:{"items-per-page":e.params.rows,"total-items":e.total},on:{change:function(t){return e.getUserOrder()}},model:{value:e.params.page,callback:function(t){e.$set(e.params,"page",t)},expression:"params.page"}})],2)]),r("ActionSheet",{attrs:{title:"订单详情"},model:{value:e.showInfo,callback:function(t){e.showInfo=t},expression:"showInfo"}},[r("div",{staticClass:"order-info-frame"},[r("div",{staticClass:"order-info-item"},e._l(e.orderInfo.items,(function(t,s){return r("div",{key:s,staticClass:"order-item row-between-top"},[r("div",{staticClass:"row-start-top"},[r("div",{staticClass:"order-item-pics"},[r("VanImage",{attrs:{src:t.info.pics,fit:"cover",width:"120px",height:"80px"}})],1),r("div",{staticClass:"order-item-name"},[r("div",[e._v(e._s(t.info.code)+" "+e._s(t.info.name)+" * "+e._s(t.count))]),r("br"),r("div",[e._v(e._s(t.amount)+" "+e._s(e.CURRENCY[e.orderInfo.currency]))])])])])})),0),r("div",{staticClass:"order-info-item"},[r("p",[e._v("总计："),r("b",[e._v(e._s(e.orderInfo.total))]),e._v(" "+e._s(e.CURRENCY[e.orderInfo.currency]))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("付款方式："),r("b",[e._v(e._s(e.PAYMENT[e.orderInfo.payment]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送方式："),r("b",[e._v(e._s(e.DELIVERY[e.orderInfo.delivery]))])])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("配送信息")]),r("p",{staticStyle:{"white-space":"pre-line","margin-top":"10px"}},[e._v(" "+e._s(e.orderInfo.uinfo)+" ")])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单备注："+e._s(e.orderInfo.memo))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("下单时间："+e._s(e._f("formatTime")(e.orderInfo.created_at)))])]),r("div",{staticClass:"order-info-item"},[r("p",[e._v("订单状态："),r("b",{staticStyle:{color:"red"}},[e._v(e._s(e.ORDERSTATUS[e.orderInfo.status]))])])])])]),r("Dialog",{attrs:{title:"确认接受该订单吗？","show-cancel-button":""},on:{confirm:function(t){return e.confirmOrder()}},model:{value:e.showConfirm,callback:function(t){e.showConfirm=t},expression:"showConfirm"}},[r("div",{staticStyle:{padding:"20px"}},[r("RadioGroup",{model:{value:e.confirm.delivery,callback:function(t){e.$set(e.confirm,"delivery",t)},expression:"confirm.delivery"}},[r("div",[e._v("请选择配送方式：")]),e._l(e.DELIVERY,(function(t,s){return r("div",{key:s,staticStyle:{"margin-top":"20px"}},[r("Radio",{attrs:{name:s}},[e._v(e._s(t))])],1)}))],2)],1)])],1)},Fs=[],zs={name:"ShopOrders",components:{Button:m["a"],VanImage:p["a"],Radio:nt["a"],RadioGroup:it["a"],Checkbox:Nt["a"],CheckboxGroup:Tt["a"],Overlay:v["a"],Pagination:qt["a"],Dialog:at["a"].Component,ActionSheet:rs["a"]},filters:{formatTime:function(e){return R(e)}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.params.shop=e.$route.query._id,"1"===e.$route.query.unfinished&&(e.params.status=[0,1,2]),e.$store.dispatch("setLoading",!0),t.next=5,e.getShopOrder();case 5:e.$store.dispatch("setLoading",!1);case 6:case"end":return t.stop()}}),t)})))()},data:function(){return{PAYMENT:Pe,DELIVERY:Fe,CURRENCY:ze,ORDERSTATUS:Qt,params:{status:[],shop:"",page:1,rows:50},confirm:{_id:"",delivery:0},items:[],total:0,orderInfo:"",showInfo:!1,showConfirm:!1}},methods:{getShopOrder:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.order.getShopOrder(e.params);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:a=s.data,n=a.items,i=a.total,e.items=n,e.total=i;case 9:case"end":return t.stop()}}),t)})))()},cancelOrderShop:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"操作取消订单",message:"您确认要取消该订单吗？请通知客户您的取消操作，避免误会！"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.cancelOrderShop(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getShopOrder();case 8:Object(d["a"])({type:"success",message:a.message});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},confirmOrder:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.order.confirmOrder(e.confirm);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:return t.next=8,e.getShopOrder();case 8:Object(d["a"])({type:"success",message:s.message});case 9:case"end":return t.stop()}}),t)})))()},delivery:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"商品已配送",message:"商品已经确认送出了么？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.delivery(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getShopOrder();case 8:Object(d["a"])({type:"success",message:a.message});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},arrived:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"商品已送到",message:"商品已经确认送到了么？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.order.arrived(e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getShopOrder();case 8:Object(d["a"])({type:"success",message:a.message});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()}}},Bs=zs,Gs=(r("b7fb"),Object(D["a"])(Bs,Ps,Fs,!1,null,"7f8abcbf",null)),Vs=Gs.exports,Ys=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"block-frame"},[r("div",{staticClass:"shop-list row-between-center"},e._l(e.items,(function(t,s){return r("div",{key:s,staticClass:"shop-item"},[r("router-link",{attrs:{to:"/shop/"+t.shop._id}},[r("div",{staticClass:"shop-logo-frame"},[r("VanImage",{attrs:{src:t.shop.logo,width:"100%",height:"120px",fit:"cover"}}),r("div",{staticClass:"shop-tag"},[r("Tag",{attrs:{type:"primary"}},[e._v(e._s(e.SERVICETYPE[t.shop.type-1].name))])],1)],1)])],1)})),0)])},qs=[],Ds={components:{VanImage:p["a"],Tag:Te["a"]},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.userFollow();case 3:e.$store.dispatch("setLoading",!1);case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{SERVICETYPE:Ne,items:[]}},methods:{userFollow:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.follow.userFollow();case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Notify({type:"danger",message:s.message}));case 6:e.items=s.data;case 7:case"end":return t.stop()}}),t)})))()}}},Ms=Ds,Hs=(r("914b"),Object(D["a"])(Ms,Ys,qs,!1,null,"a4c3e09e",null)),Js=Hs.exports,Ws=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"block-frame"},[r("div",{staticClass:"shop-list-frame"},[e._l(e.shopList,(function(t,s){return r("div",{key:s,staticClass:"shop-item row-between-center"},[r("VanImage",{attrs:{src:t.logo,fit:"cover",width:"40%",height:"100"}}),r("div",{staticClass:"shop-item-info"},[r("div",{staticClass:"row-start-center"},[r("div",{staticClass:"shop-item-name omit"},[t.pass?r("b",[r("a",{on:{click:function(r){return e.$router.push("/shop/"+t._id)}}},[e._v(e._s(t.name))])]):r("b",[e._v(e._s(t.name))])]),t.pass?e._e():r("span",{staticStyle:{color:"red","margin-left":"10px"}},[e._v(" (审核中)")]),t.pass?r("a",{staticStyle:{color:"red","margin-left":"10px"},on:{click:function(r){e.fans_param.page=1,e.fans_param.shopid=t._id,e.getFans(),e.showFans=!0}}},[e._v("查看粉丝")]):e._e()]),r("div",{staticClass:"info-edit"},[e._v(" 是否上架： "),r("span",{on:{click:function(r){return e.setRunning(t._id,!t.running,t.pass)}}},[t.running?r("a",{staticClass:"on"},[e._v("点击下架")]):r("a",{staticClass:"off"},[e._v("点击上架")])])]),r("div",{staticClass:"info-edit"},[e._v(" 是否营业： "),r("span",{on:{click:function(r){return e.setOpen(t._id,!t.open,t.pass)}}},[t.open?r("a",{staticClass:"on"},[e._v("点击打烊")]):r("a",{staticClass:"off"},[e._v("点击营业")])])]),r("div",{staticClass:"info-edit"},[r("a",{staticClass:"edit",on:{click:function(r){e.shopInfo=t,e.showShopEdit=!0}}},[e._v("编辑商铺")]),e._v(" | "),r("a",{staticClass:"edit",on:{click:function(r){e.shopId=t._id,e.currency=t.currency,e.showGoodsEdit=!0}}},[e._v("编辑商品")]),e._v(" | "),r("a",{staticClass:"edit",on:{click:function(r){e.deleteid=t._id,e.deleteShop=!0}}},[e._v("删除商铺")])]),r("div",{staticClass:"info-edit"},[r("a",{staticClass:"edit",on:{click:function(r){return e.$router.push("/user/5?_id="+t._id)}}},[e._v("所有订单")]),e._v(" | "),r("a",{staticClass:"edit",on:{click:function(r){return e.$router.push("/user/5?_id="+t._id+"&unfinished=1")}}},[e._v("未完成("),r("b",[e._v(e._s(e.orderCount[t._id]))]),e._v(") ")])])])],1)})),e.shopList.length<3?r("div",{staticClass:"shop-item row-center-center",on:{click:function(t){e.shopInfo=null,e.showShopEdit=!0}}},[r("Icon",{attrs:{name:"add-o",size:"50"}})],1):e._e()],2),e.showShopEdit?r("EditShop",{attrs:{shopInfo:e.shopInfo},on:{confirm:function(t){e.getShop(),e.showShopEdit=!1},close:function(t){e.showShopEdit=!1}}}):e._e(),e.showGoodsEdit?r("EditGoods",{attrs:{shopId:e.shopId,currency:e.currency},on:{close:function(t){e.showGoodsEdit=!1}}}):e._e(),e.deleteShop?r("Overlay",{attrs:{show:e.deleteShop}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.deleteShop=!1}}},[r("div",{staticClass:"block",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"title"},[r("h3",[e._v("确认删除店铺么？删除后不可恢复哦！")])]),r("div",{staticClass:"password"},[r("Field",{attrs:{placeholder:"请输入您的登录密码",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("div",{staticClass:"action row-start-center"},[r("Button",{attrs:{type:"danger"},on:{click:function(t){return e.delShop()}}},[e._v("删除店铺")]),r("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"warning"},on:{click:function(t){e.password="",e.deleteShop=!1}}},[e._v("取消删除")])],1)])])]):e._e(),e.showFans?r("Overlay",{attrs:{show:e.showFans}},[r("div",{staticClass:"wrapper",on:{click:function(t){e.showFans=!1}}},[r("div",{staticClass:"fans-frame",on:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"fans-list-frame"},e._l(e.fans.items,(function(t,s){return r("div",{key:s,staticClass:"fans-item row-start-center"},[r("VanImage",{attrs:{src:t.user.avatar,width:"50px",height:"50px",fit:"cover",round:""}}),r("div",{staticClass:"fans-name"},[r("b",[e._v(e._s(t.user.name))])])],1)})),0),r("Pagination",{attrs:{"items-per-page":e.fans_param.rows,"total-items":e.fans.total},on:{change:function(t){return e.getFans()}},model:{value:e.fans_param.page,callback:function(t){e.$set(e.fans_param,"page",t)},expression:"fans_param.page"}})],1)])]):e._e()],1)},Ks=[],Qs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ActionSheet",{attrs:{title:"编辑商铺"},on:{close:function(t){return e.$emit("close")}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("div",{staticClass:"info-frame"},[r("div",{staticClass:"input-frame"},[r("div",{staticClass:"input-title"},[e._v("店铺类型")]),r("RadioGroup",{model:{value:e.shop.type,callback:function(t){e.$set(e.shop,"type",t)},expression:"shop.type"}},[r("div",{staticClass:"row-start-center shop-type"},e._l(e.SERVICETYPE,(function(t,s){return r("span",{key:s,staticStyle:{margin:"10px"}},[r("Radio",{attrs:{name:s+1}},[e._v(e._s(t.name))])],1)})),0)])],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"店铺名称",placeholder:"请输入店铺名称"},model:{value:e.shop.name,callback:function(t){e.$set(e.shop,"name",t)},expression:"shop.name"}})],1),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"row-start-center pics-frame"},[r("div",{staticClass:"input-title"},[e._v("店铺LOGO")]),r("div",{staticClass:"logo-frame row-center-center"},[r("Upload",{attrs:{type:"shop",single:"getLogoUrl"},on:{getUrl:e.getLogoUrl}},[r("VanImage",{attrs:{src:e.shop.logo,fit:"cover",width:"100px",height:"100px"}})],1)],1)])]),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"input-title"},[e._v("店铺背景")]),r("div",{staticClass:"pics-frame"},[r("div",{staticClass:"back-frame row-center-center"},[r("Upload",{attrs:{type:"shop",single:"getBackUrl"},on:{getUrl:e.getBackUrl}},[r("VanImage",{attrs:{src:e.shop.back,fit:"cover",width:"100%",height:"150px"}})],1)],1)])]),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"input-title"},[e._v("店铺环境")]),r("div",{staticClass:"row-start-center pics-frame"},[r("div",{staticClass:"row-between-center shop-img-frame"},[e._l(e.shop.pics,(function(t,s){return r("div",{key:s,staticClass:"shop-img-item row-center-center"},[r("span",{staticClass:"del-pics",on:{click:function(t){return e.delPics(s)}}},[r("Icon",{attrs:{name:"cross",size:"20",color:"red"}})],1),r("VanImage",{attrs:{src:t,fit:"cover",width:"100%",height:"100%"}})],1)})),r("Upload",{attrs:{type:"shop",single:"getPicskUrl"},on:{getUrl:e.getPicsUrl}},[e.shop.pics.length<6?r("div",{staticClass:"shop-img-item row-center-center"},[r("Icon",{attrs:{name:"add-o",size:"50"}})],1):e._e()])],2)])]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"店铺介绍",placeholder:"请输入店铺介绍",type:"textarea",rows:"3",maxlength:"300","show-word-limit":""},model:{value:e.shop.brief,callback:function(t){e.$set(e.shop,"brief",t)},expression:"shop.brief"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"开始营业",placeholder:"请输入开始营业时间 格式如 08:00"},model:{value:e.shop.stime,callback:function(t){e.$set(e.shop,"stime",t)},expression:"shop.stime"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"结束营业",placeholder:"请输入开始结束时间 格式如 23:30"},model:{value:e.shop.etime,callback:function(t){e.$set(e.shop,"etime",t)},expression:"shop.etime"}})],1),r("div",{staticClass:"input-frame"},[r("CheckboxGroup",{model:{value:e.shop.payment,callback:function(t){e.$set(e.shop,"payment",t)},expression:"shop.payment"}},[r("div",{staticClass:"row-start-center checkbox-type"},[r("div",[e._v("付款方式")]),e._l(e.PAYMENT,(function(t,s){return r("span",{key:s,staticStyle:{"margin-left":"20px"}},[r("Checkbox",{attrs:{name:s,shape:"square"}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("CheckboxGroup",{model:{value:e.shop.delivery,callback:function(t){e.$set(e.shop,"delivery",t)},expression:"shop.delivery"}},[r("div",{staticClass:"row-start-center checkbox-type"},[r("div",[e._v("配送方式")]),e._l(e.DELIVERY,(function(t,s){return r("span",{key:s,staticStyle:{"margin-left":"20px"}},[r("Checkbox",{attrs:{name:s,shape:"square"}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",type:"number",label:"最低起送",placeholder:"请输入最低的购买价格"},model:{value:e.shop.minprice,callback:function(t){e.$set(e.shop,"minprice",t)},expression:"shop.minprice"}})],1),r("div",{staticClass:"input-frame"},[r("RadioGroup",{model:{value:e.shop.currency,callback:function(t){e.$set(e.shop,"currency",t)},expression:"shop.currency"}},[r("div",{staticClass:"row-start-center shop-type"},[r("div",[e._v("默认货币")]),e._l(e.CURRENCY,(function(t,s){return r("span",{key:s,staticStyle:{"margin-left":"20px"}},[r("Radio",{attrs:{name:s}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"所在城市",placeholder:"所在的城市，英文拼写如：makati、passy"},model:{value:e.shop.city,callback:function(t){e.$set(e.shop,"city",t)},expression:"shop.city"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"店铺详址",placeholder:"请输入店铺的详细地址"},model:{value:e.shop.address,callback:function(t){e.$set(e.shop,"address",t)},expression:"shop.address"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"店铺公告",placeholder:"请输入店铺的公告信息"},model:{value:e.shop.notice,callback:function(t){e.$set(e.shop,"notice",t)},expression:"shop.notice"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"店铺优惠",placeholder:"请输入店铺的优惠信息",type:"textarea",rows:"3"},model:{value:e.shop.discount,callback:function(t){e.$set(e.shop,"discount",t)},expression:"shop.discount"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"平台优惠",placeholder:"该优惠只有在此平台才能享受",type:"textarea",rows:"3"},model:{value:e.shop.p_discount,callback:function(t){e.$set(e.shop,"p_discount",t)},expression:"shop.p_discount"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"商家手机",placeholder:"请输入联系用的手机号"},model:{value:e.shop.phone,callback:function(t){e.$set(e.shop,"phone",t)},expression:"shop.phone"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{label:"商家微信",placeholder:"请输入联系用的微信号"},model:{value:e.shop.wechat,callback:function(t){e.$set(e.shop,"wechat",t)},expression:"shop.wechat"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{required:"",label:"商家飞机",formatter:e.checkTelgram,placeholder:"飞机的 username，不需要带@"},model:{value:e.shop.telegram,callback:function(t){e.$set(e.shop,"telegram",t)},expression:"shop.telegram"}})],1),r("div",{staticClass:"input-frame action-frame"},[r("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){e.shopInfo?e.updateShop():e.addShop()}}},[e._v("提交审核")]),e._v(" "),r("Button",{attrs:{type:"default",size:"small"},on:{click:function(t){return e.$emit("close")}}},[e._v("取消提交")])],1)])])},Xs=[],Zs={name:"EditShop",components:{VanImage:p["a"],Field:h["a"],Button:m["a"],Notify:d["a"],Radio:nt["a"],RadioGroup:it["a"],Checkbox:Nt["a"],CheckboxGroup:Tt["a"],Icon:ct["a"],Upload:Lt,ActionSheet:rs["a"]},props:["shopInfo"],data:function(){return{SERVICETYPE:Ne,PAYMENT:Pe,DELIVERY:Fe,CURRENCY:ze,show:!0,shop:{_id:"",type:1,name:"",logo:"",back:"/img/shop/shopback.png",pics:[],brief:"",stime:"",etime:"",payment:[],delivery:[],minprice:"",currency:"",city:"",address:"",notice:"",discount:"",phone:"",wechat:"",telegram:"",p_discount:""}}},mounted:function(){if(this.shopInfo)for(var e in this.shop)this.shop[e]=this.shopInfo[e]},methods:{getLogoUrl:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.logo=e;case 1:case"end":return r.stop()}}),r)})))()},getBackUrl:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.back=e;case 1:case"end":return r.stop()}}),r)})))()},getPicsUrl:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.pics.push(e);case 1:case"end":return r.stop()}}),r)})))()},delPics:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.shop.pics.splice(e,1);case 1:case"end":return r.stop()}}),r)})))()},addShop:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.shop.name.trim()&&e.shop.logo.trim()&&e.shop.stime.trim()&&e.shop.etime.trim()&&e.shop.payment.length&&e.shop.delivery.length&&e.shop.city.trim()&&e.shop.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"基本信息不完整"}));case 2:if(e.shop.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"Telegram不得为空"}));case 4:return e.shop.minprice=e.shop.minprice?e.shop.minprice:0,t.prev=5,t.next=8,V.shop.addShop(e.shop);case 8:if(r=t.sent,s=r.data,s.success){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 12:return e.$emit("confirm"),t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 16:if(t.prev=16,t.t0=t["catch"](5),a=t.t0.response,!a){t.next=21;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.data.message}));case 21:case"end":return t.stop()}}),t,null,[[5,16]])})))()},updateShop:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.shop._id.trim()&&e.shop.name.trim()&&e.shop.logo.trim()&&e.shop.stime.trim()&&e.shop.etime.trim()&&e.shop.payment.length&&e.shop.delivery.length&&e.shop.city.trim()&&e.shop.address.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"基本信息不完整"}));case 2:if(e.shop.telegram.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"Telegram不得为空"}));case 4:return e.shop.minprice=e.shop.minprice?e.shop.minprice:0,t.prev=5,t.next=8,V.shop.updateShop(e.shop);case 8:if(r=t.sent,s=r.data,s.success){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 12:return e.$emit("confirm"),t.abrupt("return",Object(d["a"])({type:"success",message:s.message}));case 16:if(t.prev=16,t.t0=t["catch"](5),a=t.t0.response,!a){t.next=21;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.data.message}));case 21:case"end":return t.stop()}}),t,null,[[5,16]])})))()},checkTelgram:function(e){return e.replace(/[^\w_]/g,"")}}},ea=Zs,ta=(r("491e"),Object(D["a"])(ea,Qs,Xs,!1,null,"f8355118",null)),ra=ta.exports,sa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("ActionSheet",{attrs:{title:"编辑商品"},on:{close:function(t){return e.$emit("close")}},model:{value:e.show1,callback:function(t){e.show1=t},expression:"show1"}},[r("div",{staticClass:"info-frame"},[r("div",{staticClass:"class-frame"},[r("div",{staticClass:"class-item-frame row-start-center"},[e._l(e.classList,(function(t,s){return r("div",{key:s,staticClass:"class-item"},[r("div",{staticClass:"class-input name"},[r("Field",{attrs:{label:"分类名称"},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"item.name"}})],1),r("div",{staticClass:"class-input sort"},[r("Field",{attrs:{label:"分类排序",type:"number"},model:{value:t.sort,callback:function(r){e.$set(t,"sort",r)},expression:"item.sort"}})],1),r("Button",{staticClass:"button",attrs:{type:"primary",size:"small"},on:{click:function(r){return e.updateClass(t.shopid,t._id,t.name,t.sort)}}},[e._v("更新分类")]),r("Button",{staticClass:"button",attrs:{type:"danger",size:"small"},on:{click:function(r){return e.delClass(t._id)}}},[e._v("删除分类")])],1)})),r("div",{staticClass:"class-item"},[r("div",{staticClass:"class-input name"},[r("Field",{attrs:{label:"分类名称",placeholder:"名称"},model:{value:e.classEdit.name,callback:function(t){e.$set(e.classEdit,"name",t)},expression:"classEdit.name"}})],1),r("div",{staticClass:"class-input sort"},[r("Field",{attrs:{label:"分类排序",type:"number",placeholder:"排序"},model:{value:e.classEdit.sort,callback:function(t){e.$set(e.classEdit,"sort",t)},expression:"classEdit.sort"}})],1),r("Button",{staticStyle:{width:"100%"},attrs:{type:"info",size:"small"},on:{click:function(t){return e.addClass()}}},[e._v("新建分类")])],1)],2)]),r("div",{staticClass:"goods-frame"},[r("div",{staticClass:"row-start-center"},[r("b",{staticClass:"frame-title"},[e._v("商品信息")]),r("Button",{staticClass:"add-goods",attrs:{type:"info",size:"mini"},on:{click:function(t){e.initGoods(),e.goodsEditting=!0}}},[e._v("点此新增商品")])],1),r("div",{staticClass:"goods-item-frame"},[r("div",{staticClass:"goods-item row-start-center"},[r("div",{staticClass:"item-frame name"},[e._v("名称")]),r("div",{staticClass:"item-frame name"},[e._v("图片")]),r("div",{staticClass:"item-frame stop"},[e._v("缺货")]),r("div",{staticClass:"item-frame action"},[e._v("操作")])]),e._l(e.goodsList,(function(t,s){return r("div",{key:s,staticClass:"goods-item row-start-center"},[r("div",{staticClass:"item-frame name"},[e._v(e._s(t.name))]),r("div",{staticClass:"item-frame pics",staticStyle:{color:"#1989fa"}},[r("a",{on:{click:function(r){return e.showImage(t.pics)}}},[e._v("查看")])]),r("div",{staticClass:"item-frame stop",style:{color:t.stop?"red":""}},[e._v(e._s(t.stop?"是":"否"))]),r("div",{staticClass:"item-frame action row-start-center"},[r("Button",{staticClass:"action-item",attrs:{type:"primary",size:"mini"},on:{click:function(r){e.goodsEdit=JSON.parse(JSON.stringify(t)),e.goodsEditting=!0}}},[e._v("编辑")]),r("Button",{staticClass:"action-item",attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.delGoods(t._id)}}},[e._v("删除")]),t.stop?r("Button",{staticClass:"action-item",attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.stopGoods(t._id,!t.stop,s)}}},[e._v("已备货")]):r("Button",{staticClass:"action-item",attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.stopGoods(t._id,!t.stop,s)}}},[e._v("缺货")])],1)])})),r("Pagination",{attrs:{"items-per-page":e.goodsPage.rows,"total-items":e.goodsPage.total},on:{change:function(t){return e.getGoods()}},model:{value:e.goodsPage.page,callback:function(t){e.$set(e.goodsPage,"page",t)},expression:"goodsPage.page"}})],2)])])]),r("ActionSheet",{attrs:{title:"商品信息"},model:{value:e.goodsEditting,callback:function(t){e.goodsEditting=t},expression:"goodsEditting"}},[r("div",{staticClass:"goods-info-frame"},[r("div",{staticClass:"goods-info-edit"},[r("div",{staticClass:"input-frame"},[r("div",{staticClass:"img-frame row-start-center"},[r("div",[e._v("商品图片：")]),r("div",{staticClass:"row-center-center"},[r("Upload",{attrs:{type:"goods",single:"addGoodsPics"},on:{getUrl:e.addGoodsPics}},[r("VanImage",{attrs:{src:e.goodsEdit.pics,fit:"cover",width:"150",height:"110"}})],1)],1)])]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"填写商品名称，如小炒肉、可乐"},model:{value:e.goodsEdit.name,callback:function(t){e.$set(e.goodsEdit,"name",t)},expression:"goodsEdit.name"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{placeholder:"填写商品代码，如A13、C20"},model:{value:e.goodsEdit.code,callback:function(t){e.$set(e.goodsEdit,"code",t)},expression:"goodsEdit.code"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{type:"number",placeholder:"填写商品价格，货币为商家默认货币"},model:{value:e.goodsEdit.price,callback:function(t){e.$set(e.goodsEdit,"price",t)},expression:"goodsEdit.price"}})],1),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{type:"number",placeholder:"填写商品数量，价格单位数量"},model:{value:e.goodsEdit.count,callback:function(t){e.$set(e.goodsEdit,"count",t)},expression:"goodsEdit.count"}})],1),r("div",{staticClass:"input-frame"},[r("RadioGroup",{model:{value:e.goodsEdit.unit,callback:function(t){e.$set(e.goodsEdit,"unit",t)},expression:"goodsEdit.unit"}},[r("div",{staticClass:"row-start-top radio-type"},[r("p",[e._v("物品单位：")]),e._l(e.UNIT,(function(t,s){return r("span",{key:s,staticStyle:{"margin-right":"10px","margin-bottom":"20px"}},[r("Radio",{attrs:{name:s}},[e._v(e._s(t))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("CheckboxGroup",{model:{value:e.goodsEdit.classid,callback:function(t){e.$set(e.goodsEdit,"classid",t)},expression:"goodsEdit.classid"}},[r("div",{staticClass:"row-start-top checkbox-type"},[r("div",[e._v("商品分类：")]),e._l(e.classList,(function(t,s){return r("span",{key:s,staticStyle:{"margin-right":"10px","margin-bottom":"20px"}},[r("Checkbox",{attrs:{name:t._id,shape:"square"}},[e._v(e._s(t.name))])],1)}))],2)])],1),r("div",{staticClass:"input-frame"},[r("div",{staticClass:"row-start-center"},[r("div",{staticStyle:{width:"40%"}},[r("Field",{attrs:{placeholder:"商品标签，如新品、推荐、火爆等"},model:{value:e.goodsTag,callback:function(t){e.goodsTag=t},expression:"goodsTag"}})],1),r("Button",{attrs:{type:"info",size:"mini"},on:{click:function(t){return e.addGoodsTag()}}},[e._v("添加标签")]),r("div",{staticClass:"tags-frame row-start-center"},e._l(e.goodsEdit.tags,(function(t,s){return r("Tag",{key:s,staticClass:"goods-tag",attrs:{closeable:"",size:"medium",type:"success"},on:{close:function(t){return e.delGoodsTag(s)}}},[e._v(" "+e._s(t)+" ")])})),1)],1)]),r("div",{staticClass:"input-frame"},[r("Field",{attrs:{type:"number",placeholder:"填写商品排序，数值越高越靠前，默认为 0"},model:{value:e.goodsEdit.sort,callback:function(t){e.$set(e.goodsEdit,"sort",t)},expression:"goodsEdit.sort"}})],1),r("div",{staticClass:"goods-action"},[e.goodsEdit._id?r("Button",{attrs:{type:"info"},on:{click:function(t){return e.updateGoods()}}},[e._v("更新商品")]):r("Button",{attrs:{type:"info"},on:{click:function(t){return e.addGoods()}}},[e._v("添加商品")])],1)])])])],1)},aa=[],na={name:"EditGoods",components:(_t={VanImage:p["a"],Field:h["a"],Button:m["a"],Notify:d["a"],Radio:nt["a"],RadioGroup:it["a"],Checkbox:Nt["a"],CheckboxGroup:Tt["a"],Icon:ct["a"],Upload:Lt},Object(Yt["a"])(_t,"RadioGroup",it["a"]),Object(Yt["a"])(_t,"Radio",nt["a"]),Object(Yt["a"])(_t,"Tag",Te["a"]),Object(Yt["a"])(_t,"Pagination",qt["a"]),Object(Yt["a"])(_t,"ActionSheet",rs["a"]),_t),props:["shopId","currency"],data:function(){return{UNIT:Be,show1:!0,show2:!1,classList:[],goodsList:[],classEdit:{name:"",sort:""},goodsEdit:{classid:[],code:"",name:"",pics:"",price:"",count:"",unit:0,tags:[],sort:""},goodsPage:{page:1,rows:50,total:0},goodsTag:"",goodsEditting:!1}},computed:{classobj:function(){for(var e={},t=this.classList.length-1;t>=0;t--)e[this.classList[t]._id]=this.classList[t].name;return e}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getClass();case 2:return t.next=4,e.getGoods();case 4:case"end":return t.stop()}}),t)})))()},methods:{getClass:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.shop.getClass(e.shopId);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:e.classList=s.data;case 7:case"end":return t.stop()}}),t)})))()},addClass:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.classEdit.name.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"分类名称不得为空"}));case 2:return r=e.classEdit.name.trim(),s=e.classEdit.sort?e.classEdit.sort:0,t.next=6,V.shop.addClass(e.shopId,r,s);case 6:if(a=t.sent,n=a.data,n.success){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:n.message}));case 10:return t.next=12,e.getClass();case 12:e.classEdit.name=e.classEdit.sort="",Object(d["a"])({type:"success",message:"添加成功"});case 14:case"end":return t.stop()}}),t)})))()},delClass:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"删除分类",message:"确认删除商品分类么？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.shop.delClass(t.shopId,e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getClass();case 8:Object(d["a"])({type:"success",message:"删除成功"});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},updateClass:function(e,t,r,s){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:at["a"].confirm({title:"更新分类信息",message:"确认更新分类信息么？"}).then(Object(l["a"])(regeneratorRuntime.mark((function n(){var i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r.trim()){n.next=2;break}return n.abrupt("return",Object(d["a"])({type:"danger",message:"分类名称不得为空"}));case 2:return n.next=4,V.shop.updateClass(e,t,r,s);case 4:if(i=n.sent,o=i.data,o.success){n.next=8;break}return n.abrupt("return",Object(d["a"])({type:"danger",message:o.message}));case 8:return n.next=10,a.getClass();case 10:Object(d["a"])({type:"success",message:"更新成功"});case 11:case"end":return n.stop()}}),n)})))).catch((function(){}));case 1:case"end":return n.stop()}}),n)})))()},addGoodsPics:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.goodsEdit.pics=e;case 1:case"end":return r.stop()}}),r)})))()},addGoodsTag:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.goodsTag.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品标签不得为空"}));case 2:if(!(e.goodsTag.length>5)){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"标签不得大于5个字"}));case 4:if(!(e.goodsEdit.tags.length>=3)){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品标签不得超过三个"}));case 6:e.goodsEdit.tags.push(e.goodsTag),e.goodsTag="";case 8:case"end":return t.stop()}}),t)})))()},delGoodsTag:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.goodsEdit.tags.splice(e,1);case 1:case"end":return r.stop()}}),r)})))()},initGoods:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.goodsEdit={classid:[],code:"",name:"",pics:"",price:"",count:"",unit:0,tags:[],sort:""};case 1:case"end":return t.stop()}}),t)})))()},getGoods:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.shop.getGoods(e.shopId,e.goodsPage.page,e.goodsPage.rows);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:e.goodsList=s.data.items,e.goodsPage.total=s.data.total;case 8:case"end":return t.stop()}}),t)})))()},addGoods:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.goodsEdit.name.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品名称不得为空"}));case 2:if(e.goodsEdit.code.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品代码不得为空"}));case 4:if(e.goodsEdit.classid.length){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品分类至少一个"}));case 6:if(e.goodsEdit.price.trim()){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品价格不得为空"}));case 8:if(e.goodsEdit.count.trim()){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价数量不得为空"}));case 10:if(String(e.goodsEdit.unit).trim()){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价单位不得为空"}));case 12:return e.goodsEdit.pics.trim()||(e.goodsEdit.pics="/img/no-img.png"),e.goodsEdit.sort=e.goodsEdit.sort.trim()?e.goodsEdit.sort:0,r=Object(lt["a"])({shopid:e.shopId},e.goodsEdit),t.next=17,V.shop.addGoods(r);case 17:if(s=t.sent,a=s.data,a.success){t.next=21;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 21:return t.next=23,e.getGoods();case 23:e.goodsEditting=!1;case 24:case"end":return t.stop()}}),t)})))()},delGoods:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:at["a"].confirm({title:"删除商品",message:"确认删除商品么？"}).then(Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,V.shop.delGoods(t.shopId,e);case 2:if(s=r.sent,a=s.data,a.success){r.next=6;break}return r.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 6:return r.next=8,t.getGoods();case 8:Object(d["a"])({type:"success",message:"删除成功"});case 9:case"end":return r.stop()}}),r)})))).catch((function(){}));case 1:case"end":return r.stop()}}),r)})))()},updateGoods:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.goodsEdit.name.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品名称不得为空"}));case 2:if(e.goodsEdit.code.trim()){t.next=4;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品代码不得为空"}));case 4:if(e.goodsEdit.classid.length){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品分类至少一个"}));case 6:if(e.goodsEdit.price.trim()){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品价格不得为空"}));case 8:if(e.goodsEdit.count.trim()){t.next=10;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价数量不得为空"}));case 10:if(String(e.goodsEdit.unit).trim()){t.next=12;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"商品计价单位不得为空"}));case 12:return e.goodsEdit.pics.trim()||(e.goodsEdit.pics="/img/no-img.png"),e.goodsEdit.sort=e.goodsEdit.sort.trim()?e.goodsEdit.sort:0,t.next=16,V.shop.updateGoods(e.goodsEdit);case 16:if(r=t.sent,s=r.data,s.success){t.next=20;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 20:return t.next=22,e.getGoods();case 22:e.goodsEditting=!1;case 23:case"end":return t.stop()}}),t)})))()},stopGoods:function(e,t,r){var s=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,V.shop.stopGoods(s.shopId,e,t);case 2:if(n=a.sent,i=n.data,i.success){a.next=6;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:i.message}));case 6:s.goodsList[r].stop=t;case 7:case"end":return a.stop()}}),a)})))()},showImage:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(st["a"])({images:[e],closeable:!0});case 1:case"end":return t.stop()}}),t)})))()}}},ia=na,oa=(r("bb72"),Object(D["a"])(ia,sa,aa,!1,null,"0942904a",null)),ca=oa.exports,ua={name:"UserShops",components:{VanImage:p["a"],Tag:Te["a"],Button:m["a"],Field:h["a"],Icon:ct["a"],Notify:d["a"],Dialog:at["a"],Overlay:v["a"],EditShop:ra,EditGoods:ca,Pagination:qt["a"]},data:function(){return{showShopEdit:!1,showGoodsEdit:!1,showFans:!1,shopList:[],shopInfo:null,shopId:null,currency:null,deleteShop:!1,password:"",deleteid:"",orderCount:{},intervalId:null,fans_param:{page:1,rows:6,shopid:""},fans:{total:0,items:[]}}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("setLoading",!0),t.next=3,e.getShop();case 3:return t.next=5,e.getUnfinished();case 5:e.$store.dispatch("setLoading",!1),e.intervalId=setInterval(Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUnfinished();case 2:case"end":return t.stop()}}),t)}))),6e4);case 7:case"end":return t.stop()}}),t)})))()},destroyed:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:clearInterval(e.intervalId);case 1:case"end":return t.stop()}}),t)})))()},methods:{getShop:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.shop.getShop("/api/shop/get_shop");case 2:r=t.sent,s=r.data,s.success&&(e.shopList=s.data);case 5:case"end":return t.stop()}}),t)})))()},delShop:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.password.trim()){t.next=2;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:"登录密码不得为空！"}));case 2:return t.next=4,V.shop.delShop(e.deleteid,e.password);case 4:if(r=t.sent,s=r.data,s.success){t.next=8;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 8:e.password="",e.deleteShop=!1,e.getShop(),Object(d["a"])({type:"success",message:"删除商城成功"});case 12:case"end":return t.stop()}}),t)})))()},setRunning:function(e,t,r){var s=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r){a.next=2;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:"审核未通过，不可操作上架状态"}));case 2:return a.next=4,V.shop.setRunning(e,t);case 4:if(n=a.sent,i=n.data,i.success){a.next=8;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:i.message}));case 8:s.getShop();case 9:case"end":return a.stop()}}),a)})))()},setOpen:function(e,t,r){var s=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r){a.next=2;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:"审核未通过，不可操作营业状态"}));case 2:return a.next=4,V.shop.setOpen(e,t);case 4:if(n=a.sent,i=n.data,i.success){a.next=8;break}return a.abrupt("return",Object(d["a"])({type:"danger",message:i.message}));case 8:s.getShop();case 9:case"end":return a.stop()}}),a)})))()},getUnfinished:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.shopList.length){t.next=2;break}return t.abrupt("return");case 2:r=e.shopList.length-1;case 3:if(!(r>=0)){t.next=16;break}return t.next=6,V.order.unfinishedCount(e.shopList[r]._id);case 6:if(s=t.sent,a=s.data,a.success){t.next=11;break}return clearInterval(e.intervalId),t.abrupt("return",Object(d["a"])({type:"danger",message:a.message}));case 11:e.orderCount[e.shopList[r]._id]=a.data,e.orderCount=JSON.parse(JSON.stringify(e.orderCount));case 13:r--,t.next=3;break;case 16:case"end":return t.stop()}}),t)})))()},getFans:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,V.follow.shopFollow(e.fans_param);case 2:if(r=t.sent,s=r.data,s.success){t.next=6;break}return t.abrupt("return",Object(d["a"])({type:"danger",message:s.message}));case 6:e.fans.items=s.data.items,e.fans.total=s.data.total;case 8:case"end":return t.stop()}}),t)})))()}}},da=ua,la=(r("b3df"),Object(D["a"])(da,Ws,Ks,!1,null,"77ff04fd",null)),pa=la.exports,ma={name:"User",components:{Header:Fr,UserBaseInfo:ys,UserAddressInfo:$s,UserOrderInfo:Ns,ShopOrderInfo:Vs,UserFollowInfo:Js,UserShopInfo:pa,VanImage:p["a"]},data:function(){return{active:0}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.active=Number(e.$route.params.active);case 1:case"end":return t.stop()}}),t)})))()},methods:{}},fa=ma,ha=(r("4e09"),Object(D["a"])(fa,gs,ws,!1,null,"b8c81332",null)),va=ha.exports,ga=[{path:"/",name:"Home",component:Mr,meta:{title:"海外圈-海外华人的圈圈",keepAlive:!0}},{path:"/service/:type",name:"Service",component:Xr,meta:{title:"海外圈-商店服务",keepAlive:!0}},{path:"/shop/:_id",name:"Shop",component:vs,meta:{title:"海外圈-店铺信息"}},{path:"/user/:active",name:"User",component:va,meta:{title:"海外圈-个人中心"}}],wa=ga;a["a"].use(Ce["a"]);var ba=function(e){var t="PC"===e?jr:wa,r=new Ce["a"]({mode:"history",routes:t});return r.beforeEach((function(e,t,r){var s=e.matched.slice().reverse().find((function(e){return e.meta&&e.meta.title})),a=e.matched.slice().reverse().find((function(e){return e.meta&&e.meta.metaTags}));if(s&&(document.title=s.meta.title),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map((function(e){return e.parentNode.removeChild(e)})),!a)return r();a.meta.metaTags.map((function(e){var t=document.createElement("meta");return Object.keys(e).forEach((function(r){t.setAttribute(r,e[r])})),t.setAttribute("data-vue-router-controlled",""),t})).forEach((function(e){return document.head.appendChild(e)})),r()})),r},_a=r("2f62"),xa={loading:!1,showAccount:!1,showAddress:!1,eidtAddress:null,user:null,infoList:[]},Ca=xa,ka={setLoading:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:s=e.commit,e.state,s("setLoading",t);case 2:case"end":return r.stop()}}),r)})))()},setAccount:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:s=e.commit,e.state,s("setAccount",t);case 2:case"end":return r.stop()}}),r)})))()},setAddress:function(e,t){return Object(l["a"])(regeneratorRuntime.mark((function r(){var s,a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:s=e.commit,e.state,a=t.show,n=t.info,s("setAddress",{show:a,info:n});case 3:case"end":return r.stop()}}),r)})))()},getUser:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,e.state,t.next=3,V.user.getUser();case 3:s=t.sent,a=s.data,a.success?r("getUser",a.data):r("getUser",null);case 6:case"end":return t.stop()}}),t)})))()},getInfoList:function(e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,e.state,t.next=3,V.info.getInfoList();case 3:s=t.sent,a=s.data,a.success?r("getInfoList",a.data):r("getInfoList",[]);case 6:case"end":return t.stop()}}),t)})))()}},ya=ka,Ra={setLoading:function(e,t){e.loading=t},setAccount:function(e,t){e.showAccount=t},setAddress:function(e,t){var r=t.show,s=t.info;e.eidtAddress=s,e.showAddress=r},getUser:function(e,t){e.user=t},getInfoList:function(e,t){e.infoList=t}},Oa=Ra;a["a"].use(_a["a"]);var ja=new _a["a"].Store({state:Ca,mutations:Oa,actions:ya}),Ia=ja,Ea=r("4eb5"),$a=r.n(Ea);r("2ea5");a["a"].use($a.a),a["a"].use(s["a"]),a["a"].config.productionTip=!1;var Sa=document.documentElement.clientWidth,La=Sa>700?"PC":"MB",Ua="PC"===La?se:xe,Aa=ba(La);a["a"].prototype.format=function(e){if(e)return e.replace(/\n/g,"<br>")},new a["a"]({router:Aa,store:Ia,render:function(e){return e(Ua)}}).$mount("#app")},"578f":function(e,t,r){"use strict";r("dad2")},"5ca3":function(e,t,r){},"5dfa":function(e,t,r){"use strict";r("ff88")},"671c":function(e,t,r){"use strict";r("a151")},"67b7":function(e,t,r){"use strict";r("c608")},6954:function(e,t,r){},"6b8a":function(e,t,r){"use strict";r("7e86")},"6bd0":function(e,t,r){"use strict";r("bba3")},"71c1":function(e,t,r){"use strict";r("f2a8")},"7e73":function(e,t,r){"use strict";r("1627")},"7e86":function(e,t,r){},"7f26":function(e,t,r){"use strict";r("1eec")},"8d58":function(e,t,r){},"914b":function(e,t,r){"use strict";r("96fa")},"93e9":function(e,t,r){"use strict";r("115e")},"96fa":function(e,t,r){},"9ad9":function(e,t,r){},"9f0a":function(e,t,r){},a06d:function(e,t,r){"use strict";r("c67e")},a151:function(e,t,r){},a3ad:function(e,t,r){"use strict";r("9ad9")},acb3:function(e,t,r){"use strict";r("e04a")},ae26:function(e,t,r){},b3df:function(e,t,r){"use strict";r("d86f")},b5d6:function(e,t,r){"use strict";r("ecb2")},b6bb:function(e,t,r){"use strict";r("5ca3")},b7fb:function(e,t,r){"use strict";r("d7e6")},ba55:function(e,t,r){},bb72:function(e,t,r){"use strict";r("04d9")},bba3:function(e,t,r){},c608:function(e,t,r){},c67e:function(e,t,r){},cca3:function(e,t,r){"use strict";r("22e8")},ceae:function(e,t,r){"use strict";r("8d58")},d7ce:function(e,t,r){"use strict";r("20a2")},d7e6:function(e,t,r){},d86f:function(e,t,r){},dad2:function(e,t,r){},e04a:function(e,t,r){},e504:function(e,t,r){},ecb2:function(e,t,r){},f2a8:function(e,t,r){},f566:function(e,t,r){},f9b3:function(e,t,r){"use strict";r("9f0a")},fda8:function(e,t,r){"use strict";r("ba55")},ff88:function(e,t,r){}});